<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#1890ff" />
    <meta
      name="description"
      content="KhoAugment POS - Hệ thống quản lý bán hàng chuyên nghiệp cho thị trường Việt Nam"
    />
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
    <link rel="manifest" href="/manifest.json" />

    <!-- Ensure proper MIME types -->
    <script type="text/javascript">
      // Force module detection
      window.__CF_APP_MODULES = true;

      // Ensure all module scripts load properly
      window.moduleLoadErrors = [];
      window.addEventListener(
        "error",
        function (e) {
          if (e.target.tagName === "SCRIPT" && e.target.type === "module") {
            console.error("Module load error:", e);
            window.moduleLoadErrors.push({
              src: e.target.src,
              error: e.error ? e.error.message : "Unknown error",
            });
          }
        },
        true
      );

      // Helper to set correct Content-Type headers for scripts
      function loadScript(url, type) {
        return new Promise((resolve, reject) => {
          const script = document.createElement("script");
          script.src = url;
          script.type = type || "text/javascript";
          script.async = true;
          script.onload = () => resolve();
          script.onerror = (e) =>
            reject(new Error(`Script load error for ${url}`));
          document.head.appendChild(script);
        });
      }
    </script>

    <title>KhoAugment POS</title>
  </head>
  <body>
    <div id="root">
      <div
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          width: 100vw;
          background-color: #f5f5f5;
        "
      >
        <div style="text-align: center">
          <div
            style="
              font-size: 2rem;
              font-weight: bold;
              margin-bottom: 1rem;
              color: #1890ff;
            "
          >
            KhoAugment POS
          </div>
          <div style="font-size: 1rem; color: #666">Đang tải ứng dụng...</div>
        </div>
      </div>
    </div>

    <!-- Use script tag with explicit type and preload key modules -->
    <script type="module">
      // Import the module loader wrapper
      import "/src/main-module.js";
    </script>
  </body>
</html>
