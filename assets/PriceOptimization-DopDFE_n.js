import{j as e}from"./index-D0cJwDsb.js";import{r as o}from"./vendor-DD54NZMZ.js";import{T as U,H as _,l as S,f as h,u as V,e as I,C as c,F as P,$ as B,aw as Q,J as W,ax as Y,a0 as Z,B as F,ay as ee,m as k,a9 as f,aa as v,y as ne,az as te,A as re,a8 as se,M as ie,k as ae}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:ce,Text:b,Paragraph:L}=U,{TabPane:R}=V,{Option:C}=B,{RangePicker:le}=Z,me=()=>{const[T,x]=o.useState(!0),[p,N]=o.useState([]),[u,z]=o.useState("competitive"),[y,O]=o.useState(30),[a,A]=o.useState([]),[d,w]=o.useState([]),[$,M]=o.useState(!1),D=[{key:"1",name:"Laptop Dell Inspiron 15",sku:"DELL-INS-15",category:"Laptop",currentPrice:15e6,cost:12e6,suggestedPrice:155e5,margin:20,suggestedMargin:22.58,competitivePrice:{min:145e5,max:16e6,avg:152e5},demand:"medium",sales:12,inventory:25},{key:"2",name:'Màn hình Dell 24"',sku:"DELL-MON-24",category:"Màn hình",currentPrice:35e5,cost:27e5,suggestedPrice:37e5,margin:22.86,suggestedMargin:27.03,competitivePrice:{min:32e5,max:38e5,avg:345e4},demand:"high",sales:35,inventory:42},{key:"3",name:"Chuột không dây Logitech",sku:"LOG-MOUSE-01",category:"Phụ kiện",currentPrice:45e4,cost:28e4,suggestedPrice:42e4,margin:37.78,suggestedMargin:33.33,competitivePrice:{min:4e5,max:55e4,avg:45e4},demand:"high",sales:56,inventory:78},{key:"4",name:"Bàn phím cơ AKKO",sku:"AKKO-KB-01",category:"Phụ kiện",currentPrice:12e5,cost:8e5,suggestedPrice:135e4,margin:33.33,suggestedMargin:40.74,competitivePrice:{min:11e5,max:145e4,avg:125e4},demand:"medium",sales:18,inventory:15},{key:"5",name:"Laptop Acer Nitro 5",sku:"ACER-NIT-5",category:"Laptop",currentPrice:22e6,cost:185e5,suggestedPrice:215e5,margin:15.91,suggestedMargin:13.95,competitivePrice:{min:2e7,max:225e5,avg:212e5},demand:"low",sales:5,inventory:8}];o.useEffect(()=>{setTimeout(()=>{N(D),j(D,u,y),x(!1)},1500)},[]);const j=(n,t,s)=>{x(!0),setTimeout(()=>{const l=n.map(r=>{let i;switch(t){case"competitive":i=Math.round(r.competitivePrice.avg*(.95+Math.random()*.1));break;case"margin":i=Math.round(r.cost/(1-s/100));break;case"demand":const q=r.demand==="high"?1.1:r.demand==="medium"?1:.9;i=Math.round(r.currentPrice*q);break;case"inventory":const J=r.inventory<10?1.05:r.inventory>50?.95:1;i=Math.round(r.currentPrice*J);break;default:i=r.currentPrice}const m=((i-r.cost)/i*100).toFixed(2);return{...r,suggestedPrice:i,suggestedMargin:parseFloat(m),priceChange:i-r.currentPrice,priceChangePercent:((i-r.currentPrice)/r.currentPrice*100).toFixed(2)}});A(l),x(!1)},1e3)},K=()=>{d.length!==0&&(x(!0),setTimeout(()=>{N(n=>n.map(t=>{const s=a.find(r=>r.key===t.key);return d.some(r=>r.key===t.key)&&s?{...t,currentPrice:s.suggestedPrice,margin:s.suggestedMargin}:t})),x(!1),M(!1),w([]),j(p,u,y)},1e3))},E=n=>{z(n),j(p,n,y)},G=n=>{O(n),j(p,u,n)},H=[{title:"Sản phẩm",dataIndex:"name",key:"name",render:(n,t)=>e.jsxs("div",{children:[e.jsx("div",{children:n}),e.jsx(b,{type:"secondary",children:t.sku})]})},{title:"Danh mục",dataIndex:"category",key:"category",render:n=>e.jsx(_,{color:"blue",children:n}),filters:[...new Set(p.map(n=>n.category))].map(n=>({text:n,value:n})),onFilter:(n,t)=>t.category===n},{title:"Giá hiện tại",dataIndex:"currentPrice",key:"currentPrice",sorter:(n,t)=>n.currentPrice-t.currentPrice,render:n=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n)},{title:"Giá đề xuất",dataIndex:"suggestedPrice",key:"suggestedPrice",sorter:(n,t)=>n.suggestedPrice-t.suggestedPrice,render:n=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n)},{title:"Thay đổi",dataIndex:"priceChange",key:"priceChange",sorter:(n,t)=>n.priceChange-t.priceChange,render:(n,t)=>{const s=n>0?"#52c41a":n<0?"#f5222d":"",l=n>0?e.jsx(f,{}):n<0?e.jsx(v,{}):null;return e.jsxs(S,{children:[e.jsxs("span",{style:{color:s},children:[l," ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n)]}),e.jsxs("span",{style:{color:s},children:["(",t.priceChangePercent,"%)"]})]})}},{title:"Biên LN hiện tại",dataIndex:"margin",key:"margin",sorter:(n,t)=>n.margin-t.margin,render:n=>`${n}%`},{title:"Biên LN đề xuất",dataIndex:"suggestedMargin",key:"suggestedMargin",sorter:(n,t)=>n.suggestedMargin-t.suggestedMargin,render:(n,t)=>{const s=(n-t.margin).toFixed(2),l=s>0?"#52c41a":s<0?"#f5222d":"";return e.jsxs(S,{children:[e.jsxs("span",{children:[n,"%"]}),e.jsxs("span",{style:{color:l},children:["(",s>0?"+":"",s,"%)"]})]})}}],X={onChange:(n,t)=>{w(t)}},g=(()=>{if(!a.length)return{totalChange:0,averageMarginChange:0,productsIncreased:0,productsDecreased:0};const n=a.reduce((i,m)=>i+m.priceChange,0),s=a.reduce((i,m)=>i+(m.suggestedMargin-m.margin),0)/a.length,l=a.filter(i=>i.priceChange>0).length,r=a.filter(i=>i.priceChange<0).length;return{totalChange:n,averageMarginChange:s,productsIncreased:l,productsDecreased:r}})();return e.jsxs("div",{className:"price-optimization",children:[e.jsxs(h,{children:[e.jsx(ce,{level:2,children:"Tối ưu hóa giá sản phẩm"}),e.jsx(L,{type:"secondary",children:"Tối ưu hóa giá sản phẩm dựa trên nhiều yếu tố: chi phí, nhu cầu thị trường, giá cạnh tranh và tồn kho."}),e.jsxs(V,{defaultActiveKey:"optimization",children:[e.jsx(R,{tab:e.jsxs("span",{children:[e.jsx(te,{})," Tối ưu hóa giá"]}),children:e.jsxs(I,{gutter:[16,16],children:[e.jsx(c,{span:24,children:e.jsx(h,{title:"Chiến lược tối ưu hóa",children:e.jsxs(I,{gutter:16,children:[e.jsx(c,{xs:24,sm:12,lg:6,children:e.jsx(P.Item,{label:"Chiến lược giá",children:e.jsxs(B,{value:u,onChange:E,style:{width:"100%"},children:[e.jsx(C,{value:"competitive",children:"Dựa trên giá cạnh tranh"}),e.jsx(C,{value:"margin",children:"Dựa trên biên lợi nhuận"}),e.jsx(C,{value:"demand",children:"Dựa trên nhu cầu thị trường"}),e.jsx(C,{value:"inventory",children:"Dựa trên tồn kho"})]})})}),u==="margin"&&e.jsx(c,{xs:24,sm:12,lg:6,children:e.jsx(P.Item,{label:e.jsxs("span",{children:["Mục tiêu biên lợi nhuận",e.jsx(W,{title:"Biên lợi nhuận mục tiêu (%) cho chiến lược giá",children:e.jsx(Y,{style:{marginLeft:4}})})]}),children:e.jsx(Q,{min:0,max:50,value:y,onChange:G,marks:{0:"0%",10:"10%",20:"20%",30:"30%",40:"40%",50:"50%"}})})}),e.jsx(c,{xs:24,sm:12,lg:6,children:e.jsx(P.Item,{label:"Thời gian áp dụng",children:e.jsx(le,{style:{width:"100%"}})})}),e.jsx(c,{xs:24,sm:12,lg:6,children:e.jsx(P.Item,{label:"Hành động",children:e.jsx(F,{type:"primary",loading:T,onClick:()=>j(p,u,y),icon:e.jsx(ee,{}),style:{width:"100%"},children:"Chạy tối ưu hóa"})})})]})})}),e.jsx(c,{span:24,children:e.jsxs(I,{gutter:16,children:[e.jsx(c,{xs:24,sm:12,md:6,children:e.jsx(h,{children:e.jsx(k,{title:"Tổng thay đổi",value:g.totalChange,precision:0,valueStyle:{color:g.totalChange>=0?"#3f8600":"#cf1322"},prefix:g.totalChange>=0?e.jsx(f,{}):e.jsx(v,{}),suffix:"VND",formatter:n=>new Intl.NumberFormat("vi-VN").format(n)})})}),e.jsx(c,{xs:24,sm:12,md:6,children:e.jsx(h,{children:e.jsx(k,{title:"Thay đổi biên LN trung bình",value:g.averageMarginChange,precision:2,valueStyle:{color:g.averageMarginChange>=0?"#3f8600":"#cf1322"},prefix:g.averageMarginChange>=0?e.jsx(f,{}):e.jsx(v,{}),suffix:"%"})})}),e.jsx(c,{xs:24,sm:12,md:6,children:e.jsx(h,{children:e.jsx(k,{title:"Sản phẩm tăng giá",value:g.productsIncreased,valueStyle:{color:"#3f8600"},prefix:e.jsx(f,{}),suffix:`/${a.length}`})})}),e.jsx(c,{xs:24,sm:12,md:6,children:e.jsx(h,{children:e.jsx(k,{title:"Sản phẩm giảm giá",value:g.productsDecreased,valueStyle:{color:"#cf1322"},prefix:e.jsx(v,{}),suffix:`/${a.length}`})})})]})}),e.jsx(c,{span:24,children:e.jsxs(h,{title:"Kết quả tối ưu hóa giá",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(S,{children:e.jsxs(F,{type:"primary",disabled:d.length===0,onClick:()=>M(!0),children:["Áp dụng giá đã chọn (",d.length,")"]})})}),e.jsx(ne,{rowSelection:{type:"checkbox",...X},columns:H,dataSource:a,loading:T,pagination:{pageSize:5},rowKey:"key"})]})})]})},"optimization"),e.jsxs(R,{tab:e.jsxs("span",{children:[e.jsx(se,{})," Phân tích giá"]}),children:[e.jsx(re,{message:"Phân tích giá",description:"Công cụ phân tích giá cả thị trường và xu hướng giá đang được phát triển.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(h,{title:"Phân tích giá cả thị trường",children:[e.jsx(L,{children:"Tính năng này sẽ hiển thị:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"So sánh giá của bạn với đối thủ cạnh tranh"}),e.jsx("li",{children:"Xu hướng giá theo thời gian"}),e.jsx("li",{children:"Phân tích độ nhạy cảm giá"}),e.jsx("li",{children:"Phân tích tác động của giá đến doanh số"})]})]})]},"analysis")]})]}),e.jsxs(ie,{title:"Xác nhận thay đổi giá",open:$,onOk:K,onCancel:()=>M(!1),okText:"Áp dụng",cancelText:"Hủy",children:[e.jsxs("p",{children:["Bạn có chắc chắn muốn áp dụng giá mới cho ",d.length," sản phẩm đã chọn?"]}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{}),e.jsx("div",{children:d.map(n=>{const t=a.find(i=>i.key===n.key);if(!t)return null;const s=t.priceChange,l=s>0?"#52c41a":s<0?"#f5222d":"",r=s>0?e.jsx(f,{}):s<0?e.jsx(v,{}):null;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(b,{strong:!0,children:n.name}),e.jsx("div",{children:e.jsxs(b,{type:"secondary",children:[new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n.currentPrice)," → ",e.jsxs("span",{style:{color:l},children:[new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t.suggestedPrice)," ",r," ",t.priceChangePercent,"%"]})]})})]},n.key)})})]})]})]})};export{me as default};
