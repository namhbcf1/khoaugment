import{u as I,j as e}from"./index-CI5lv9mG.js";import{u as C,f as L,r as p,R as S,L as F}from"./vendor-DD54NZMZ.js";import{F as t,S as R,L as x,e as V,C as E,f as T,T as A,A as P,I as u,g as B,h as D,i as z,B as r,j as N,k as q,l as H}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:K,Text:g,Paragraph:O}=A,{Content:Q}=x,J=()=>{const[s]=t.useForm(),l=C(),j=L(),{login:f,isAuthenticated:o,loading:y}=I(),[c,a]=p.useState(""),[n,d]=p.useState(!1),h=j.state?.from||"/";S.useEffect(()=>{o&&l(h,{replace:!0})},[o,l,h]);const b=async k=>{d(!0),a("");try{const{email:i,password:v,remember:w}=k,m=await f({email:i,password:v,remember:w});m.success||a(m.error||"Đăng nhập không thành công. Vui lòng kiểm tra thông tin đăng nhập.")}catch(i){console.error("Login error:",i),a(i.message||"Đăng nhập không thành công. Vui lòng kiểm tra thông tin đăng nhập.")}finally{d(!1)}};return y?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(R,{size:"large",tip:"Đang tải..."})}):e.jsx(x,{style:{minHeight:"100vh",background:"#f0f2f5"},children:e.jsx(Q,{style:{padding:"50px 0"},children:e.jsx(V,{justify:"center",align:"middle",style:{minHeight:"100%"},children:e.jsx(E,{xs:22,sm:16,md:10,lg:8,xl:6,children:e.jsxs(T,{bordered:!1,style:{boxShadow:"0 4px 12px rgba(0,0,0,0.1)",borderRadius:"8px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx(K,{level:2,style:{marginBottom:0},children:"🖥️ Khochuan POS"}),e.jsx(O,{type:"secondary",children:"Đăng nhập để tiếp tục"})]}),c&&e.jsx(P,{message:"Lỗi đăng nhập",description:c,type:"error",showIcon:!0,closable:!0,style:{marginBottom:"24px"}}),e.jsxs(t,{name:"login",form:s,layout:"vertical",onFinish:b,initialValues:{remember:!0},children:[e.jsx(t.Item,{name:"email",rules:[{required:!0,message:"Vui lòng nhập email!"},{type:"email",message:"Email không hợp lệ!"}],children:e.jsx(u,{prefix:e.jsx(B,{}),size:"large",placeholder:"Email",disabled:n})}),e.jsx(t.Item,{name:"password",rules:[{required:!0,message:"Vui lòng nhập mật khẩu!"}],children:e.jsx(u.Password,{prefix:e.jsx(D,{}),size:"large",placeholder:"Mật khẩu",disabled:n})}),e.jsx(t.Item,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(z,{disabled:n,children:"Ghi nhớ đăng nhập"})}),e.jsx(F,{to:"/forgot-password",children:"Quên mật khẩu?"})]})}),e.jsx(t.Item,{children:e.jsx(r,{type:"primary",htmlType:"submit",icon:e.jsx(N,{}),size:"large",block:!0,loading:n,children:"Đăng nhập"})})]}),e.jsx(q,{children:e.jsx(g,{type:"secondary",children:"hoặc đăng nhập với vai trò"})}),e.jsxs(H,{direction:"vertical",style:{width:"100%"},children:[e.jsx(r,{block:!0,onClick:()=>{s.setFieldsValue({email:"admin@pos.com",password:"admin123"}),s.submit()},disabled:n,children:"Quản trị viên (Demo)"}),e.jsx(r,{block:!0,onClick:()=>{s.setFieldsValue({email:"cashier@pos.com",password:"cashier123"}),s.submit()},disabled:n,children:"Thu ngân (Demo)"}),e.jsx(r,{block:!0,onClick:()=>{s.setFieldsValue({email:"staff@pos.com",password:"staff123"}),s.submit()},disabled:n,children:"Nhân viên (Demo)"})]}),e.jsx("div",{style:{textAlign:"center",marginTop:"24px"},children:e.jsxs(g,{type:"secondary",children:["© ",new Date().getFullYear()," Khochuan POS"]})})]})})})})})};export{J as default};
