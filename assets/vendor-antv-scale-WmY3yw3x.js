import{v as t,Z as n,d as e,g as o,W as s,_ as r,$ as i}from"./vendor-antv-util-BIOdtugi.js";import{f as a}from"./vendor-fecha-eoCYq76Q.js";import{c as u}from"./vendor-color-string-DlpZsNR2.js";function c(t,...n){return n.reduce((t,n)=>e=>t(n(e)),t)}function h(t,n){return n-t?e=>(e-t)/(n-t):t=>.5}function l(t,n,e,o,s){let r=e||0,i=o||t.length;const a=s||(t=>t);for(;r<i;){const e=Math.floor((r+i)/2);a(t[e])>n?i=e:r=e+1}return r}const d=Math.sqrt(50),p=Math.sqrt(10),g=Math.sqrt(2);function f(t,n,e){const o=(n-t)/Math.max(0,e),s=Math.floor(Math.log(o)/Math.LN10),r=o/10**s;return s>=0?(r>=d?10:r>=p?5:r>=g?2:1)*10**s:-(10**-s)/(r>=d?10:r>=p?5:r>=g?2:1)}function m(t,n,e){const o=Math.abs(n-t)/Math.max(0,e);let s=10**Math.floor(Math.log(o)/Math.LN10);const r=o/s;return r>=d?s*=10:r>=p?s*=5:r>=g&&(s*=2),n<t?-s:s}const M=(t,n,e=5)=>{const o=[t,n];let s,r=0,i=o.length-1,a=o[r],u=o[i];return u<a&&([a,u]=[u,a],[r,i]=[i,r]),s=f(a,u,e),s>0?(a=Math.floor(a/s)*s,u=Math.ceil(u/s)*s,s=f(a,u,e)):s<0&&(a=Math.ceil(a*s)/s,u=Math.floor(u*s)/s,s=f(a,u,e)),s>0?(o[r]=Math.floor(a/s)*s,o[i]=Math.ceil(u/s)*s):s<0&&(o[r]=Math.ceil(a*s)/s,o[i]=Math.floor(u*s)/s),o},v=1e3,k=6e4,y=36e5,w=864e5,T=6048e5,D=2592e6,x=31536e6;function O(t,n,e,o){const s=(t,s)=>{s&&((t,n)=>{const s=t=>o(t)%n===0;let r=n;for(;r&&!s(t);)e(t,-1),r-=1})(t,s),n(t)},r=(t,n)=>{const o=new Date(+t-1);return s(o,n),e(o,n),s(o),o};return{ceil:r,floor:(t,n)=>{const e=new Date(+t);return s(e,n),e},range:(t,n,o,i)=>{const a=[],u=Math.floor(o);for(let c=i?r(t,o):r(t);c<n;e(c,u),s(c))a.push(new Date(+c));return a},duration:t}}const C=O(1,t=>t,(t,n=1)=>{t.setTime(+t+n)},t=>t.getTime()),b=O(v,t=>{t.setMilliseconds(0)},(t,n=1)=>{t.setTime(+t+v*n)},t=>t.getSeconds()),I=O(k,t=>{t.setSeconds(0,0)},(t,n=1)=>{t.setTime(+t+k*n)},t=>t.getMinutes()),S=O(y,t=>{t.setMinutes(0,0,0)},(t,n=1)=>{t.setTime(+t+y*n)},t=>t.getHours()),U=O(w,t=>{t.setHours(0,0,0,0)},(t,n=1)=>{t.setTime(+t+w*n)},t=>t.getDate()-1),N=O(D,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n=1)=>{const e=t.getMonth();t.setMonth(e+n)},t=>t.getMonth()),R=O(T,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,n=1)=>{t.setDate(t.getDate()+7*n)},t=>{const n=N.floor(t),e=new Date(+t);return Math.floor((+e-+n)/T)}),K=O(x,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n=1)=>{const e=t.getFullYear();t.setFullYear(e+n)},t=>t.getFullYear()),j={millisecond:C,second:b,minute:I,hour:S,day:U,week:R,month:N,year:K},A=O(1,t=>t,(t,n=1)=>{t.setTime(+t+n)},t=>t.getTime()),F=O(v,t=>{t.setUTCMilliseconds(0)},(t,n=1)=>{t.setTime(+t+v*n)},t=>t.getUTCSeconds()),B=O(k,t=>{t.setUTCSeconds(0,0)},(t,n=1)=>{t.setTime(+t+k*n)},t=>t.getUTCMinutes()),W=O(y,t=>{t.setUTCMinutes(0,0,0)},(t,n=1)=>{t.setTime(+t+y*n)},t=>t.getUTCHours()),H=O(w,t=>{t.setUTCHours(0,0,0,0)},(t,n=1)=>{t.setTime(+t+w*n)},t=>t.getUTCDate()-1),P=O(D,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n=1)=>{const e=t.getUTCMonth();t.setUTCMonth(e+n)},t=>t.getUTCMonth()),Y=O(T,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,n=1)=>{t.setTime(+t+T*n)},t=>{const n=P.floor(t),e=new Date(+t);return Math.floor((+e-+n)/T)}),$=O(x,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n=1)=>{const e=t.getUTCFullYear();t.setUTCFullYear(e+n)},t=>t.getUTCFullYear()),q={millisecond:A,second:F,minute:B,hour:W,day:H,week:Y,month:P,year:$};function L(t,n,e,o,s){const r=+t,i=+n,{tickIntervals:a,year:u,millisecond:c}=function(t){const n=t?q:j,{year:e,month:o,week:s,day:r,hour:i,minute:a,second:u,millisecond:c}=n;return{tickIntervals:[[u,1],[u,5],[u,15],[u,30],[a,1],[a,5],[a,15],[a,30],[i,1],[i,3],[i,6],[i,12],[r,1],[r,2],[s,1],[o,1],[o,3],[e,1]],year:e,millisecond:c}}(s),h=([t,n])=>t.duration*n,d=o?(i-r)/o:e||5,p=o||(i-r)/d,g=a.length,f=l(a,p,0,g,h);let M;if(f===g){M=[u,m(r/u.duration,i/u.duration,d)]}else if(f){const t=p/h(a[f-1])<h(a[f])/p,[n,e]=t?a[f-1]:a[f];M=[n,o?Math.ceil(o/n.duration):e]}else{M=[c,Math.max(m(r,i,d),1)]}return M}const z=(t,n,e,o,s)=>{const r=t>n,i=r?n:t,a=r?t:n,[u,c]=L(i,a,e,o,s),h=[u.floor(i,c),u.ceil(a,c)];return r?h.reverse():h};function E(e){return!t(e)&&!n(e)&&!Number.isNaN(e)}const J=t=>n=>-t(-n),Q=(t,n)=>{const e=Math.log(t),o=t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:t=>Math.log(t)/e;return n?J(o):o},Z=(t,n)=>{const e=t===Math.E?Math.exp:n=>t**n;return n?J(e):e},_=(t,n,e,o)=>{const s=t<0,r=Q(o,s),i=Z(o,s),a=t>n,u=a?n:t,c=a?t:n,h=[i(Math.floor(r(u))),i(Math.ceil(r(c)))];return a?h.reverse():h};function G(t,n,e){let o=e;return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(n-t)*o:o<.5?n:o<2/3?t+(n-t)*(2/3-o)*6:t}function V(t){const n=u.get(t);if(!n)return null;const{model:e,value:o}=n;return"rgb"===e?o:"hsl"===e?function(t){const n=t[0]/360,e=t[1]/100,o=t[2]/100,s=t[3];if(0===e)return[255*o,255*o,255*o,s];const r=o<.5?o*(1+e):o+e-o*e,i=2*o-r;return[255*G(i,r,n+1/3),255*G(i,r,n),255*G(i,r,n-1/3),s]}(o):null}const X=(t,n)=>e=>t*(1-e)+n*e,tt=(t,n)=>"number"==typeof t&&"number"==typeof n?X(t,n):"string"==typeof t&&"string"==typeof n?((t,n)=>{const e=V(t),o=V(n);return null===e||null===o?e?()=>t:()=>n:t=>{const n=new Array(4);for(let u=0;u<4;u+=1){const s=e[u],r=o[u];n[u]=s*(1-t)+r*t}const[s,r,i,a]=n;return`rgba(${Math.round(s)}, ${Math.round(r)}, ${Math.round(i)}, ${a})`}})(t,n):()=>t,nt=(t,n)=>{const e=X(t,n);return t=>Math.round(e(t))};function et({map:t,initKey:n},e){const o=n(e);return t.has(o)?t.get(o):e}function ot(t){return"object"==typeof t?t.valueOf():t}class st extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=ot,null!==t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(et({map:this.map,initKey:this.initKey},t))}has(t){return super.has(et({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(function({map:t,initKey:n},e){const o=n(e);return t.has(o)?t.get(o):(t.set(o,e),e)}({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(function({map:t,initKey:n},e){const o=n(e);return t.has(o)&&(e=t.get(o),t.delete(o)),e}({map:this.map,initKey:this.initKey},t))}}class rt{constructor(t){this.options=o({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=o({},this.options,t),this.rescale(t)}rescale(t){}}const it=Symbol("defaultUnknown");function at(t,n,e){for(let o=0;o<n.length;o+=1)t.has(n[o])||t.set(e(n[o]),o)}function ut(t){const{value:n,from:e,to:o,mapper:s,notFoundReturn:r}=t;let i=s.get(n);if(void 0===i){if(r!==it)return r;i=e.push(n)-1,s.set(n,i)}return o[i%o.length]}function ct(t){return t instanceof Date?t=>`${t}`:"object"==typeof t?t=>JSON.stringify(t):t=>t}class ht extends rt{getDefaultOptions(){return{domain:[],range:[],unknown:it}}constructor(t){super(t)}map(t){return 0===this.domainIndexMap.size&&at(this.domainIndexMap,this.getDomain(),this.domainKey),ut({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&at(this.rangeIndexMap,this.getRange(),this.rangeKey),ut({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[e]=this.options.range;if(this.domainKey=ct(n),this.rangeKey=ct(e),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new ht(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}function lt(t){return Math.round(1e12*t)/1e12}function dt(t){const{domain:n,range:e,paddingOuter:o,paddingInner:s,flex:r,round:i,align:a}=t,u=n.length,c=function(t,n){const e=n-t.length;return e>0?[...t,...new Array(e).fill(1)]:e<0?t.slice(0,n):t}(r,u),[h,l]=e,d=l-h,p=d/(2/u*o+1-1/u*s),g=p*s/u,f=p-u*g,m=function(t){const n=Math.min(...t);return t.map(t=>t/n)}(c),M=f/m.reduce((t,n)=>t+n),v=new st(n.map((t,n)=>{const e=m[n]*M;return[t,i?Math.floor(e):e]})),k=new st(n.map((t,n)=>{const e=m[n]*M+g;return[t,i?Math.floor(e):e]})),y=Array.from(k.values()).reduce((t,n)=>t+n),w=h+(d-(y-y/u*s))*a;let T=i?Math.round(w):w;const D=new Array(u);for(let x=0;x<u;x+=1){D[x]=lt(T);const t=n[x];T+=k.get(t)}return{valueBandWidth:v,valueStep:k,adjustedRange:D}}class pt extends ht{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:it,flex:[]}}constructor(t){super(t)}clone(){return new pt(this.options)}getStep(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:e,round:o,flex:s}=this.options,{adjustedRange:r,valueBandWidth:i,valueStep:a}=function(t){var n;const{domain:e}=t,o=e.length;if(0===o)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(n=t.flex)||void 0===n?void 0:n.length)return dt(t);const{range:s,paddingOuter:r,paddingInner:i,round:a,align:u}=t;let c,h,l=s[0];const d=s[1]-l,p=2*r,g=o-i;c=d/Math.max(1,p+g),a&&(c=Math.floor(c)),l+=(d-c*(o-i))*u,h=c*(1-i),a&&(l=Math.round(l),h=Math.round(h));const f=new Array(o).fill(0).map((t,n)=>l+n*c);return{valueStep:c,valueBandWidth:h,adjustedRange:f}}({align:t,range:e,round:o,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=a,this.valueBandWidth=i,this.adjustedRange=r}}const gt=(t,n,e)=>{let o,s,r=t,i=n;if(r===i&&e>0)return[r];let a=f(r,i,e);if(0===a||!Number.isFinite(a))return[];if(a>0){r=Math.ceil(r/a),i=Math.floor(i/a),s=new Array(o=Math.ceil(i-r+1));for(let t=0;t<o;t+=1)s[t]=(r+t)*a}else{a=-a,r=Math.ceil(r*a),i=Math.floor(i*a),s=new Array(o=Math.ceil(i-r+1));for(let t=0;t<o;t+=1)s[t]=(r+t)/a}return s};class ft extends rt{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:gt}}map(t){const[n]=this.options.range;return void 0!==n?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&void 0!==n?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:o}=this.options,[s,r]=n;return e(s)&&e(r)?t(s,r,o):[]}clone(){return new ft(this.options)}}function mt(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const Mt=[1,5,2,2.5,4,3],vt=100*Number.EPSILON;function kt(t,n,e,o,i,a){const u=s(n),c=r(n,t);let h=0;const l=function(t,n){return(t%n+n)%n}(o,a);return(l<vt||a-l<vt)&&o<=0&&i>=0&&(h=1),1-c/(u-1)-e+h}function yt(t,n,e){const o=s(n);return 1-r(n,t)/(o-1)-e+1}function wt(t,n,e,o,s,r){const i=(t-1)/(r-s),a=(n-1)/(Math.max(r,o)-Math.min(e,s));return 2-Math.max(i/a,a/i)}function Tt(t,n){return t>=n?2-(t-1)/(n-1):1}function Dt(t,n,e,o){return 1-.5*((n-o)**2+(t-e)**2)/(.1*(n-t))**2}function xt(t,n,e){const o=n-t;if(e>o){return 1-((e-o)/2)**2/(.1*o)**2}return 1}function Ot(){return 1}const Ct=(t,n,e=5,o=!0,s=Mt,r=[.25,.2,.5,.05])=>{const i=e<0?0:Math.round(e);if(Number.isNaN(t)||Number.isNaN(n)||"number"!=typeof t||"number"!=typeof n||!i)return[];if(n-t<1e-15||1===i)return[t];const a={score:-2,lmin:0,lmax:0,lstep:0};let u=1;for(;u<1/0;){for(let e=0;e<s.length;e+=1){const c=s[e],h=yt(c,s,u);if(r[0]*h+r[1]+r[2]+r[3]<a.score){u=1/0;break}let l=2;for(;l<1/0;){const e=Tt(l,i);if(r[0]*h+r[1]+r[2]*e+r[3]<a.score)break;const d=(n-t)/(l+1)/u/c;let p=Math.ceil(Math.log10(d));for(;p<1/0;){const d=u*c*10**p,g=xt(t,n,d*(l-1));if(r[0]*h+r[1]*g+r[2]*e+r[3]<a.score)break;const f=Math.floor(n/d)*u-(l-1)*u,m=Math.ceil(t/d)*u;if(f<=m){const e=m-f;for(let h=0;h<=e;h+=1){const e=(f+h)*(d/u),p=e+d*(l-1),g=d,m=kt(c,s,u,e,p,g),M=Dt(t,n,e,p),v=wt(l,i,t,n,e,p),k=Ot(),y=r[0]*m+r[1]*M+r[2]*v+r[3]*k;y>a.score&&(!o||e<=t&&p>=n)&&(a.lmin=e,a.lmax=p,a.lstep=g,a.score=y)}}p+=1}l+=1}}u+=1}const c=mt(a.lmax),h=mt(a.lmin),l=mt(a.lstep),d=Math.floor(function(t){return Math.round(1e12*t)/1e12}((c-h)/l))+1,p=new Array(d);p[0]=mt(h);for(let g=1;g<d;g+=1)p[g]=mt(p[g-1]+l);return p};class bt extends rt{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:Ct}}map(t){return E(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new bt(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:o}=this.options,[s,r]=t;return e(s)&&e(r)?o(s,r,n):[]}}const It=(t,n,e)=>{const[o,s]=t,[r,i]=n;let a,u;return o<s?(a=h(o,s),u=e(r,i)):(a=h(s,o),u=e(i,r)),c(u,a)},St=(t,n,e)=>{const o=Math.min(t.length,n.length)-1,s=new Array(o),r=new Array(o),i=t[0]>t[o],a=i?[...t].reverse():t,u=i?[...n].reverse():n;for(let c=0;c<o;c+=1)s[c]=h(a[c],a[c+1]),r[c]=e(u[c],u[c+1]);return n=>{const e=l(t,n,1,o)-1,i=s[e];return c(r[e],i)(n)}},Ut=(t,n,e,o)=>(Math.min(t.length,n.length)>2?St:It)(t,n,o?nt:e);class Nt extends rt{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:X,tickCount:5}}map(t){return E(t)?this.output(t):this.options.unknown}invert(t){return E(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,e,...o]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,e,...o)}getTicks(){const{tickMethod:t}=this.options,[n,e,o,...s]=this.getTickMethodOptions();return t(n,e,o,...s)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options;return[t[0],t[t.length-1],n]}chooseNice(){return M}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:e}=this.options,o=this.options.domain.map(t),s=Math.min(o.length,e.length);return n?function(t,n){const e=n<t?n:t,o=t>n?t:n;return t=>Math.min(Math.max(e,t),o)}(o[0],o[s-1]):i}composeOutput(t,n){const{domain:e,range:o,round:s,interpolate:r}=this.options,i=Ut(e.map(t),o,r,s);this.output=c(i,n,t)}composeInput(t,n,e){const{domain:o,range:s}=this.options,r=Ut(s,o.map(t),X);this.input=c(n,e,r)}}class Rt extends Nt{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:tt,tickMethod:gt,tickCount:5}}chooseTransforms(){return[i,i]}clone(){return new Rt(this.options)}}class Kt extends pt{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:it,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new Kt(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const jt=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class At extends Nt{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:tt,tickMethod:gt,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(1===t)return[i,i];const n=.5===t?jt:(t=>n=>n<0?-((-n)**t):n**t)(t),e=(t=>n=>n<0?-((-n)**(1/t)):n**(1/t))(t);return[n,e]}clone(){return new At(this.options)}}class Ft extends At{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:tt,tickMethod:gt,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new Ft(this.options)}}class Bt extends rt{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!E(t))return this.options.unknown;const n=l(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,e=n.indexOf(t),o=this.thresholds;return[o[e-1],o[e]]}clone(){return new Bt(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}const Wt=(t,n,e,o=10)=>{const s=t<0,r=Z(o,s),i=Q(o,s),a=n<t,u=a?n:t,c=a?t:n;let h=i(u),l=i(c),d=[];if(!(o%1)&&l-h<e){if(h=Math.floor(h),l=Math.ceil(l),s)for(;h<=l;h+=1){const t=r(h);for(let n=o-1;n>=1;n-=1){const e=t*n;if(e>c)break;e>=u&&d.push(e)}}else for(;h<=l;h+=1){const t=r(h);for(let n=1;n<o;n+=1){const e=t*n;if(e>c)break;e>=u&&d.push(e)}}2*d.length<e&&(d=gt(u,c,e))}else{const t=-1===e?l-h:Math.min(l-h,e);d=gt(h,l,t).map(r)}return a?d.reverse():d};class Ht extends Nt{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:tt,tickMethod:Wt,tickCount:5}}chooseNice(){return _}getTickMethodOptions(){const{domain:t,tickCount:n,base:e}=this.options;return[t[0],t[t.length-1],n,e]}chooseTransforms(){const{base:t,domain:n}=this.options,e=n[0]<0;return[Q(t,e),Z(t,e)]}clone(){return new Ht(this.options)}}class Pt extends Bt{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:Ct}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[t,n,e]=this.getTickMethodOptions();this.options.domain=M(t,n,e)}}getTicks(){const{tickMethod:t}=this.options,[n,e,o]=this.getTickMethodOptions();return t(n,e,o)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options;return[t[0],t[t.length-1],n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[e,o]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*o-(s-this.n)*e)/(this.n+1)}invert(t){const[n,e]=super.invert(t),[o,s]=this.options.domain;return void 0===n&&void 0===e?[n,e]:[n||o,e||s]}getThresholds(){return this.thresholds}clone(){return new Pt(this.options)}}function Yt(t,n){const e=t.length;if(!e)return;if(e<2)return t[e-1];const o=(e-1)*n,s=Math.floor(o),r=t[s];return r+(t[s+1]-r)*(o-s)}class $t extends Bt{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:Ct}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=function(t,n,e=!1){const o=t;e||o.sort((t,n)=>t-n);const s=[];for(let r=1;r<n;r+=1)s.push(Yt(o,r/n));return s}(t,this.n+1,!1)}invert(t){const[n,e]=super.invert(t),{domain:o}=this.options,s=o[0],r=o[o.length-1];return void 0===n&&void 0===e?[n,e]:[n||s,e||r]}getThresholds(){return this.thresholds}clone(){return new $t(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:e}=this.options,o=n.length-1;return e(n[0],n[o],t)}}const qt=(t,n,e,o,s)=>{const r=t>n,i=r?n:t,a=r?t:n,[u,c]=L(i,a,e,o,s),h=u.range(i,new Date(+a+1),c,!0);return r?h.reverse():h};function Lt(t){const n=t.getTimezoneOffset(),e=new Date(t);return e.setMinutes(e.getMinutes()+n,e.getSeconds(),e.getMilliseconds()),e}class zt extends Nt{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:qt,interpolate:X,mask:void 0,utc:!1}}chooseTransforms(){return[t=>+t,t=>new Date(t)]}chooseNice(){return z}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:e,utc:o}=this.options;return[t[0],t[t.length-1],n,e,o]}getFormatter(){const{mask:t,utc:n}=this.options,e=n?q:j,o=n?Lt:i;return n=>a(o(n),t||function(t,n){const{second:e,minute:o,hour:s,day:r,week:i,month:a,year:u}=n;return e.floor(t)<t?".SSS":o.floor(t)<t?":ss":s.floor(t)<t?"hh:mm":r.floor(t)<t?"hh A":a.floor(t)<t?i.floor(t)<t?"MMM DD":"ddd DD":u.floor(t)<t?"MMMM":"YYYY"}(n,e))}clone(){return new zt(this.options)}}var Et;let Jt=Et=class extends Rt{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:i,tickMethod:gt,tickCount:5}}constructor(t){super(t)}clone(){return new Et(this.options)}};var Qt,Zt;Jt=Et=function(t,n,e,o){var s,r=arguments.length,i=r<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,e,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(r<3?s(i):r>3?s(n,e,i):s(n,e))||i);return r>3&&i&&Object.defineProperty(n,e,i),i}([(Qt=function(t){return[t(0),t(1)]},Zt=t=>{const[n,e]=t;return c(X(0,1),h(n,e))},t=>{t.prototype.rescale=function(){this.initRange(),this.nice();const[t]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t))},t.prototype.initRange=function(){const{interpolator:t}=this.options;this.options.range=Qt(t)},t.prototype.composeOutput=function(t,n){const{domain:o,interpolator:s,round:r}=this.getOptions(),i=Zt(o.map(t)),a=r?(t=>n=>{const o=t(n);return e(o)?Math.round(o):o})(s):s;this.output=c(a,i,n,t)},t.prototype.invert=void 0})],Jt);export{pt as B,ft as C,bt as I,Rt as L,ht as O,Kt as P,$t as Q,Ft as S,zt as T,Ht as a,At as b,Bt as c,Pt as d,Jt as e,tt as f};
