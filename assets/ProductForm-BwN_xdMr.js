import{j as e}from"./index-CI5lv9mG.js";import{u as J,h as X,r as a}from"./vendor-DD54NZMZ.js";import{F as s,s as g,f as r,e as o,C as t,l as k,ao as _,T as z,B as I,ap as Q,aq as W,u as D,I as d,$ as m,k as Y,ag as C,ar as b,as as p,a3 as Z,at as ee,M as ne}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:se,Text:N}=z,{Option:i}=m,{TabPane:S}=D,he=()=>{const l=J(),{id:f}=X(),[u]=s.useForm(),[L,x]=a.useState(!1),[y,v]=a.useState([]),[P,A]=a.useState(""),[B,T]=a.useState(!1),[h,M]=a.useState(!1),[te,F]=a.useState(null),V=["Laptop","PC","Màn hình","Linh kiện","Phụ kiện","Âm thanh","Thiết bị mạng","Thiết bị văn phòng","Phần mềm"],G=["Dell","HP","Asus","Acer","Lenovo","Apple","Samsung","LG","Sony","Logitech"],E=["Dell","HP","Asus","Acer","Lenovo","Apple","Samsung","LG","Sony","Logitech","Kingston","Corsair","Microsoft","Intel","AMD","NVIDIA"],O={1:{name:"Laptop Dell Inspiron 15",sku:"DELL-INS-15",barcode:"8935236745123",category:"Laptop",brand:"Dell",supplier:"Dell",price:15e6,cost:13e6,stock:25,status:"active",images:[{uid:"-1",name:"dell-inspiron-15.jpg",status:"done",url:"https://via.placeholder.com/300"}],description:"Laptop Dell Inspiron 15 với cấu hình mạnh mẽ",specifications:{cpu:"Intel Core i5-11300H",ram:"8GB DDR4",storage:"512GB SSD",display:'15.6" Full HD',graphics:"NVIDIA GeForce MX350 2GB",os:"Windows 11 Home",weight:"1.8 kg"},tax:10,warranty:12,featured:!0,notes:"Sản phẩm bán chạy",meta:{title:"Laptop Dell Inspiron 15 - Trường Phát Computer",description:"Laptop Dell Inspiron 15 với cấu hình mạnh mẽ, giá tốt tại Trường Phát Computer",keywords:"dell, inspiron, laptop, dell inspiron 15"}}};a.useEffect(()=>{f&&(M(!0),x(!0),setTimeout(()=>{const n=O[f];n?(F(n),u.setFieldsValue({...n,specifications:JSON.stringify(n.specifications,null,2),meta:{title:n.meta.title,description:n.meta.description,keywords:n.meta.keywords}}),v(n.images||[])):(g.error("Không tìm thấy sản phẩm"),l("/admin/products")),x(!1)},1e3))},[f,u,l]);const R=async n=>{x(!0);try{const c={...n,images:y,specifications:n.specifications?JSON.parse(n.specifications):{}};await new Promise(w=>setTimeout(w,1e3)),console.log("Form data submitted:",c),g.success(h?`Sản phẩm "${n.name}" đã được cập nhật`:`Sản phẩm "${n.name}" đã được tạo`),l("/admin/products")}catch(c){console.error("Error submitting form:",c),g.error("Có lỗi xảy ra khi lưu sản phẩm")}finally{x(!1)}},$=({fileList:n})=>{v(n)},H=async n=>{!n.url&&!n.preview&&(n.preview=await K(n.originFileObj)),A(n.url||n.preview),T(!0)},K=n=>new Promise((c,w)=>{const j=new FileReader;j.readAsDataURL(n),j.onload=()=>c(j.result),j.onerror=q=>w(q)}),U=e.jsxs("div",{children:[e.jsx(C,{}),e.jsx("div",{style:{marginTop:8},children:"Tải lên"})]});return e.jsxs("div",{children:[e.jsxs(r,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{justify:"space-between",align:"middle",children:[e.jsx(t,{children:e.jsxs(k,{direction:"vertical",size:"small",children:[e.jsx(_,{items:[{title:e.jsx("a",{onClick:()=>l("/admin/products"),children:"Sản phẩm"})},{title:h?"Chỉnh sửa sản phẩm":"Thêm sản phẩm mới"}]}),e.jsx(se,{level:2,children:h?"Chỉnh sửa sản phẩm":"Thêm sản phẩm mới"}),e.jsx(N,{type:"secondary",children:h?"Cập nhật thông tin sản phẩm":"Nhập thông tin chi tiết cho sản phẩm mới"})]})}),e.jsx(t,{children:e.jsxs(k,{children:[e.jsx(I,{icon:e.jsx(Q,{}),onClick:()=>l("/admin/products"),children:"Quay lại"}),e.jsx(I,{type:"primary",icon:e.jsx(W,{}),loading:L,onClick:()=>u.submit(),children:h?"Cập nhật":"Lưu sản phẩm"})]})})]})}),e.jsx(s,{form:u,layout:"vertical",onFinish:R,initialValues:{status:"active",featured:!1,tax:10,warranty:12},children:e.jsxs(D,{defaultActiveKey:"basic",children:[e.jsx(S,{tab:"Thông tin cơ bản",children:e.jsxs(o,{gutter:24,children:[e.jsxs(t,{span:16,children:[e.jsx(r,{title:"Thông tin sản phẩm",bordered:!1,children:e.jsxs(o,{gutter:16,children:[e.jsx(t,{span:24,children:e.jsx(s.Item,{name:"name",label:"Tên sản phẩm",rules:[{required:!0,message:"Vui lòng nhập tên sản phẩm"}],children:e.jsx(d,{placeholder:"Nhập tên sản phẩm"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"sku",label:"Mã SKU",rules:[{required:!0,message:"Vui lòng nhập mã SKU"}],children:e.jsx(d,{placeholder:"Nhập mã SKU"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"barcode",label:"Mã vạch",children:e.jsx(d,{placeholder:"Nhập mã vạch"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"category",label:"Danh mục",rules:[{required:!0,message:"Vui lòng chọn danh mục"}],children:e.jsx(m,{placeholder:"Chọn danh mục",showSearch:!0,allowClear:!0,dropdownRender:n=>e.jsxs(e.Fragment,{children:[n,e.jsx(Y,{style:{margin:"8px 0"}}),e.jsx(I,{type:"text",icon:e.jsx(C,{}),block:!0,onClick:()=>g.info("Chức năng thêm danh mục đang được phát triển"),children:"Thêm danh mục mới"})]}),children:V.map(n=>e.jsx(i,{value:n,children:n},n))})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"brand",label:"Thương hiệu",children:e.jsx(m,{placeholder:"Chọn thương hiệu",showSearch:!0,allowClear:!0,children:E.map(n=>e.jsx(i,{value:n,children:n},n))})})}),e.jsx(t,{span:24,children:e.jsx(s.Item,{name:"description",label:"Mô tả",children:e.jsx(b,{rows:4,placeholder:"Nhập mô tả sản phẩm"})})})]})}),e.jsx(r,{title:"Thông tin giá",bordered:!1,style:{marginTop:16},children:e.jsxs(o,{gutter:16,children:[e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"price",label:"Giá bán",rules:[{required:!0,message:"Vui lòng nhập giá bán"}],children:e.jsx(p,{style:{width:"100%"},formatter:n=>`${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:n=>n.replace(/\$\s?|(,*)/g,""),placeholder:"Nhập giá bán",addonAfter:"VNĐ"})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"cost",label:"Giá nhập",children:e.jsx(p,{style:{width:"100%"},formatter:n=>`${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:n=>n.replace(/\$\s?|(,*)/g,""),placeholder:"Nhập giá nhập",addonAfter:"VNĐ"})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"tax",label:"Thuế (%)",children:e.jsx(p,{style:{width:"100%"},min:0,max:100,placeholder:"Nhập % thuế",addonAfter:"%"})})})]})}),e.jsx(r,{title:"Thông tin kho hàng",bordered:!1,style:{marginTop:16},children:e.jsxs(o,{gutter:16,children:[e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"stock",label:"Số lượng tồn kho",rules:[{required:!0,message:"Vui lòng nhập số lượng tồn kho"}],children:e.jsx(p,{style:{width:"100%"},min:0,placeholder:"Nhập số lượng"})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"supplier",label:"Nhà cung cấp",children:e.jsx(m,{placeholder:"Chọn nhà cung cấp",showSearch:!0,allowClear:!0,children:G.map(n=>e.jsx(i,{value:n,children:n},n))})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"warranty",label:"Bảo hành (tháng)",children:e.jsx(p,{style:{width:"100%"},min:0,placeholder:"Số tháng bảo hành"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"status",label:"Trạng thái",children:e.jsxs(m,{placeholder:"Chọn trạng thái",children:[e.jsx(i,{value:"active",children:"Còn hàng"}),e.jsx(i,{value:"out_of_stock",children:"Hết hàng"}),e.jsx(i,{value:"low_stock",children:"Sắp hết"}),e.jsx(i,{value:"discontinued",children:"Ngừng kinh doanh"})]})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"featured",label:"Sản phẩm nổi bật",valuePropName:"checked",children:e.jsx(Z,{})})})]})})]}),e.jsxs(t,{span:8,children:[e.jsxs(r,{title:"Hình ảnh sản phẩm",bordered:!1,children:[e.jsx(s.Item,{name:"images",label:"Hình ảnh",children:e.jsx(ee,{listType:"picture-card",fileList:y,onPreview:H,onChange:$,beforeUpload:()=>!1,multiple:!0,children:y.length>=5?null:U})}),e.jsx(N,{type:"secondary",children:"Tải lên tối đa 5 hình ảnh. Kích thước tối đa: 2MB mỗi ảnh."})]}),e.jsx(r,{title:"Ghi chú",bordered:!1,style:{marginTop:16},children:e.jsx(s.Item,{name:"notes",label:"Ghi chú nội bộ",children:e.jsx(b,{rows:4,placeholder:"Nhập ghi chú nội bộ về sản phẩm"})})})]})]})},"basic"),e.jsx(S,{tab:"Thông số kỹ thuật",children:e.jsx(r,{bordered:!1,children:e.jsx(s.Item,{name:"specifications",label:"Thông số kỹ thuật (JSON)",extra:"Nhập thông số kỹ thuật dưới dạng JSON",children:e.jsx(b,{rows:15,placeholder:'{\\n  "cpu": "Intel Core i5",\\n  "ram": "8GB DDR4",\\n  "storage": "512GB SSD"\\n}'})})})},"specifications"),e.jsx(S,{tab:"SEO & Meta",children:e.jsxs(r,{bordered:!1,children:[e.jsx(s.Item,{name:["meta","title"],label:"Meta Title",children:e.jsx(d,{placeholder:"Nhập tiêu đề SEO"})}),e.jsx(s.Item,{name:["meta","description"],label:"Meta Description",children:e.jsx(b,{rows:3,placeholder:"Nhập mô tả SEO"})}),e.jsx(s.Item,{name:["meta","keywords"],label:"Meta Keywords",children:e.jsx(d,{placeholder:"Nhập từ khóa SEO, cách nhau bởi dấu phẩy"})})]})},"seo")]})})]}),e.jsx(ne,{open:B,title:"Xem trước hình ảnh",footer:null,onCancel:()=>T(!1),children:e.jsx("img",{alt:"Xem trước",style:{width:"100%"},src:P})})]})};export{he as default};
