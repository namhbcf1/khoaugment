import{r as t,K as i,M as e,Q as n}from"./vendor-antv-g-lite-BsxRpwbw.js";import{d as r,a as s,b as a,h as o,_ as u,c as h}from"./polyfills-BjGv5uaK.js";import{h as f,q as c,d as l}from"./vendor-antv-util-BIOdtugi.js";
/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.25
 * @date 5/23/2025, 7:01:32 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var m=function(){function t(i,e,n,r){var s;return a(this,t),(s=h(this,t,[i])).currentTime=n,s.timelineTime=r,s.target=e,s.type="finish",s.bubbles=!1,s.currentTarget=e,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=n,s.timelineTime=r,s}return u(t,e),s(t)}(),d=0,p=function(){return s(function t(i,e){var n;a(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=i,i.animation=this,this.timeline=e,this.id="".concat(d++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(n=this.effect)||void 0===n?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()},[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(i,e){t.resolveReadyPromise=function(){i(t)},t.rejectReadyPromise=function(){e(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(i,e){t.resolveFinishedPromise=function(){i(t)},t.rejectFinishedPromise=function(){e(new Error)}}),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){if(t=Number(t),!isNaN(t)){var i;if(this.timeline.restart(),!this._paused&&null!==this._startTime)this._startTime=Number(null===(i=this.timeline)||void 0===i?void 0:i.currentTime)-t/this.playbackRate;this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var i=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==i&&(this.currentTime=i),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var t;if(null!==(t=this.effect.target)&&void 0!==t&&t.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var i=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==i&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===i?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==i&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===i&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var i=new m(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(i)})}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),i=t.indexOf(this);-1!==i&&t.splice(i,1)}},{key:"tick",value:function(t,i){this._idle||this._paused||(null===this._startTime?i&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),i&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}}},{key:"persist",value:function(){throw new Error(i)}},{key:"addEventListener",value:function(t,e,n){throw new Error(i)}},{key:"removeEventListener",value:function(t,e,n){throw new Error(i)}},{key:"dispatchEvent",value:function(t){throw new Error(i)}},{key:"commitStyles",value:function(){throw new Error(i)}},{key:"ensureAlive",value:function(){var t,i;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(-1)):this._inEffect=!(null===(i=this.effect)||void 0===i||!i.update(this.currentTime));this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,i){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!i&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var i=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var e=new m(null,this,this.currentTime,t);setTimeout(function(){i.onfinish&&i.onfinish(e)})}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var n=new m(null,this,this.currentTime,t);this.onframe(n)}this._finishedFlag=!1}}}])}(),v=.1,y="function"==typeof Float32Array,g=function(t,i){return 1-3*i+3*t},k=function(t,i){return 3*i-6*t},T=function(t){return 3*t},b=function(t,i,e){return((g(i,e)*t+k(i,e))*t+T(i))*t},_=function(t,i,e){return 3*g(i,e)*t*t+2*k(i,e)*t+T(i)},P=function(t,i,e,n){if(!(t>=0&&t<=1&&e>=0&&e<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===i&&e===n)return function(t){return t};for(var r=y?new Float32Array(11):new Array(11),s=0;s<11;++s)r[s]=b(s*v,t,e);var a=function(i){for(var n=0,s=1;10!==s&&r[s]<=i;++s)n+=v;--s;var a=n+(i-r[s])/(r[s+1]-r[s])*v,o=_(a,t,e);return o>=.001?function(t,i,e,n){for(var r=0;r<4;++r){var s=_(i,e,n);if(0===s)return i;i-=(b(i,e,n)-t)/s}return i}(i,a,t,e):0===o?a:function(t,i,e,n,r){var s,a,o=0;do{(s=b(a=i+(e-i)/2,n,r)-t)>0?e=a:i=a}while(Math.abs(s)>1e-7&&++o<10);return a}(i,n,n+v,t,e)};return function(t){return 0===t||1===t?t:b(a(t),i,n)}},w=function(t){return Math.pow(t,2)},A=function(t){return Math.pow(t,3)},F=function(t){return Math.pow(t,4)},E=function(t){return Math.pow(t,5)},N=function(t){return Math.pow(t,6)},M=function(t){return 1-Math.cos(t*Math.PI/2)},R=function(t){return 1-Math.sqrt(1-t*t)},x=function(t){return t*t*(3*t-2)},O=function(t){for(var i,e=4;t<((i=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*i-2)/22-t,2)},q=function(t){var i=o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),e=i[0],n=void 0===e?1:e,r=i[1],s=void 0===r?.5:r,a=f(Number(n),1,10),u=f(Number(s),.1,2);return 0===t||1===t?t:-a*Math.pow(2,10*(t-1))*Math.sin((t-1-u/(2*Math.PI)*Math.asin(1/a))*(2*Math.PI)/u)},D=function(t){var i=arguments.length>2?arguments[2]:void 0,e=o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=e[0],r=void 0===n?1:n,s=e[1],a=void 0===s?100:s,u=e[2],h=void 0===u?10:u,c=e[3],l=void 0===c?0:c;r=f(r,.1,1e3),a=f(a,.1,1e3),h=f(h,.1,1e3),l=f(l,.1,1e3);var m=Math.sqrt(a/r),d=h/(2*Math.sqrt(a*r)),p=d<1?m*Math.sqrt(1-d*d):0,v=d<1?(d*m-l)/p:-l+m,y=i?i*t/1e3:t;return y=d<1?Math.exp(-y*d*m)*(1*Math.cos(p*y)+v*Math.sin(p*y)):(1+v*y)*Math.exp(-y*m),0===t||1===t?t:1-y},S=function(t){var i=o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),e=i[0],n=void 0===e?10:e;return("start"===i[1]?Math.ceil:Math.floor)(f(t,0,1)*n)/n},C=function(t){var i=o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),e=i[0],n=i[1],r=i[2],s=i[3];return P(e,n,r,s)(t)},I=P(.42,0,1,1),K=function(t){return function(i){return 1-t(1-i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2?arguments[2]:void 0)}},j=function(t){return function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return i<.5?t(2*i,e,n)/2:1-t(-2*i+2,e,n)/2}},W=function(t){return function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return i<.5?(1-t(1-2*i,e,n))/2:(t(2*i-1,e,n)+1)/2}},z={steps:S,"step-start":function(t){return S(t,[1,"start"])},"step-end":function(t){return S(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":C,ease:function(t){return C(t,[.25,.1,.25,1])},in:I,out:K(I),"in-out":j(I),"out-in":W(I),"in-quad":w,"out-quad":K(w),"in-out-quad":j(w),"out-in-quad":W(w),"in-cubic":A,"out-cubic":K(A),"in-out-cubic":j(A),"out-in-cubic":W(A),"in-quart":F,"out-quart":K(F),"in-out-quart":j(F),"out-in-quart":W(F),"in-quint":E,"out-quint":K(E),"in-out-quint":j(E),"out-in-quint":W(E),"in-expo":N,"out-expo":K(N),"in-out-expo":j(N),"out-in-expo":W(N),"in-sine":M,"out-sine":K(M),"in-out-sine":j(M),"out-in-sine":W(M),"in-circ":R,"out-circ":K(R),"in-out-circ":j(R),"out-in-circ":W(R),"in-back":x,"out-back":K(x),"in-out-back":j(x),"out-in-back":W(x),"in-bounce":O,"out-bounce":K(O),"in-out-bounce":j(O),"out-in-bounce":W(O),"in-elastic":q,"out-elastic":K(q),"in-out-elastic":j(q),"out-in-elastic":W(q),spring:D,"spring-in":D,"spring-out":K(D),"spring-in-out":j(D),"spring-out-in":W(D)},L=function(t){return t};function V(t,i){return function(e){if(e>=1)return 1;var n=1/t;return(e+=i*n)-e%n}}var G="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Q=new RegExp("cubic-bezier\\(".concat(G,",").concat(G,",").concat(G,",").concat(G,"\\)")),U=/steps\(\s*(\d+)\s*\)/,Z=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function B(t){var i=Q.exec(t);if(i)return P.apply(void 0,r(i.slice(1).map(Number)));var e=U.exec(t);if(e)return V(Number(e[1]),0);var n=Z.exec(t);return n?V(Number(n[1]),{start:1,middle:.5,end:0}[n[2]]):z[function(t){return(i=t,"-"===(i=i.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})).charAt(0)?i.substring(1):i).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim();var i}(t)]||z.linear}function H(t){return Math.abs(function(t){var i;if(0===t.duration||0===t.iterations)return 0;return("auto"===t.duration?0:Number(t.duration))*(null!==(i=t.iterations)&&void 0!==i?i:1)}(t)/(t.playbackRate||1))}function J(t,i,e){var n=function(t,i,e){if(null===i)return 0;var n=e.endTime;return i<Math.min(e.delay,n)?1:i>=Math.min(e.delay+t+e.endDelay,n)?2:3}(t,i,e),r=function(t,i,e,n,r){switch(n){case 1:return"backwards"===i||"both"===i?0:null;case 3:return e-r;case 2:return"forwards"===i||"both"===i?t:null;case 0:return null}}(t,e.fill,i,n,e.delay);if(null===r)return null;var s="auto"===e.duration?0:e.duration,a=function(t,i,e,n,r){var s=r;return 0===t?1!==i&&(s+=e):s+=n/t,s}(s,n,e.iterations,r,e.iterationStart),o=function(t,i,e,n,r,s){var a=t===1/0?i%1:t%1;return 0!==a||2!==e||0===n||0===r&&0!==s||(a=1),a}(a,e.iterationStart,n,e.iterations,r,s),u=function(t,i,e,n){return 2===t&&i===1/0?1/0:1===e?Math.floor(n)-1:Math.floor(n)}(n,e.iterations,o,a),h=function(t,i,e){var n=t;if("normal"!==t&&"reverse"!==t){var r=i;"alternate-reverse"===t&&(r+=1),n="normal",r!==1/0&&r%2!=0&&(n="reverse")}return"normal"===n?e:1-e}(e.direction,u,o);return e.currentIteration=u,e.progress=h,e.easingFunction(h)}function X(t,i,e){var n=function(t,i){for(var e={},n=0;n<t.length;n++)for(var r in t[n])if(Y(r)){var s={offset:t[n].offset,computedOffset:t[n].computedOffset,easing:t[n].easing,easingFunction:B(t[n].easing)||i.easingFunction,value:t[n][r]};e[r]=e[r]||[],e[r].push(s)}return e}(t,i),r=function(t,i){var e=[];for(var n in t)for(var r=t[n],s=0;s<r.length-1;s++){var a=s,o=s+1,u=r[a].computedOffset,h=r[o].computedOffset,f=u,c=h;0===s&&(f=-1/0,0===h&&(o=a)),s===r.length-2&&(c=1/0,1===u&&(a=o)),e.push({applyFrom:f,applyTo:c,startOffset:r[a].computedOffset,endOffset:r[o].computedOffset,easingFunction:r[a].easingFunction,property:n,interpolation:tt(n,r[a].value,r[o].value,i)})}return e.sort(function(t,i){return t.startOffset-i.startOffset}),e}(n,e);return function(t,i){if(null!==i)r.filter(function(t){return i>=t.applyFrom&&i<t.applyTo}).forEach(function(e){var n=i-e.startOffset,r=e.endOffset-e.startOffset,s=0===r?0:n/r;t.setAttribute(e.property,e.interpolation(s),!1,!1)});else for(var e in n)Y(e)&&t.setAttribute(e,null)}}function Y(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var $=function(t,i,e){return function(n){var r=it(t,i,n);return l(r)?r:e(r)}};function tt(i,e,s,a){var o=n[i];if(o&&o.syntax&&o.int){var u=t.styleValueRegistry.getPropertySyntax(o.syntax);if(u){var h=u.parser,f=h?h(e,a):e,c=h?h(s,a):s,l=u.mixer(f,c,a);if(l){var m=$.apply(void 0,r(l));return function(t){return 0===t?e:1===t?s:m(t)}}}}return $(!1,!0,function(t){return t?s:e})}function it(t,i,e){if("number"==typeof t&&"number"==typeof i)return t*(1-e)+i*e;if("boolean"==typeof t&&"boolean"==typeof i||"string"==typeof t&&"string"==typeof i)return e<.5?t:i;if(Array.isArray(t)&&Array.isArray(i)){for(var n=t.length,r=i.length,s=Math.max(n,r),a=[],o=0;o<s;o++)a.push(it(t[o<n?o:n-1],i[o<r?o:r-1],e));return a}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(i))}var et=function(){return s(function t(){a(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=L,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null},[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=B(t),this._easing=t}}])}();function nt(t,i){if(null===t)return[];Array.isArray(t)||(t=function(t){var i=[];for(var e in t)if(!(e in["easing","offset","composite"])){var n=t[e];Array.isArray(n)||(n=[n]);for(var r=n.length,s=0;s<r;s++){if(!i[s]){var a={};"offset"in t&&(a.offset=Number(t.offset)),"easing"in t&&(a.easing=t.easing),"composite"in t&&(a.composite=t.composite),i[s]=a}void 0!==n[s]&&null!==n[s]&&(i[s][e]=n[s])}}return i.sort(function(t,i){return(t.computedOffset||0)-(i.computedOffset||0)}),i}(t));for(var e=t.map(function(t){var e={};for(var n in null!=i&&i.composite&&(e.composite="auto"),t){var r=t[n];if("offset"===n){if(null!==r){if(r=Number(r),!isFinite(r))throw new Error("Keyframe offsets must be numbers.");if(r<0||r>1)throw new Error("Keyframe offsets must be between 0 and 1.");e.computedOffset=r}}else if("composite"===n&&-1===["replace","add","accumulate","auto"].indexOf(r))throw new Error("".concat(r," compositing is not supported"));e[n]=r}return void 0===e.offset&&(e.offset=null),void 0===e.easing&&(e.easing=(null==i?void 0:i.easing)||"linear"),void 0===e.composite&&(e.composite="auto"),e}),n=!0,r=-1/0,s=0;s<e.length;s++){var a=e[s].offset;if(c(a))n=!1;else{if(a<r)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");r=a}}return e=e.filter(function(t){return Number(t.offset)>=0&&Number(t.offset)<=1}),n||function(){var t,i,n=e.length;e[n-1].computedOffset=Number(null!==(t=e[n-1].offset)&&void 0!==t?t:1),n>1&&(e[0].computedOffset=Number(null!==(i=e[0].offset)&&void 0!==i?i:0));for(var r=0,s=Number(e[0].computedOffset),a=1;a<n;a++){var o=e[a].computedOffset;if(!c(o)&&!c(s)){for(var u=1;u<a-r;u++)e[r+u].computedOffset=s+(Number(o)-s)*u/(a-r);r=a,s=Number(o)}}}(),e}var rt="backwards|forwards|both|none".split("|"),st="reverse|alternate|alternate-reverse".split("|");function at(t,i){return function(t){var i=new et;return"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach(function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"==typeof i[e]||"duration"===e)&&("number"!=typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===rt.indexOf(t[e]))return;if("direction"===e&&-1===st.indexOf(t[e]))return;i[e]=t[e]}}):i.duration=t,i}(t=function(t){"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t});return t}(null!=t?t:{duration:"auto"}))}var ot=function(){return s(function i(e,n,r){var s=this;a(this,i),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=at(r),this.timing.effect=this,this.timing.activeDuration=H(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=nt(n,this.timing),this.interpolations=X(this.normalizedKeyframes,this.timing,this.target);var o=t.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(t,i){return"duration"===i?"auto"===t.duration?0:t.duration:"fill"===i?"auto"===t.fill?"none":t.fill:"localTime"===i?s.animation&&s.animation.currentTime||null:"currentIteration"===i?s.animation&&"running"===s.animation.playState?t.currentIteration||0:null:"progress"===i?s.animation&&"running"===s.animation.playState?t.progress||0:null:t[i]},set:function(){return!0}}):this.timing},[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return null!==t&&(this.timeFraction=J(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=nt(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var i=this;Object.keys(t||{}).forEach(function(e){i.timing[e]=t[e]})}}])}();function ut(t,i){return Number(t.id)-Number(i.id)}var ht=function(){return s(function t(i){var e=this;a(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){e.currentTime=t,e.discardAnimations(),0===e.animations.length?e.timelineTicking=!1:e.requestAnimationFrame(e.webAnimationsNextTick)},this.processRafCallbacks=function(t){var i=e.rafCallbacks;e.rafCallbacks=[],t<Number(e.currentTime)&&(t=Number(e.currentTime)),e.animations.sort(ut),e.animations=e.tick(t,!0,e.animations)[0],i.forEach(function(i){i[1](t)}),e.applyPendingEffects()},this.document=i},[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,i,e){var n=new ot(t,i,e),r=new p(n,this);return this.animations.push(r),this.restartWebAnimationsNextTick(),r.updatePromises(),r.play(),r.updatePromises(),r}},{key:"applyDirtiedAnimation",value:function(t){var i=this;if(!this.inTick){t.markTarget();var e=t.targetAnimations();e.sort(ut),this.tick(Number(this.currentTime),!1,e.slice())[1].forEach(function(t){var e=i.animations.indexOf(t);-1!==e&&i.animations.splice(e,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(t){null==t||t.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return"finished"!==t.playState&&"idle"!==t.playState})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var i=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([i,t]),i}},{key:"requestAnimationFrame",value:function(t){var i=this;return this.rAF(function(e){i.updateAnimationsPromises(),t(e),i.updateAnimationsPromises()})}},{key:"tick",value:function(t,i,e){var n,r,s=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var a=[],o=[],u=[],h=[];return e.forEach(function(e){e.tick(t,i),e._inEffect?(o.push(e.effect),e.markTarget()):(a.push(e.effect),e.unmarkTarget()),e._needsTick&&(s.ticking=!0);var n=e._inEffect||e._needsTick;e._inTimeline=n,n?u.push(e):h.push(e)}),(n=this.pendingEffects).push.apply(n,a),(r=this.pendingEffects).push.apply(r,o),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,h]}}])}();t.EasingFunction=B,t.AnimationTimeline=ht;
