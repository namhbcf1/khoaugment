import{h as e,e as n,k as t,j as o,g as r,f as c,d as a}from"./polyfills-B4r5O4me.js";import{r as s,R as i,e as l}from"./react-vendor-D_ybsntB.js";import{c as u}from"./vendor-classnames-Bjqz8XQ3.js";import{a as f}from"./vendor-rc-motion-CgrNkiVN.js";import{p as v,K as m,e as d}from"./vendor-rc-util-Cfhh6bGy.js";var p=s.forwardRef(function(r,c){var a=r.prefixCls,i=r.style,l=r.className,f=r.duration,d=void 0===f?4.5:f,p=r.showProgress,y=r.pauseOnHover,h=void 0===y||y,k=r.eventKey,g=r.content,N=r.closable,E=r.closeIcon,C=void 0===E?"x":E,x=r.props,R=r.onClick,b=r.onNoticeClose,w=r.times,j=r.hovering,A=s.useState(!1),S=e(A,2),M=S[0],I=S[1],D=s.useState(0),H=e(D,2),L=H[0],O=H[1],W=s.useState(0),F=e(W,2),K=F[0],P=F[1],T=j||M,q=d>0&&p,G=function(){b(k)};s.useEffect(function(){if(!T&&d>0){var e=Date.now()-K,n=setTimeout(function(){G()},1e3*d-K);return function(){h&&clearTimeout(n),P(Date.now()-e)}}},[d,T,w]),s.useEffect(function(){if(!T&&q&&(h||0===K)){var e,n=performance.now();return function t(){cancelAnimationFrame(e),e=requestAnimationFrame(function(e){var o=e+K-n,r=Math.min(o/(1e3*d),1);O(100*r),r<1&&t()})}(),function(){h&&cancelAnimationFrame(e)}}},[d,K,T,q,w]);var X=s.useMemo(function(){return"object"===n(N)&&null!==N?N:N?{closeIcon:C}:{}},[N,C]),z=v(X,!0),B=100-(!L||L<0?0:L>100?100:L),J="".concat(a,"-notice");return s.createElement("div",t({},x,{ref:c,className:u(J,l,o({},"".concat(J,"-closable"),N)),style:i,onMouseEnter:function(e){var n;I(!0),null==x||null===(n=x.onMouseEnter)||void 0===n||n.call(x,e)},onMouseLeave:function(e){var n;I(!1),null==x||null===(n=x.onMouseLeave)||void 0===n||n.call(x,e)},onClick:R}),s.createElement("div",{className:"".concat(J,"-content")},g),N&&s.createElement("a",t({tabIndex:0,className:"".concat(J,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==m.ENTER||G()},"aria-label":"Close"},z,{onClick:function(e){e.preventDefault(),e.stopPropagation(),G()}}),X.closeIcon),q&&s.createElement("progress",{className:"".concat(J,"-progress"),max:"100",value:B},B+"%"))}),y=i.createContext({}),h=function(e){var n=e.children,t=e.classNames;return i.createElement(y.Provider,{value:{classNames:t}},n)},k=["className","style","classNames","styles"],g=function(l){var v,m,d,h,g,N=l.configList,E=l.placement,C=l.prefixCls,x=l.className,R=l.style,b=l.motion,w=l.onAllNoticeRemoved,j=l.onNoticeClose,A=l.stack,S=s.useContext(y).classNames,M=s.useRef({}),I=s.useState(null),D=e(I,2),H=D[0],L=D[1],O=s.useState([]),W=e(O,2),F=W[0],K=W[1],P=N.map(function(e){return{config:e,key:String(e.key)}}),T=(g={offset:8,threshold:3,gap:16},(v=A)&&"object"===n(v)&&(g.offset=null!==(m=v.offset)&&void 0!==m?m:8,g.threshold=null!==(d=v.threshold)&&void 0!==d?d:3,g.gap=null!==(h=v.gap)&&void 0!==h?h:16),[!!v,g]),q=e(T,2),G=q[0],X=q[1],z=X.offset,B=X.threshold,J=X.gap,Q=G&&(F.length>0||P.length<=B),U="function"==typeof b?b(E):b;return s.useEffect(function(){G&&F.length>1&&K(function(e){return e.filter(function(e){return P.some(function(n){var t=n.key;return e===t})})})},[F,P,G]),s.useEffect(function(){var e,n;G&&M.current[null===(e=P[P.length-1])||void 0===e?void 0:e.key]&&L(M.current[null===(n=P[P.length-1])||void 0===n?void 0:n.key])},[P,G]),i.createElement(f,t({key:E,className:u(C,"".concat(C,"-").concat(E),null==S?void 0:S.list,x,o(o({},"".concat(C,"-stack"),!!G),"".concat(C,"-stack-expanded"),Q)),style:R,keys:P,motionAppear:!0},U,{onAllRemoved:function(){w(E)}}),function(e,n){var o=e.config,s=e.className,l=e.style,f=e.index,v=o,m=v.key,d=v.times,y=String(m),h=o,g=h.className,N=h.style,x=h.classNames,R=h.styles,b=r(h,k),w=P.findIndex(function(e){return e.key===y}),A={};if(G){var I=P.length-1-(w>-1?w:f-1),D="top"===E||"bottom"===E?"-50%":"0";if(I>0){var L,O,W;A.height=Q?null===(L=M.current[y])||void 0===L?void 0:L.offsetHeight:null==H?void 0:H.offsetHeight;for(var T=0,q=0;q<I;q++){var X;T+=(null===(X=M.current[P[P.length-1-q].key])||void 0===X?void 0:X.offsetHeight)+J}var B=(Q?T:I*z)*(E.startsWith("top")?1:-1),U=!Q&&null!=H&&H.offsetWidth&&null!==(O=M.current[y])&&void 0!==O&&O.offsetWidth?((null==H?void 0:H.offsetWidth)-2*z*(I<3?I:3))/(null===(W=M.current[y])||void 0===W?void 0:W.offsetWidth):1;A.transform="translate3d(".concat(D,", ").concat(B,"px, 0) scaleX(").concat(U,")")}else A.transform="translate3d(".concat(D,", 0, 0)")}return i.createElement("div",{ref:n,className:u("".concat(C,"-notice-wrapper"),s,null==x?void 0:x.wrapper),style:c(c(c({},l),A),null==R?void 0:R.wrapper),onMouseEnter:function(){return K(function(e){return e.includes(y)?e:[].concat(a(e),[y])})},onMouseLeave:function(){return K(function(e){return e.filter(function(e){return e!==y})})}},i.createElement(p,t({},b,{ref:function(e){w>-1?M.current[y]=e:delete M.current[y]},prefixCls:C,classNames:x,styles:R,className:u(g,null==S?void 0:S.notice),style:N,times:d,key:m,eventKey:m,onNoticeClose:j,hovering:G&&F.length>0})))})},N=s.forwardRef(function(n,t){var o=n.prefixCls,r=void 0===o?"rc-notification":o,i=n.container,u=n.motion,f=n.maxCount,v=n.className,m=n.style,d=n.onAllRemoved,p=n.stack,y=n.renderNotifications,h=s.useState([]),k=e(h,2),N=k[0],E=k[1],C=function(e){var n,t=N.find(function(n){return n.key===e});null==t||null===(n=t.onClose)||void 0===n||n.call(t),E(function(n){return n.filter(function(n){return n.key!==e})})};s.useImperativeHandle(t,function(){return{open:function(e){E(function(n){var t,o=a(n),r=o.findIndex(function(n){return n.key===e.key}),s=c({},e);r>=0?(s.times=((null===(t=n[r])||void 0===t?void 0:t.times)||0)+1,o[r]=s):(s.times=0,o.push(s));return f>0&&o.length>f&&(o=o.slice(-f)),o})},close:function(e){C(e)},destroy:function(){E([])}}});var x=s.useState({}),R=e(x,2),b=R[0],w=R[1];s.useEffect(function(){var e={};N.forEach(function(n){var t=n.placement,o=void 0===t?"topRight":t;o&&(e[o]=e[o]||[],e[o].push(n))}),Object.keys(b).forEach(function(n){e[n]=e[n]||[]}),w(e)},[N]);var j=function(e){w(function(n){var t=c({},n);return(t[e]||[]).length||delete t[e],t})},A=s.useRef(!1);if(s.useEffect(function(){Object.keys(b).length>0?A.current=!0:A.current&&(null==d||d(),A.current=!1)},[b]),!i)return null;var S=Object.keys(b);return l.createPortal(s.createElement(s.Fragment,null,S.map(function(e){var n=b[e],t=s.createElement(g,{key:e,configList:n,placement:e,prefixCls:r,className:null==v?void 0:v(e),style:null==m?void 0:m(e),motion:u,onNoticeClose:C,onAllNoticeRemoved:j,stack:p});return y?y(t,{prefixCls:r,key:e}):t})),i)}),E=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],C=function(){return document.body},x=0;function R(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.getContainer,o=void 0===t?C:t,c=n.motion,i=n.prefixCls,l=n.maxCount,u=n.className,f=n.style,v=n.onAllRemoved,m=n.stack,p=n.renderNotifications,y=r(n,E),h=s.useState(),k=e(h,2),g=k[0],R=k[1],b=s.useRef(),w=s.createElement(N,{container:g,ref:b,prefixCls:i,motion:c,maxCount:l,className:u,style:f,onAllRemoved:v,stack:m,renderNotifications:p}),j=s.useState([]),A=e(j,2),S=A[0],M=A[1],I=d(function(e){var n=function(){for(var e={},n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return t.forEach(function(n){n&&Object.keys(n).forEach(function(t){var o=n[t];void 0!==o&&(e[t]=o)})}),e}(y,e);null!==n.key&&void 0!==n.key||(n.key="rc-notification-".concat(x),x+=1),M(function(e){return[].concat(a(e),[{type:"open",config:n}])})}),D=s.useMemo(function(){return{open:I,close:function(e){M(function(n){return[].concat(a(n),[{type:"close",key:e}])})},destroy:function(){M(function(e){return[].concat(a(e),[{type:"destroy"}])})}}},[]);return s.useEffect(function(){R(o())}),s.useEffect(function(){var e,n;b.current&&S.length&&(S.forEach(function(e){switch(e.type){case"open":b.current.open(e.config);break;case"close":b.current.close(e.key);break;case"destroy":b.current.destroy()}}),M(function(t){return e===t&&n||(e=t,n=t.filter(function(e){return!S.includes(e)})),n}))},[S]),[D,w]}export{p as N,h as a,R as u};
