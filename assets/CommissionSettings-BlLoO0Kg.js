import{j as e}from"./index-CI5lv9mG.js";import{r as o}from"./vendor-DD54NZMZ.js";import{F as i,H as u,O as ue,ad as de,T as pe,B as l,ak as P,f as N,e as h,C as n,q as xe,aq as he,u as U,A as b,ag as M,y as D,ac as je,aB as ge,r as ye,$ as j,as as c,k as fe,a3 as C,aL as be,ab as Ce,M as $,I as T,aP as r,g as ve,l as W,aF as G,ae as O,s as d}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:Se,Text:H}=pe,{TabPane:v}=U,{Option:m}=j,Te=[{id:1,name:"Standard Sales Commission",type:"percentage",value:2,applicableTo:"all",productCategories:[],minSaleAmount:0,active:!0},{id:2,name:"Computer Hardware Bonus",type:"percentage",value:3.5,applicableTo:"category",productCategories:["Laptops","Desktops","Components"],minSaleAmount:5e6,active:!0},{id:3,name:"Accessory Commission",type:"percentage",value:5,applicableTo:"category",productCategories:["Accessories","Peripherals"],minSaleAmount:2e5,active:!0},{id:4,name:"Service Plan Bonus",type:"fixed",value:5e4,applicableTo:"category",productCategories:["Services","Warranties"],minSaleAmount:0,active:!0},{id:5,name:"Monthly Top Seller Bonus",type:"fixed",value:5e5,applicableTo:"special",productCategories:[],minSaleAmount:0,active:!0}],Re=[{id:1,name:"Bronze Tier",monthlyTarget:5e7,bonusType:"percentage",bonusValue:.5,active:!0},{id:2,name:"Silver Tier",monthlyTarget:1e8,bonusType:"percentage",bonusValue:1,active:!0},{id:3,name:"Gold Tier",monthlyTarget:2e8,bonusType:"percentage",bonusValue:2,active:!0},{id:4,name:"Platinum Tier",monthlyTarget:5e8,bonusType:"percentage",bonusValue:3.5,active:!0}],K=[{id:1,name:"Nguyễn Văn A",role:"Sales Manager",baseCommissionRate:3,eligibleForBonus:!0,customRules:["Monthly Top Seller Bonus"],currentTier:"Gold Tier"},{id:2,name:"Trần Thị B",role:"Senior Sales",baseCommissionRate:2.5,eligibleForBonus:!0,customRules:[],currentTier:"Silver Tier"},{id:3,name:"Lê Văn C",role:"Sales",baseCommissionRate:2,eligibleForBonus:!0,customRules:[],currentTier:"Bronze Tier"},{id:4,name:"Phạm Thị D",role:"Cashier",baseCommissionRate:1.5,eligibleForBonus:!0,customRules:[],currentTier:"Bronze Tier"},{id:5,name:"Hoàng Văn E",role:"Technician",baseCommissionRate:1,eligibleForBonus:!0,customRules:["Service Plan Bonus"],currentTier:"Bronze Tier"}],Y=["Laptops","Desktops","Components","Monitors","Accessories","Peripherals","Networking","Storage","Software","Services","Warranties"],Ve=()=>{const[J,Q]=o.useState("1"),[x,R]=o.useState(Te),[p,I]=o.useState(Re),[S,q]=o.useState(K),[X,F]=o.useState(!1),[Z,A]=o.useState(!1),[_,k]=o.useState(!1),[V,ee]=o.useState(null),[B,se]=o.useState(null),[w,te]=o.useState(null),[g]=i.useForm(),[y]=i.useForm(),[f]=i.useForm(),E=(s=null)=>{ee(s),s?g.setFieldsValue({name:s.name,type:s.type,value:s.value,applicableTo:s.applicableTo,productCategories:s.productCategories,minSaleAmount:s.minSaleAmount,active:s.active}):(g.resetFields(),g.setFieldsValue({type:"percentage",applicableTo:"all",minSaleAmount:0,active:!0,productCategories:[]})),F(!0)},ie=()=>{g.validateFields().then(s=>{if(V){const t=x.map(a=>a.id===V.id?{...a,...s}:a);R(t),d.success("Commission rule updated successfully")}else{const t={id:x.length+1,...s};R([...x,t]),d.success("Commission rule added successfully")}F(!1)}).catch(s=>{console.log("Validate Failed:",s)})},z=(s=null)=>{se(s),s?y.setFieldsValue({name:s.name,monthlyTarget:s.monthlyTarget,bonusType:s.bonusType,bonusValue:s.bonusValue,active:s.active}):(y.resetFields(),y.setFieldsValue({bonusType:"percentage",active:!0})),A(!0)},ae=()=>{y.validateFields().then(s=>{if(B){const t=p.map(a=>a.id===B.id?{...a,...s}:a);I(t),d.success("Commission tier updated successfully")}else{const t={id:p.length+1,...s};I([...p,t]),d.success("Commission tier added successfully")}A(!1)}).catch(s=>{console.log("Validate Failed:",s)})},L=(s=null)=>{te(s),s?f.setFieldsValue({name:s.name,role:s.role,baseCommissionRate:s.baseCommissionRate,eligibleForBonus:s.eligibleForBonus,customRules:s.customRules,currentTier:s.currentTier}):(f.resetFields(),f.setFieldsValue({eligibleForBonus:!0,customRules:[]})),k(!0)},ne=()=>{f.validateFields().then(s=>{if(w){const t=S.map(a=>a.id===w.id?{...a,...s}:a);q(t),d.success("Staff commission settings updated successfully")}else{const t={id:S.length+1,...s};q([...S,t]),d.success("Staff commission settings added successfully")}k(!1)}).catch(s=>{console.log("Validate Failed:",s)})},le=s=>{const t=x.filter(a=>a.id!==s);R(t),d.success("Commission rule deleted successfully")},oe=s=>{const t=p.filter(a=>a.id!==s);I(t),d.success("Commission tier deleted successfully")},re=[{title:"Name",dataIndex:"name",key:"name",sorter:(s,t)=>s.name.localeCompare(t.name)},{title:"Type",dataIndex:"type",key:"type",render:s=>s==="percentage"?"Percentage (%)":"Fixed Amount (VND)",filters:[{text:"Percentage",value:"percentage"},{text:"Fixed Amount",value:"fixed"}],onFilter:(s,t)=>t.type===s},{title:"Value",key:"value",render:(s,t)=>t.type==="percentage"?e.jsxs("span",{children:[t.value,"%"]}):e.jsxs("span",{children:[t.value.toLocaleString()," VND"]}),sorter:(s,t)=>s.value-t.value},{title:"Applicable To",key:"applicableTo",render:(s,t)=>t.applicableTo==="all"?"All Products":t.applicableTo==="category"?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Categories: "}),t.productCategories.map(a=>e.jsx(u,{children:a},a))]}):"Special Conditions",filters:[{text:"All Products",value:"all"},{text:"Specific Categories",value:"category"},{text:"Special Conditions",value:"special"}],onFilter:(s,t)=>t.applicableTo===s},{title:"Min. Sale Amount",dataIndex:"minSaleAmount",key:"minSaleAmount",render:s=>`${s.toLocaleString()} VND`,sorter:(s,t)=>s.minSaleAmount-t.minSaleAmount},{title:"Status",dataIndex:"active",key:"active",render:s=>s?e.jsx(u,{color:"green",children:"Active"}):e.jsx(u,{color:"red",children:"Inactive"}),filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(s,t)=>t.active===s},{title:"Actions",key:"actions",render:(s,t)=>e.jsxs(W,{children:[e.jsx(l,{type:"text",icon:e.jsx(P,{}),onClick:()=>E(t)}),e.jsx(G,{title:"Are you sure you want to delete this rule?",onConfirm:()=>le(t.id),okText:"Yes",cancelText:"No",children:e.jsx(l,{type:"text",danger:!0,icon:e.jsx(O,{})})})]})}],ce=[{title:"Tier Name",dataIndex:"name",key:"name",sorter:(s,t)=>s.name.localeCompare(t.name)},{title:"Monthly Sales Target",dataIndex:"monthlyTarget",key:"monthlyTarget",render:s=>`${s.toLocaleString()} VND`,sorter:(s,t)=>s.monthlyTarget-t.monthlyTarget},{title:"Bonus",key:"bonus",render:(s,t)=>t.bonusType==="percentage"?e.jsxs("span",{children:["+",t.bonusValue,"% on all commissions"]}):e.jsxs("span",{children:["+",t.bonusValue.toLocaleString()," VND fixed bonus"]})},{title:"Status",dataIndex:"active",key:"active",render:s=>s?e.jsx(u,{color:"green",children:"Active"}):e.jsx(u,{color:"red",children:"Inactive"}),filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(s,t)=>t.active===s},{title:"Actions",key:"actions",render:(s,t)=>e.jsxs(W,{children:[e.jsx(l,{type:"text",icon:e.jsx(P,{}),onClick:()=>z(t)}),e.jsx(G,{title:"Are you sure you want to delete this tier?",onConfirm:()=>oe(t.id),okText:"Yes",cancelText:"No",children:e.jsx(l,{type:"text",danger:!0,icon:e.jsx(O,{})})})]})}],me=[{title:"Staff Name",dataIndex:"name",key:"name",sorter:(s,t)=>s.name.localeCompare(t.name)},{title:"Role",dataIndex:"role",key:"role",filters:[...new Set(K.map(s=>s.role))].map(s=>({text:s,value:s})),onFilter:(s,t)=>t.role===s},{title:"Base Commission Rate",dataIndex:"baseCommissionRate",key:"baseCommissionRate",render:s=>`${s}%`,sorter:(s,t)=>s.baseCommissionRate-t.baseCommissionRate},{title:"Current Tier",dataIndex:"currentTier",key:"currentTier",filters:p.map(s=>({text:s.name,value:s.name})),onFilter:(s,t)=>t.currentTier===s},{title:"Eligible for Bonus",dataIndex:"eligibleForBonus",key:"eligibleForBonus",render:s=>s?e.jsx(u,{icon:e.jsx(ue,{}),color:"green",children:"Yes"}):e.jsx(u,{icon:e.jsx(de,{}),color:"red",children:"No"}),filters:[{text:"Yes",value:!0},{text:"No",value:!1}],onFilter:(s,t)=>t.eligibleForBonus===s},{title:"Custom Rules",key:"customRules",render:(s,t)=>e.jsx(e.Fragment,{children:t.customRules.length>0?t.customRules.map(a=>e.jsx(u,{children:a},a)):e.jsx(H,{type:"secondary",children:"None"})})},{title:"Actions",key:"actions",render:(s,t)=>e.jsx(l,{type:"primary",icon:e.jsx(P,{}),size:"small",onClick:()=>L(t),children:"Edit"})}];return e.jsx("div",{className:"commission-settings-container",style:{padding:"24px"},children:e.jsxs(N,{children:[e.jsxs(h,{justify:"space-between",align:"middle",style:{marginBottom:16},children:[e.jsxs(n,{children:[e.jsxs(Se,{level:2,children:[e.jsx(xe,{})," Commission Settings"]}),e.jsx(H,{type:"secondary",children:"Configure commission rules, tiers, and individual staff commission settings"})]}),e.jsx(n,{children:e.jsx(l,{type:"primary",icon:e.jsx(he,{}),children:"Save All Settings"})})]}),e.jsxs(U,{activeKey:J,onChange:Q,children:[e.jsxs(v,{tab:e.jsxs("span",{children:[e.jsx(je,{})," Commission Rules"]}),children:[e.jsx(b,{message:"Commission Rules",description:"Define the basic commission rules that apply to different product categories and sales scenarios.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(l,{type:"primary",icon:e.jsx(M,{}),onClick:()=>E(),children:"Add Commission Rule"})}),e.jsx(D,{columns:re,dataSource:x,rowKey:"id",pagination:{pageSize:5}})]},"1"),e.jsxs(v,{tab:e.jsxs("span",{children:[e.jsx(ge,{})," Commission Tiers"]}),children:[e.jsx(b,{message:"Commission Tiers",description:"Create performance-based commission tiers with escalating benefits for sales staff based on their monthly sales targets.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(l,{type:"primary",icon:e.jsx(M,{}),onClick:()=>z(),children:"Add Commission Tier"})}),e.jsx(D,{columns:ce,dataSource:p,rowKey:"id",pagination:{pageSize:5}})]},"2"),e.jsxs(v,{tab:e.jsxs("span",{children:[e.jsx(ye,{})," Staff Commission Settings"]}),children:[e.jsx(b,{message:"Staff Commission Settings",description:"Manage individual commission settings for each staff member, including base rates and eligibility for bonus programs.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(l,{type:"primary",icon:e.jsx(M,{}),onClick:()=>L(),children:"Add Staff Commission"})}),e.jsx(D,{columns:me,dataSource:S,rowKey:"id",pagination:{pageSize:5}})]},"3"),e.jsxs(v,{tab:e.jsxs("span",{children:[e.jsx(be,{})," Commission Schedule"]}),children:[e.jsx(b,{message:"Commission Schedule",description:"Set up the schedule for commission calculations and payouts.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx(N,{title:"Calculation and Payout Settings",children:e.jsxs(i,{layout:"vertical",children:[e.jsxs(h,{gutter:24,children:[e.jsx(n,{span:8,children:e.jsx(i.Item,{label:"Commission Calculation Frequency",name:"calculationFrequency",initialValue:"monthly",children:e.jsxs(j,{children:[e.jsx(m,{value:"daily",children:"Daily"}),e.jsx(m,{value:"weekly",children:"Weekly"}),e.jsx(m,{value:"biweekly",children:"Bi-Weekly"}),e.jsx(m,{value:"monthly",children:"Monthly"})]})})}),e.jsx(n,{span:8,children:e.jsx(i.Item,{label:"Commission Payout Date",name:"payoutDate",initialValue:10,tooltip:"Day of month for commission payout",children:e.jsx(c,{min:1,max:28,style:{width:"100%"}})})}),e.jsx(n,{span:8,children:e.jsx(i.Item,{label:"Commission Processing Method",name:"processMethod",initialValue:"automatic",children:e.jsxs(j,{children:[e.jsx(m,{value:"automatic",children:"Automatic"}),e.jsx(m,{value:"manual",children:"Manual Approval"})]})})})]}),e.jsx(fe,{}),e.jsxs(h,{gutter:24,children:[e.jsxs(n,{span:12,children:[e.jsx(i.Item,{label:"Delay Commission for Returns",name:"delayForReturns",valuePropName:"checked",initialValue:!0,tooltip:"Hold commission for potential returns",children:e.jsx(C,{})}),e.jsx(i.Item,{label:"Return Window (days)",name:"returnWindow",initialValue:30,children:e.jsx(c,{min:0,style:{width:"100%"}})})]}),e.jsxs(n,{span:12,children:[e.jsx(i.Item,{label:"Include Tax in Commission Calculation",name:"includeTax",valuePropName:"checked",initialValue:!1,children:e.jsx(C,{})}),e.jsx(i.Item,{label:"Commission Cap",name:"commissionCap",initialValue:1e7,children:e.jsx(c,{style:{width:"100%"},formatter:s=>`${s}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:s=>s.replace(/\$\s?|(,*)/g,"")})})]})]}),e.jsx(l,{type:"primary",children:"Save Schedule Settings"})]})})]},"4"),e.jsxs(v,{tab:e.jsxs("span",{children:[e.jsx(Ce,{})," Product-Specific Settings"]}),children:[e.jsx(b,{message:"Product-Specific Commission Settings",description:"Configure special commission rates for specific products or product categories.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx(N,{title:"Category Commission Rates",children:e.jsxs(i,{layout:"vertical",children:[Y.map((s,t)=>e.jsx(i.Item,{label:s,name:["categoryCommission",s],initialValue:t%3===0?5:t%3===1?3:2,children:e.jsx(c,{min:0,max:20,formatter:a=>`${a}%`,parser:a=>a.replace("%",""),style:{width:"100%"}})},t)),e.jsx(l,{type:"primary",children:"Save Category Settings"})]})})]},"5")]}),e.jsx($,{title:V?"Edit Commission Rule":"Add Commission Rule",visible:X,onOk:ie,onCancel:()=>F(!1),width:600,children:e.jsxs(i,{form:g,layout:"vertical",children:[e.jsx(i.Item,{name:"name",label:"Rule Name",rules:[{required:!0,message:"Please enter a rule name"}],children:e.jsx(T,{})}),e.jsxs(h,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(i.Item,{name:"type",label:"Commission Type",rules:[{required:!0,message:"Please select commission type"}],children:e.jsxs(r.Group,{children:[e.jsx(r,{value:"percentage",children:"Percentage (%)"}),e.jsx(r,{value:"fixed",children:"Fixed Amount (VND)"})]})})}),e.jsx(n,{span:12,children:e.jsx(i.Item,{name:"value",label:"Value",rules:[{required:!0,message:"Please enter commission value"}],children:e.jsx(c,{style:{width:"100%"},min:0})})})]}),e.jsx(i.Item,{name:"applicableTo",label:"Applicable To",rules:[{required:!0,message:"Please select where this rule applies"}],children:e.jsxs(r.Group,{children:[e.jsx(r,{value:"all",children:"All Products"}),e.jsx(r,{value:"category",children:"Specific Categories"}),e.jsx(r,{value:"special",children:"Special Conditions"})]})}),e.jsx(i.Item,{noStyle:!0,shouldUpdate:(s,t)=>s.applicableTo!==t.applicableTo,children:({getFieldValue:s})=>s("applicableTo")==="category"?e.jsx(i.Item,{name:"productCategories",label:"Product Categories",rules:[{required:!0,message:"Please select at least one category"}],children:e.jsx(j,{mode:"multiple",placeholder:"Select product categories",children:Y.map(t=>e.jsx(m,{value:t,children:t},t))})}):null}),e.jsx(i.Item,{name:"minSaleAmount",label:"Minimum Sale Amount (VND)",tooltip:"Commission applies only to sales above this amount",children:e.jsx(c,{style:{width:"100%"},min:0,step:1e5})}),e.jsx(i.Item,{name:"active",valuePropName:"checked",label:"Status",children:e.jsx(C,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})}),e.jsx($,{title:B?"Edit Commission Tier":"Add Commission Tier",visible:Z,onOk:ae,onCancel:()=>A(!1),width:600,children:e.jsxs(i,{form:y,layout:"vertical",children:[e.jsx(i.Item,{name:"name",label:"Tier Name",rules:[{required:!0,message:"Please enter a tier name"}],children:e.jsx(T,{})}),e.jsx(i.Item,{name:"monthlyTarget",label:"Monthly Sales Target (VND)",rules:[{required:!0,message:"Please enter monthly sales target"}],children:e.jsx(c,{style:{width:"100%"},min:1e6,step:1e6,formatter:s=>`${s}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:s=>s.replace(/\$\s?|(,*)/g,"")})}),e.jsxs(h,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(i.Item,{name:"bonusType",label:"Bonus Type",rules:[{required:!0,message:"Please select bonus type"}],children:e.jsxs(r.Group,{children:[e.jsx(r,{value:"percentage",children:"Percentage (%)"}),e.jsx(r,{value:"fixed",children:"Fixed Amount (VND)"})]})})}),e.jsx(n,{span:12,children:e.jsx(i.Item,{name:"bonusValue",label:"Bonus Value",rules:[{required:!0,message:"Please enter bonus value"}],children:e.jsx(c,{style:{width:"100%"},min:0})})})]}),e.jsx(i.Item,{name:"active",valuePropName:"checked",label:"Status",children:e.jsx(C,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})}),e.jsx($,{title:w?"Edit Staff Commission Settings":"Add Staff Commission Settings",visible:_,onOk:ne,onCancel:()=>k(!1),width:600,children:e.jsxs(i,{form:f,layout:"vertical",children:[e.jsxs(h,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(i.Item,{name:"name",label:"Staff Name",rules:[{required:!0,message:"Please enter staff name"}],children:e.jsx(T,{prefix:e.jsx(ve,{})})})}),e.jsx(n,{span:12,children:e.jsx(i.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please enter staff role"}],children:e.jsx(T,{})})})]}),e.jsx(i.Item,{name:"baseCommissionRate",label:"Base Commission Rate (%)",rules:[{required:!0,message:"Please enter base commission rate"}],children:e.jsx(c,{style:{width:"100%"},min:0,max:20,step:.5})}),e.jsx(i.Item,{name:"currentTier",label:"Current Tier",children:e.jsx(j,{children:p.map(s=>e.jsx(m,{value:s.name,children:s.name},s.id))})}),e.jsx(i.Item,{name:"eligibleForBonus",valuePropName:"checked",label:"Eligible for Bonuses",children:e.jsx(C,{})}),e.jsx(i.Item,{name:"customRules",label:"Custom Rules",children:e.jsx(j,{mode:"multiple",placeholder:"Select custom rules",children:x.map(s=>e.jsx(m,{value:s.name,children:s.name},s.id))})})]})})]})})};export{Ve as default};
