import{_ as e,l as t,b as r,a as n,f as o,e as u,k as i}from"./polyfills-B4r5O4me.js";import{r as a}from"./react-vendor-D_ybsntB.js";import{s as f,g as s,h as c,S as l,t as h}from"./vendor-rc-util-Cfhh6bGy.js";import{i as v}from"./vendor-resize-observer-polyfill-C7U_o75s.js";var d=a.createContext(null);var m=new Map;var p=new v(function(e){e.forEach(function(e){var t,r=e.target;null===(t=m.get(r))||void 0===t||t.forEach(function(e){return e(r)})})});var g=function(o){e(i,o);var u=t(i);function i(){return r(this,i),u.apply(this,arguments)}return n(i,[{key:"render",value:function(){return this.props.children}}]),i}(a.Component);function R(e,t){var r=e.children,n=e.disabled,i=a.useRef(null),h=a.useRef(null),v=a.useContext(d),R="function"==typeof r,w=R?r(i):r,b=a.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),y=!R&&a.isValidElement(w)&&f(w),E=y?s(w):null,C=c(E,i),k=function(){var e;return l(i.current)||(i.current&&"object"===u(i.current)?l(null===(e=i.current)||void 0===e?void 0:e.nativeElement):null)||l(h.current)};a.useImperativeHandle(t,function(){return k()});var H=a.useRef(e);H.current=e;var j=a.useCallback(function(e){var t=H.current,r=t.onResize,n=t.data,u=e.getBoundingClientRect(),i=u.width,a=u.height,f=e.offsetWidth,s=e.offsetHeight,c=Math.floor(i),l=Math.floor(a);if(b.current.width!==c||b.current.height!==l||b.current.offsetWidth!==f||b.current.offsetHeight!==s){var h={width:c,height:l,offsetWidth:f,offsetHeight:s};b.current=h;var d=f===Math.round(i)?i:f,m=s===Math.round(a)?a:s,p=o(o({},h),{},{offsetWidth:d,offsetHeight:m});null==v||v(p,e,n),r&&Promise.resolve().then(function(){r(p,e)})}},[]);return a.useEffect(function(){var e,t,r=k();return r&&!n&&(e=r,t=j,m.has(e)||(m.set(e,new Set),p.observe(e)),m.get(e).add(t)),function(){return function(e,t){m.has(e)&&(m.get(e).delete(t),m.get(e).size||(p.unobserve(e),m.delete(e)))}(r,j)}},[i.current,n]),a.createElement(g,{ref:h},y?a.cloneElement(w,{ref:C}):w)}var w=a.forwardRef(R);function b(e,t){var r=e.children;return("function"==typeof r?[r]:h(r)).map(function(r,n){var o=(null==r?void 0:r.key)||"".concat("rc-observer-key","-").concat(n);return a.createElement(w,i({},e,{key:o,ref:0===n?t:void 0}),r)})}var y=a.forwardRef(b);y.Collection=function(e){var t=e.children,r=e.onBatchResize,n=a.useRef(0),o=a.useRef([]),u=a.useContext(d),i=a.useCallback(function(e,t,i){n.current+=1;var a=n.current;o.current.push({size:e,element:t,data:i}),Promise.resolve().then(function(){a===n.current&&(null==r||r(o.current),o.current=[])}),null==u||u(e,t,i)},[r,u]);return a.createElement(d.Provider,{value:i},t)};export{y as R};
