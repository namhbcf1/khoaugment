import{j as e}from"./index-CI5lv9mG.js";import{r as h}from"./vendor-DD54NZMZ.js";import{z as v,f as u,T as q,e as x,C as s,m as r,g as Q,Q as C,n as A,q as B,k as z,l as f,am as l,a0 as J,$ as k,B as m,x as w,au as U,K as W,aE as M,u as V,y as c,H as j,I as Z}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:ee,Text:d,Paragraph:te}=q,{Option:o}=k,{RangePicker:se}=J,{TabPane:I}=V,{Search:le}=Z,_={currentSession:{id:"S2023072001",cashier:"Nguyễn Văn A",startTime:"2023-07-20 08:00:00",endTime:null,startAmount:2e6,currentAmount:585e4,expectedAmount:585e4,difference:0,status:"active",orderCount:18,totalSales:385e4,cashSales:285e4,cardSales:1e6,otherSales:0,refunds:0,discounts:15e4},recentSessions:[{id:"S2023071902",cashier:"Nguyễn Văn A",startTime:"2023-07-19 14:00:00",endTime:"2023-07-19 20:00:00",startAmount:2e6,endAmount:675e4,expectedAmount:68e5,difference:-5e4,status:"closed",orderCount:25,totalSales:475e4,cashSales:325e4,cardSales:15e5,otherSales:0,refunds:0,discounts:2e5},{id:"S2023071901",cashier:"Trần Thị B",startTime:"2023-07-19 08:00:00",endTime:"2023-07-19 14:00:00",startAmount:2e6,endAmount:52e5,expectedAmount:52e5,difference:0,status:"closed",orderCount:16,totalSales:32e5,cashSales:22e5,cardSales:1e6,otherSales:0,refunds:0,discounts:12e4},{id:"S2023071802",cashier:"Nguyễn Văn A",startTime:"2023-07-18 14:00:00",endTime:"2023-07-18 20:00:00",startAmount:2e6,endAmount:72e5,expectedAmount:715e4,difference:5e4,status:"closed",orderCount:28,totalSales:52e5,cashSales:37e5,cardSales:15e5,otherSales:0,refunds:0,discounts:25e4}],orders:[{id:"ORD2023072001",time:"2023-07-20 08:45:12",customer:"Khách lẻ",items:3,total:85e4,payment:"cash",status:"completed"},{id:"ORD2023072002",time:"2023-07-20 09:20:35",customer:"Lê Văn C",items:2,total:12e5,payment:"card",status:"completed"},{id:"ORD2023072003",time:"2023-07-20 10:05:48",customer:"Khách lẻ",items:1,total:35e4,payment:"cash",status:"completed"},{id:"ORD2023072004",time:"2023-07-20 10:30:22",customer:"Phạm Thị D",items:4,total:145e4,payment:"cash",status:"completed"}],cashMovements:[{id:"CM2023072001",time:"2023-07-20 08:00:00",type:"cash_in",amount:2e6,reason:"Tiền đầu ca",approvedBy:"Hoàng Văn E"},{id:"CM2023072002",time:"2023-07-20 08:45:12",type:"cash_in",amount:85e4,reason:"Thanh toán đơn hàng ORD2023072001",approvedBy:null},{id:"CM2023072003",time:"2023-07-20 10:05:48",type:"cash_in",amount:35e4,reason:"Thanh toán đơn hàng ORD2023072003",approvedBy:null},{id:"CM2023072004",time:"2023-07-20 10:30:22",type:"cash_in",amount:145e4,reason:"Thanh toán đơn hàng ORD2023072004",approvedBy:null},{id:"CM2023072005",time:"2023-07-20 11:15:00",type:"cash_out",amount:5e5,reason:"Rút tiền mặt",approvedBy:"Hoàng Văn E"}]},ce=()=>{const[y,T]=h.useState(!0),[n,D]=h.useState(null),[b,N]=h.useState([v().startOf("week"),v()]),[O,$]=h.useState("all"),[K,E]=h.useState("all"),a=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(t),g=t=>v(t).format("DD/MM/YYYY HH:mm");h.useEffect(()=>{setTimeout(()=>{D(_),T(!1)},1e3)},[]);const H=()=>{T(!0),setTimeout(()=>{D(_),T(!1)},1e3)},Y=t=>{N(t)},L=t=>{$(t)},P=t=>{E(t)},F=[{title:"Mã ca",dataIndex:"id",key:"id"},{title:"Thu ngân",dataIndex:"cashier",key:"cashier"},{title:"Thời gian bắt đầu",dataIndex:"startTime",key:"startTime",render:t=>g(t)},{title:"Thời gian kết thúc",dataIndex:"endTime",key:"endTime",render:t=>t?g(t):"Chưa kết thúc"},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>t==="active"?e.jsx(l,{status:"processing",text:"Đang hoạt động"}):t==="closed"?e.jsx(l,{status:"success",text:"Đã đóng"}):e.jsx(l,{status:"default",text:t})},{title:"Đơn hàng",dataIndex:"orderCount",key:"orderCount"},{title:"Doanh thu",dataIndex:"totalSales",key:"totalSales",render:t=>a(t)},{title:"Chênh lệch",dataIndex:"difference",key:"difference",render:t=>{const i=t===0?"":t>0?"#52c41a":"#f5222d";return e.jsx("span",{style:{color:i},children:t===0?"0":`${t>0?"+":""}${a(t)}`})}},{title:"Thao tác",key:"action",render:(t,i)=>e.jsxs(f,{size:"small",children:[e.jsx(m,{size:"small",icon:e.jsx(w,{}),children:"Chi tiết"}),e.jsx(m,{size:"small",icon:e.jsx(M,{}),children:"In"})]})}],X=[{title:"Mã đơn",dataIndex:"id",key:"id"},{title:"Thời gian",dataIndex:"time",key:"time",render:t=>g(t)},{title:"Khách hàng",dataIndex:"customer",key:"customer"},{title:"Số mặt hàng",dataIndex:"items",key:"items"},{title:"Tổng tiền",dataIndex:"total",key:"total",render:t=>a(t)},{title:"Thanh toán",dataIndex:"payment",key:"payment",render:t=>{switch(t){case"cash":return e.jsx(j,{color:"green",children:"Tiền mặt"});case"card":return e.jsx(j,{color:"blue",children:"Thẻ"});default:return e.jsx(j,{children:t})}}},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>{switch(t){case"completed":return e.jsx(l,{status:"success",text:"Hoàn thành"});case"refunded":return e.jsx(l,{status:"warning",text:"Hoàn tiền"});case"cancelled":return e.jsx(l,{status:"error",text:"Đã hủy"});default:return e.jsx(l,{status:"default",text:t})}}}],G=[{title:"Mã giao dịch",dataIndex:"id",key:"id"},{title:"Thời gian",dataIndex:"time",key:"time",render:t=>g(t)},{title:"Loại",dataIndex:"type",key:"type",render:t=>{switch(t){case"cash_in":return e.jsx(j,{color:"green",children:"Tiền vào"});case"cash_out":return e.jsx(j,{color:"red",children:"Tiền ra"});default:return e.jsx(j,{children:t})}}},{title:"Số tiền",dataIndex:"amount",key:"amount",render:(t,i)=>{const p=i.type==="cash_in"?"#52c41a":"#f5222d",S=i.type==="cash_in"?"+":"-";return e.jsxs("span",{style:{color:p},children:[S," ",a(t)]})}},{title:"Lý do",dataIndex:"reason",key:"reason"},{title:"Người duyệt",dataIndex:"approvedBy",key:"approvedBy",render:t=>t||"N/A"}];return e.jsx("div",{className:"session-reports",children:e.jsxs(u,{loading:y,children:[e.jsx(ee,{level:2,children:"Báo cáo ca làm việc"}),e.jsx(te,{type:"secondary",children:"Xem thông tin chi tiết về ca làm việc, đơn hàng và giao dịch tiền mặt"}),n?.currentSession&&e.jsxs(u,{title:e.jsxs(f,{children:[e.jsx(C,{}),e.jsx("span",{children:"Ca làm việc hiện tại"}),e.jsx(l,{status:"processing",text:n.currentSession.id})]}),style:{marginBottom:16},children:[e.jsxs(x,{gutter:16,children:[e.jsx(s,{xs:24,sm:12,md:6,children:e.jsx(r,{title:"Thu ngân",value:n.currentSession.cashier,prefix:e.jsx(Q,{})})}),e.jsx(s,{xs:24,sm:12,md:6,children:e.jsx(r,{title:"Thời gian bắt đầu",value:g(n.currentSession.startTime),prefix:e.jsx(C,{})})}),e.jsx(s,{xs:24,sm:12,md:6,children:e.jsx(r,{title:"Số đơn hàng",value:n.currentSession.orderCount,prefix:e.jsx(A,{})})}),e.jsx(s,{xs:24,sm:12,md:6,children:e.jsx(r,{title:"Doanh thu",value:n.currentSession.totalSales,prefix:e.jsx(B,{}),formatter:t=>a(t)})})]}),e.jsx(z,{}),e.jsxs(x,{gutter:16,children:[e.jsx(s,{xs:24,sm:12,md:8,children:e.jsx(u,{size:"small",title:"Tiền mặt",children:e.jsxs(x,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(r,{title:"Tiền đầu ca",value:n.currentSession.startAmount,formatter:t=>a(t),valueStyle:{fontSize:"14px"}})}),e.jsx(s,{span:12,children:e.jsx(r,{title:"Tiền hiện tại",value:n.currentSession.currentAmount,formatter:t=>a(t),valueStyle:{fontSize:"14px"}})})]})})}),e.jsx(s,{xs:24,sm:12,md:8,children:e.jsx(u,{size:"small",title:"Doanh thu theo phương thức",children:e.jsxs(x,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(r,{title:"Tiền mặt",value:n.currentSession.cashSales,formatter:t=>a(t),valueStyle:{fontSize:"14px"}})}),e.jsx(s,{span:12,children:e.jsx(r,{title:"Thẻ",value:n.currentSession.cardSales,formatter:t=>a(t),valueStyle:{fontSize:"14px"}})})]})})}),e.jsx(s,{xs:24,sm:12,md:8,children:e.jsx(u,{size:"small",title:"Khác",children:e.jsxs(x,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(r,{title:"Giảm giá",value:n.currentSession.discounts,formatter:t=>a(t),valueStyle:{fontSize:"14px"}})}),e.jsx(s,{span:12,children:e.jsx(r,{title:"Hoàn tiền",value:n.currentSession.refunds,formatter:t=>a(t),valueStyle:{fontSize:"14px"}})})]})})})]})]}),e.jsx(u,{style:{marginBottom:16},children:e.jsxs(x,{gutter:16,align:"middle",children:[e.jsx(s,{xs:24,sm:24,md:8,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(d,{strong:!0,children:"Thời gian:"}),e.jsx("div",{children:e.jsx(se,{style:{width:"100%"},value:b,onChange:Y,format:"DD/MM/YYYY"})})]})}),e.jsx(s,{xs:12,sm:12,md:4,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(d,{strong:!0,children:"Thu ngân:"}),e.jsx("div",{children:e.jsxs(k,{style:{width:"100%"},value:O,onChange:L,children:[e.jsx(o,{value:"all",children:"Tất cả"}),e.jsx(o,{value:"Nguyễn Văn A",children:"Nguyễn Văn A"}),e.jsx(o,{value:"Trần Thị B",children:"Trần Thị B"}),e.jsx(o,{value:"Lê Văn C",children:"Lê Văn C"})]})})]})}),e.jsx(s,{xs:12,sm:12,md:4,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(d,{strong:!0,children:"Trạng thái:"}),e.jsx("div",{children:e.jsxs(k,{style:{width:"100%"},value:K,onChange:P,children:[e.jsx(o,{value:"all",children:"Tất cả"}),e.jsx(o,{value:"active",children:"Đang hoạt động"}),e.jsx(o,{value:"closed",children:"Đã đóng"})]})})]})}),e.jsx(s,{xs:24,sm:24,md:8,style:{textAlign:"right"},children:e.jsxs(f,{children:[e.jsx(m,{icon:e.jsx(w,{}),onClick:H,children:"Tìm kiếm"}),e.jsx(m,{icon:e.jsx(U,{}),children:"Xuất Excel"}),e.jsx(m,{icon:e.jsx(W,{}),children:"Xuất PDF"}),e.jsx(m,{type:"primary",icon:e.jsx(M,{}),children:"In báo cáo"})]})})]})}),e.jsxs(V,{defaultActiveKey:"sessions",children:[e.jsx(I,{tab:e.jsxs("span",{children:[e.jsx(C,{})," Ca làm việc"]}),children:e.jsx(c,{columns:F,dataSource:n?.recentSessions||[],rowKey:"id",loading:y,pagination:{pageSize:5}})},"sessions"),e.jsx(I,{tab:e.jsxs("span",{children:[e.jsx(A,{})," Đơn hàng"]}),children:e.jsx(c,{columns:X,dataSource:n?.orders||[],rowKey:"id",loading:y,pagination:{pageSize:5}})},"orders"),e.jsx(I,{tab:e.jsxs("span",{children:[e.jsx(B,{})," Giao dịch tiền mặt"]}),children:e.jsx(c,{columns:G,dataSource:n?.cashMovements||[],rowKey:"id",loading:y,pagination:{pageSize:5},summary:t=>{let i=0,p=0;return t.forEach(({type:S,amount:R})=>{S==="cash_in"?i+=R:S==="cash_out"&&(p+=R)}),e.jsxs(c.Summary.Row,{children:[e.jsx(c.Summary.Cell,{index:0,colSpan:3,children:e.jsx(d,{strong:!0,children:"Tổng cộng"})}),e.jsx(c.Summary.Cell,{index:3,children:e.jsxs(f,{direction:"vertical",children:[e.jsxs(d,{type:"success",children:["Tiền vào: ",a(i)]}),e.jsxs(d,{type:"danger",children:["Tiền ra: ",a(p)]}),e.jsx(z,{style:{margin:"4px 0"}}),e.jsxs(d,{strong:!0,children:["Chênh lệch: ",a(i-p)]})]})}),e.jsx(c.Summary.Cell,{index:4,colSpan:2})]})}})},"cash_movements")]})]})})};export{ce as default};
