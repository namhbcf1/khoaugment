import"./vendor-antv-g-camera-api-D5IlTOkC.js";import{E as t,G as e,T as n,r,H as i,a,P as o,L as s,I as l,b as u,c,d as h,R as p,C as d,D as f,e as g,p as v}from"./vendor-antv-g-lite-BsxRpwbw.js";import"./vendor-antv-g-web-animations-api-BYFD-Sr5.js";import{_ as y,a as b,b as m,c as x,d as w,e as S,f as L}from"./vendor-tslib-BRpNZtt8.js";import{i as k,a as A,b as B,m as P,c as C,d as E,f as O,e as M,g as _,h as N,j,k as z,l as G,n as T,o as H,p as V,q as I,r as R,s as W,t as D,u as F,v as q,w as Z,x as K}from"./vendor-antv-util-BIOdtugi.js";import{L as $,B as U}from"./vendor-antv-scale-BQ7XIs6N.js";function Y(t,e){e(t),t.children&&t.children.forEach(function(t){t&&Y(t,e)})}function X(t){Q(t,!0)}function J(t){Q(t,!1)}function Q(t,e){var n=e?"visible":"hidden";Y(t,function(t){t.attr("visibility",n)})}var tt=function(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,b([],m(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(t.INSERTED,function(){J(i)}),i}return y(n,e),n}(e);function et(t){var e=t.appendChild(new tt({class:"offscreen"}));return J(e),e}var nt=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=x(e,["style"]);return t.call(this,w({style:w({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},r))||this}return y(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=et(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e}(n);function rt(t){return t*Math.PI/180}function it(t){return Number((180*t/Math.PI).toPrecision(5))}var at=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=r}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t}();function ot(t,e){return k(t)?t.apply(void 0,b([],m(e),!1)):t}var st,lt=function(t,e){var n=function(t){return"".concat(e,"-").concat(t)},r=Object.fromEntries(Object.entries(t).map(function(t){var e=m(t,2),r=e[0],i=e[1],a=n(i);return[r,{name:a,class:".".concat(a),id:"#".concat(a),toString:function(){return a}}]}));return Object.assign(r,{prefix:n}),r},ut=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=5),Object.entries(e).forEach(function(i){var a=m(i,2),o=a[0],s=a[1],l=t;Object.prototype.hasOwnProperty.call(e,o)&&(s?A(s)?(A(t[o])||(l[o]={}),n<r?ut(t[o],s,n+1,r):l[o]=e[o]):B(s)?(l[o]=[],l[o]=l[o].concat(s)):l[o]=s:l[o]=s)})},ct=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)ut(t,e[r]);return t},ht=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},pt=P(function(t,e){var n=e.fontSize,i=e.fontFamily,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant;return st||(st=r.offscreenCanvasCreator.getOrCreateContext(void 0)),st.font=[o,s,a,"".concat(n,"px"),i].join(" "),st.measureText(t).width},function(t,e){return[t,Object.values(e||dt(t)).join()].join("")},4096),dt=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return{fontSize:a="object"==typeof a?a.value:a,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function ft(t){return"text"===t.nodeName?t:"g"===t.nodeName&&1===t.children.length&&"text"===t.children[0].nodeName?t.children[0]:null}function gt(t,e){var n=ft(t);n&&n.attr(e)}function vt(t,e,n){void 0===n&&(n="..."),gt(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function yt(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e)return[e.x,e.y];if(n){var a=n[0];return[a.clientX,a.clientY]}return r&&i?[r,i]:[0,0]}function bt(t){return"function"==typeof t?t():C(t)||E(t)?new nt({style:{text:String(t)}}):t}function mt(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=function(t){t.node().removeChildren()}),t?n(e):(r&&i(e),null)}function xt(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=!1),!!(r&&t===e||i&&t===n)||t>e&&t<n}function wt(t,e){return"number"==typeof t&&"number"==typeof e?function(t,e){return function(n){return t*(1-n)+e*n}}(t,e):Array.isArray(t)&&Array.isArray(e)?function(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var a=new Array(r),o=new Array(n),s=0;for(s=0;s<r;++s)a[s]=wt(t[s],e[s]);for(;s<n;++s)o[s]=e[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}(t,e):"object"==typeof t&&"object"==typeof e?function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n={},r={};return Object.entries(e).forEach(function(e){var i=m(e,2),a=i[0],o=i[1];a in t?n[a]=wt(t[a],o):r[a]=o}),function(t){return Object.entries(n).forEach(function(e){var n=m(e,2),i=n[0],a=n[1];return r[i]=a(t)}),r}}(t,e):function(e){return t}}function St(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<t.length;a++){var o=t[a],s=o.x,l=o.y,u=o.width,c=o.height,h=m([s+u,l+c],2),p=h[0],d=h[1];s<e&&(e=s),l<n&&(n=l),p>r&&(r=p),d>i&&(i=d)}return new at(e,n,r-e,i-n)}var Lt=function(t,e,n){var r=t.width,i=t.height,a=n.flexDirection,o=void 0===a?"row":a;n.flexWrap;var s=n.justifyContent,l=void 0===s?"flex-start":s;n.alignContent;var u=n.alignItems,c=void 0===u?"flex-start":u,h="row"===o,p="row"===o||"column"===o,d=h?p?[1,0]:[-1,0]:p?[0,1]:[0,-1],f=m([0,0],2),g=f[0],v=f[1],y=e.map(function(t){var e,n=t.width,r=t.height,i=m([g,v],2),a=i[0],o=i[1];return e=m([g+n*d[0],v+r*d[1]],2),g=e[0],v=e[1],new at(a,o,n,r)}),b=St(y),x={"flex-start":0,"flex-end":h?r-b.width:i-b.height,center:h?(r-b.width)/2:(i-b.height)/2},w=y.map(function(t){var e=t.x,n=t.y,r=at.fromRect(t);return r.x=h?e+x[l]:e,r.y=h?n:n+x[l],r});St(w);var S=function(t){var e=m(h?["height",i]:["width",r],2),n=e[0],a=e[1];switch(c){case"flex-start":default:return 0;case"flex-end":return a-t[n];case"center":return a/2-t[n]/2}};return w.map(function(t){var e=t.x,n=t.y,r=at.fromRect(t);return r.x=h?e:e+S(r),r.y=h?n+S(r):n,r}).map(function(e){var n,r,i=at.fromRect(e);return i.x+=null!==(n=t.x)&&void 0!==n?n:0,i.y+=null!==(r=t.y)&&void 0!==r?r:0,i})},kt=function(t,e,n){return[]};function At(t,e){return[t[0]*e,t[1]*e]}function Bt(t,e){return[t[0]+e[0],t[1]+e[1]]}function Pt(t,e){return[t[0]-e[0],t[1]-e[1]]}function Ct(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function Et(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function Ot(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function Mt(t){if(0===t[0]&&0===t[1])return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function _t(t,e){return+t.toPrecision(e)}function Nt(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function jt(t,e,n){void 0===n&&(n=[[0,0],[1,1]]);for(var r=[],i=0,a=t.length;i<a;i+=2)r.push([t[i],t[i+1]]);var o,s,l,u=function(t,e,n,r){var i,a,o,s,l,u,c=[],h=!!r,p=[1/0,1/0],d=[-1/0,-1/0];if(h){p=(i=m(r,2))[0],d=i[1];for(var f=0,g=t.length;f<g;f+=1)p=Ct(p,y=t[f]),d=Et(d,y)}f=0;for(var v=t.length;f<v;f+=1){var y=t[f];if(0===f)u=y;else if(f===v-1)l=y,c.push(u),c.push(l);else{a=t[f-1];var b=[0,0];b=At(b=Pt(o=t[f+1],a),e);var x=Ot(y,a),w=Ot(y,o),S=x+w;0!==S&&(x/=S,w/=S);var L=At(b,-x),k=At(b,w);l=Bt(y,L),s=Ct(s=Bt(y,k),Et(o,y)),s=Et(s,Ct(o,y)),l=Ct(l=Bt(y,L=At(L=Pt(s,y),-x/w)),Et(a,y)),s=Bt(y,k=At(k=Pt(y,l=Et(l,Ct(a,y))),w/x)),h&&(l=Ct(l=Et(l,p),d),s=Ct(s=Et(s,p),d)),c.push(u),c.push(l),u=s}}return c}(r,.4,0,n),c=r.length,h=[];for(i=0;i<c-1;i+=1)o=u[2*i],s=u[2*i+1],l=r[i+1],h.push(["C",o[0],o[1],s[0],s[1],l[0],l[1]]);return h}var zt=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function Gt(t){return zt.includes(t)}function Tt(t){var e={};for(var n in t)Gt(n)&&(e[n]=t[n]);return e}function Ht(t,e,n){var r=t.getBBox(),i=r.width,a=r.height,o=e/Math.max(i,a);return t.style.transform="scale(".concat(o,")"),o}var Vt=function(){function t(t,e,r,i,a,o,s){void 0===t&&(t=null),void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=[null,null,null,null,null]),void 0===o&&(o=[]),void 0===s&&(s=[]),n.add(this),this._elements=Array.from(t),this._data=e,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}var n,r,d;return t.prototype.selectAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new r(e,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new r(this._elements,null,this._parent,this._document,void 0,void 0,e)},t.prototype.select=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new r([e],null,e,this._document)},t.prototype.append=function(t){var e=this,n="function"==typeof t?t:function(){return e.createElement(t)},i=[];if(null!==this._data){for(var a=0;a<this._data.length;a++){var o=this._data[a],s=m(Array.isArray(o)?o:[o,null],2),l=s[0],u=s[1];(h=n(l,a)).__data__=l,null!==u&&(h.__fromElements__=u),this._parent.appendChild(h),i.push(h)}return new r(i,null,this._parent,this._document)}for(a=0;a<this._elements.length;a++){var c=this._elements[a],h=n(l=c.__data__,a);c.appendChild(h),i.push(h)}return new r(i,null,i[0],this._document)},t.prototype.maybeAppend=function(t,e){var r=S(this,n,"m",d).call(this,"#"===t[0]?t:"#".concat(t),e);return r.attr("id",t),r},t.prototype.maybeAppendByClassName=function(t,e){var r=t.toString(),i=S(this,n,"m",d).call(this,"."===r[0]?r:".".concat(r),e);return i.attr("className",r),i},t.prototype.maybeAppendByName=function(t,e){var r=S(this,n,"m",d).call(this,'[name="'.concat(t,'"]'),e);return r.attr("name",t),r},t.prototype.data=function(t,e,n){var i,a;void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(){return null});for(var o,s,l,u=[],c=[],h=new Set(this._elements),p=[],d=new Set,f=new Map(this._elements.map(function(t,n){return[e(t.__data__,n),t]})),g=new Map(this._facetElements.map(function(t,n){return[e(t.__data__,n),t]})),v=(o=this._elements,s=function(t){return n(t.__data__)},l=new Map,o.forEach(function(t){var e=s(t);l.has(e)||l.set(e,[]),l.get(e).push(t)}),l),y=0;y<t.length;y++){var b=t[y],m=e(b,y),x=n(b,y);if(f.has(m))(A=f.get(m)).__data__=b,A.__facet__=!1,c.push(A),h.delete(A),f.delete(m);else if(g.has(m)){(A=g.get(m)).__data__=b,A.__facet__=!0,c.push(A),g.delete(m)}else if(v.has(m)){var w=v.get(m);p.push([b,w]);try{for(var S=(i=void 0,L(w)),k=S.next();!k.done;k=S.next()){var A=k.value;h.delete(A)}}catch(P){i={error:P}}finally{try{k&&!k.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}v.delete(m)}else if(f.has(x)){(A=f.get(x)).__toData__?A.__toData__.push(b):A.__toData__=[b],d.add(A),h.delete(A)}else u.push(b)}var B=[new r([],u,this._parent,this._document),new r(c,null,this._parent,this._document),new r(h,null,this._parent,this._document),new r([],p,this._parent,this._document),new r(d,null,this._parent,this._document)];return new r(this._elements,null,this._parent,this._document,B)},t.prototype.merge=function(t){var e=b(b([],m(this._elements),!1),m(t._elements),!1),n=b(b([],m(this._transitions),!1),m(t._transitions),!1);return new r(e,null,this._parent,this._document,void 0,n)},t.prototype.createElement=function(t){if(this._document)return this._document.createElement(t,{});var e=r.registry[t];return e?new e:function(t){throw new Error(t)}("Unknown node type: ".concat(t))},t.prototype.join=function(t,e,n,r,i){void 0===t&&(t=function(t){return t}),void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()}),void 0===r&&(r=function(t){return t}),void 0===i&&(i=function(t){return t.remove()});var a=t(this._enter),o=e(this._update),s=n(this._exit),l=r(this._merge),u=i(this._split);return o.merge(a).merge(s).merge(l).merge(u)},t.prototype.remove=function(){for(var t=function(t){var n=e._elements[t],r=e._transitions[t];r?r.then(function(){return n.remove()}):n.remove()},e=this,n=0;n<this._elements.length;n++)t(n);return new r([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e],r=n.__data__;t.call(n,r,e)}return this},t.prototype.attr=function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each(function(r,i){void 0!==e&&(this[t]=n.call(this,r,i))})},t.prototype.style=function(t,e,n){void 0===n&&(n=!0);var r="function"==typeof e&&n?e:function(){return e};return this.each(function(n,i){void 0!==e&&(this.style[t]=r.call(this,n,i))})},t.prototype.styles=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!0),this.each(function(n,r){var i=this;Object.entries(t).forEach(function(t){var a=m(t,2),o=a[0],s=a[1],l="function"==typeof s&&e?s:function(){return s};void 0!==s&&i.attr(o,l.call(i,n,r))})})},t.prototype.update=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each(function(e,r){t&&this.update&&this.update(n.call(this,e,r))})},t.prototype.maybeUpdate=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each(function(e,r){t&&this.update&&this.update(n.call(this,e,r))})},t.prototype.transition=function(t){this._transitions;var e=new Array(this._elements.length);return this.each(function(n,r){e[r]=t.call(this,n,r)}),this._transitions=O(e),this},t.prototype.on=function(t,e){return this.each(function(){this.addEventListener(t,e)}),this},t.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.call.apply(t,b([this._parent,this],m(e),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(t){return!!t})},t.prototype.parent=function(){return this._parent},r=t,n=new WeakSet,d=function(t,e){var n=this._elements[0],i=n.querySelector(t);if(i)return new r([i],null,this._parent,this._document);var a="string"==typeof e?this.createElement(e):e();return n.appendChild(a),new r([a],null,this._parent,this._document)},t.registry={g:e,rect:p,circle:h,path:c,text:nt,ellipse:u,image:l,line:s,polygon:o,polyline:a,html:i},t}();function It(t){return new Vt([t],null,t,t.ownerDocument)}function Rt(t){if(E(t))return[t,t,t,t];if(B(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function Wt(t){var e=t.getLocalBounds(),n=e.min,r=e.max,i=m([n,r],2),a=m(i[0],2),o=a[0],s=a[1],l=m(i[1],2),u=l[0],c=l[1];return{x:o,y:s,width:u-o,height:c-s,left:o,bottom:c,top:s,right:u}}function Dt(t,e){var n=m(t,2),r=n[0],i=n[1],a=m(e,2),o=a[0],s=a[1];return r!==o&&i===s}function Ft(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function qt(t,e,n){var r;void 0===n&&(n=!0);var i=e||(null===(r=t.match(/^([a-z][a-z0-9]+)/))||void 0===r?void 0:r[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return n?function(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}(a):a}var Zt=function(t,e){if(!(null==t?void 0:t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function Kt(t,e,n){void 0===n&&(n=!1);var r={};return Object.entries(t).forEach(function(t){var i=m(t,2),a=i[0],o=i[1];if("className"===a||"class"===a);else if(Zt(a,"show")&&Zt(qt(a,"show"),e)!==n)a===function(t,e){return"".concat(e).concat(Ft(t))}(e,"show")?r[a]=o:r[a.replace(new RegExp(Ft(e)),"")]=o;else if(!Zt(a,"show")&&Zt(a,e)!==n){var s=qt(a,e);"filter"===s&&"function"==typeof o||(r[s]=o)}}),r}function $t(t,e){return Object.entries(t).reduce(function(t,n){var r=m(n,2),i=r[0],a=r[1];return i.startsWith("show")?t["show".concat(e).concat(i.slice(4))]=a:t["".concat(e).concat(Ft(i))]=a,t},{})}function Ut(t,e){void 0===e&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach(function(t){var a=m(t,2),o=a[0],s=a[1];e.includes(o)||(-1!==n.indexOf(o)?i[o]=s:r[o]=s)}),[r,i]}function Yt(t,e){if(e)try{var n=e.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,function(e,n,r){return"translate(".concat(function(t,e,n){var r=t.getBBox(),i=r.width,a=r.height,o=m([e,n].map(function(t,e){var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?i:a):t}),2);return[o[0],o[1]]}(t,n,r),")")});t.attr("transform",n)}catch(r){}}var Xt=function(t,e){null!=e?t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,b([],m(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(e){return t.appendChild(e)}):t.appendChild(e)):t.innerHTML=""};function Jt(){Q(this,"hidden"!==this.attributes.visibility)}var Qt=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,ct({},{style:n},e))||this;return r.initialized=!1,r._defaultOptions=n,r}return y(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=et(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e.prototype.attributeChangedCallback=function(t){"visibility"===t&&Jt.call(this)},e.prototype.update=function(t,e){var n;return this.attr(ct({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,e){},e.prototype.getSubShapeStyle=function(t){return t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex,x(t,["x","y","transform","transformOrigin","class","className","zIndex"])},e}(d),te=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},ee=te,ne=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},re=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},ie=re;function ae(t){var e=function(t){var e="default";if(M(t)&&t instanceof Image)e="image";else if(k(t))e="symbol";else if(C(t)){var n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}(t);return["base64","url","image"].includes(e)?"image":t&&"symbol"===e?"path":null}var oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.render=function(t,n){var r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a,s=this.getSubShapeStyle(t),l=s.symbol,u=s.size,c=void 0===u?16:u,h=x(s,["symbol","size"]),p=ae(l);mt(!!p,It(n),function(t){t.maybeAppendByClassName("marker",p).attr("className","marker ".concat(p,"-marker")).call(function(t){if("image"===p){var n=2*c;t.styles({img:l,width:n,height:n,x:i-c,y:o-c})}else{n=c/2;var r=k(l)?l:e.getSymbol(l);t.styles(w({d:null==r?void 0:r(i,o,n)},h))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(Qt);oe.registerSymbol("cross",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]}),oe.registerSymbol("hyphen",function(t,e,n){return[["M",t-n,e],["L",t+n,e]]}),oe.registerSymbol("line",ne),oe.registerSymbol("plus",function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]}),oe.registerSymbol("tick",function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]}),oe.registerSymbol("circle",te),oe.registerSymbol("point",ee),oe.registerSymbol("bowtie",function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]}),oe.registerSymbol("hexagon",function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]}),oe.registerSymbol("square",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]}),oe.registerSymbol("diamond",function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]}),oe.registerSymbol("triangle",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]}),oe.registerSymbol("triangle-down",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}),oe.registerSymbol("line",ne),oe.registerSymbol("dot",re),oe.registerSymbol("dash",ie),oe.registerSymbol("smooth",function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]}),oe.registerSymbol("hv",function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]}),oe.registerSymbol("vh",function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]}),oe.registerSymbol("hvh",function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]}),oe.registerSymbol("vhv",function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]});var se=function(t){function n(n){var r=this,i=n.style,a=x(n,["style"]);return(r=t.call(this,_({},{type:"column"},w({style:i},a)))||this).columnsGroup=new e({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return y(n,t),n.prototype.render=function(){var t=this.attributes,e=t.columns,n=t.x,r=t.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(r,")"),It(this.columnsGroup).selectAll(".column").data(e.flat()).join(function(t){return t.append("rect").attr("className","column").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.attr(t)})},function(t){return t.remove()})},n.prototype.update=function(t){this.attr(ct({},this.attributes,t)),this.render()},n.prototype.clear=function(){this.removeChildren()},n}(f),le=function(t){function n(n){var r=this,i=n.style,a=x(n,["style"]);return(r=t.call(this,_({},{type:"lines"},w({style:i},a)))||this).linesGroup=r.appendChild(new e),r.areasGroup=r.appendChild(new e),r.render(),r}return y(n,t),n.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas,r=t.x,i=t.y;this.style.transform="translate(".concat(r,", ").concat(i,")"),e&&this.renderLines(e),n&&this.renderAreas(n)},n.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},n.prototype.update=function(t){this.attr(ct({},this.attributes,t)),this.render()},n.prototype.renderLines=function(t){It(this.linesGroup).selectAll(".line").data(t).join(function(t){return t.append("path").attr("className","line").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.attr(t)})},function(t){return t.remove()})},n.prototype.renderAreas=function(t){It(this.linesGroup).selectAll(".area").data(t).join(function(t){return t.append("path").attr("className","area").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.style(t)})},function(t){return t.remove()})},n}(f);function ue(t,e){void 0===e&&(e=!1);var n=e?t.length-1:0,r=t.map(function(t,e){return b([e===n?"M":"L"],m(t),!1)});return e?r.reverse():r}function ce(t,e){if(void 0===e&&(e=!1),t.length<=2)return ue(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var a=e?t[r-i-1]:t[i];j(a,n.slice(-2))||n.push.apply(n,b([],m(a),!1))}var o=jt(n);return e?o.unshift(b(["M"],m(t[r-1]),!1)):o.unshift(b(["M"],m(t[0]),!1)),o}function he(t,e,n){var r=z(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}function pe(t){return 0===t.length?[0,0]:[G(H(t,function(t){return G(t)||0})),T(V(t,function(t){return T(t)||0}))]}function de(t){for(var e=z(t),n=e[0].length,r=m([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],a=r[1],o=0;o<e.length;o+=1)for(var s=e[o],l=0;l<n;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=a[l],a[l]=s[l]);return e}var fe=function(t){function e(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return y(e,t),Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||0===(null==t?void 0:t.length))return[[]];var e=z(t);return E(e[0])?[e]:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?de(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,e=m(t.getOptions().domain||[0,0],2),n=e[0],r=e[1];return r<0?t.map(r):t.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,e=this.attributes,n=e.type,r=e.isStack,i=e.smooth;if("line"!==n)throw new Error("linesStyle can only be used in line type");var a=Kt(this.attributes,"area"),o=Kt(this.attributes,"line"),s=this.containerShape.width,l=this.data;if(0===l[0].length)return{lines:[],areas:[]};var u=this.scales,c=function(t,e){var n,r=e.x,i=e.y,a=m(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(n=m([o,s],2),s=n[0],o=n[1]),t.map(function(t){return t.map(function(t,e){return[r.map(e),N(i.map(t),s,o)]})})}(l,{x:u.x,y:u.y}),h=[];if(a){var p=this.baseline;h=r?i?function(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=ce(a),s=void 0;if(0===i)s=he(o,e,n);else{var l=ce(t[i-1],!0),u=a[0];l[0][0]="L",s=b(b(b([],m(o),!1),m(l),!1),[b(["M"],m(u),!1),["Z"]],!1)}r.push(s)}return r}(c,s,p):function(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=ue(t[i]),o=void 0;if(0===i)o=he(a,e,n);else{var s=ue(t[i-1],!0);s[0][0]="L",o=b(b(b([],m(a),!1),m(s),!1),[["Z"]],!1)}r.push(o)}return r}(c,s,p):function(t,e,n,r){return t.map(function(t){return he(e?ce(t):ue(t),n,r)})}(c,i,s,p)}return{lines:c.map(function(e,n){return w({stroke:t.getColor(n),d:i?ce(e):ue(e)},o)}),areas:h.map(function(e,n){return w({d:e,fill:t.getColor(n)},a)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,e=Kt(this.attributes,"column"),n=this.attributes,r=n.isStack,i=n.type,a=n.scale;if("column"!==i)throw new Error("columnsStyle can only be used in column type");var o=this.containerShape.height,s=this.rawData;if(!s)return{columns:[]};r&&(s=de(s));var l=this.createScales(s),u=l.x,c=l.y,h=m(pe(s),2),p=h[0],d=h[1],f=new $({domain:[0,d-(p>0?0:p)],range:[0,o*a]}),g=u.getBandWidth(),v=this.rawData;return{columns:s.map(function(n,i){return n.map(function(n,a){var o=g/s.length;return w(w({fill:t.getColor(i)},e),r?{x:u.map(a),y:c.map(n),width:g,height:f.map(v[i][a])}:{x:u.map(a)+o*i,y:n>=0?c.map(n):c.map(0),width:o,height:f.map(Math.abs(n))})})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){var n,r,i;(n=e,r=".container",i="rect",n.querySelector(r)?It(n).select(r):It(n).append(i)).attr("className","container").node();var a=t.type,o=t.x,s=t.y,l="spark".concat(a),u=w({x:o,y:s},"line"===a?this.linesStyle:this.columnsStyle);It(e).selectAll(".spark").data([a]).join(function(t){return t.append(function(t){return"line"===t?new le({className:l,style:u}):new se({className:l,style:u})}).attr("className","spark ".concat(l))},function(t){return t.update(u)},function(t){return t.remove()})},e.prototype.getColor=function(t){var e=this.attributes.color;return B(e)?e[t%e.length]:k(e)?e.call(null,t):e},e.prototype.createScales=function(t){var e,n,r=this.attributes,i=r.type,a=r.scale,o=r.range,s=void 0===o?[]:o,l=r.spacing,u=this.containerShape,c=u.width,h=u.height,p=m(pe(t),2),d=p[0],f=p[1],g=new $({domain:[null!==(e=s[0])&&void 0!==e?e:d,null!==(n=s[1])&&void 0!==n?n:f],range:[h,h*(1-a)]});return"line"===i?{type:i,x:new $({domain:[0,t[0].length-1],range:[0,c]}),y:g}:{type:i,x:new U({domain:t[0].map(function(t,e){return e}),range:[0,c],paddingInner:l,paddingOuter:l/2,align:.5}),y:g}},e.tag="sparkline",e}(Qt);function ge(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(function(t){var n=m(t,1)[0];return!e.includes(n)}));return Object.fromEntries(e.map(function(e){return function(t){return"boolean"!=typeof t&&"enter"in t&&"update"in t&&"exit"in t}(t)?!1===t[e]?[e,!1]:[e,w(w({},t[e]),n)]:[e,n]}))}function ve(t,e){t?t.finished.then(e):e()}function ye(t,e){"update"in t?t.update(e):t.attr(e)}function be(t,e,n){return 0===e.length?null:n?t.animate(e,n):(ye(t,{style:e.slice(-1)[0]}),null)}function me(t,e,n){var r={},i={};return Object.entries(e).forEach(function(e){var n=m(e,2),a=n[0],o=n[1];if(!I(o)){var s=t.style[a]||t.parsedStyle[a]||0;s!==o&&(r[a]=s,i[a]=o)}}),n?be(t,[r,i],w({fill:"both"},n)):(ye(t,i),null)}function xe(t,e){return t.style.opacity||(t.style.opacity=1),me(t,{opacity:0},e)}var we={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},Se={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},Le={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},ke=lt({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Ae=lt({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.render=function(t,e){var n=t.x,r=t.y,i=t.size,a=void 0===i?10:i,o=t.radius,s=void 0===o?a/4:o,l=t.orientation,u=x(t,["x","y","size","radius","orientation"]),c=a,h=2.4*c,p=It(e).maybeAppendByClassName(Ae.iconRect,"rect").styles(w(w({},u),{width:c,height:h,radius:s,x:n-c/2,y:r-h/2,transformOrigin:"center"})),d=n+1/3*c-c/2,f=n+2/3*c-c/2,g=r+1/4*h-h/2,v=r+3/4*h-h/2;p.maybeAppendByClassName("".concat(Ae.iconLine,"-1"),"line").styles(w({x1:d,x2:d,y1:g,y2:v},u)),p.maybeAppendByClassName("".concat(Ae.iconLine,"-2"),"line").styles(w({x1:f,x2:f,y1:g,y2:v},u)),"vertical"===l&&(p.node().style.transform="rotate(90)")},e}(Qt),Pe=function(t){function e(e){return t.call(this,e,Le)||this}return y(e,t),e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.x,i=n.y,a=n.showLabel,o=Kt(this.attributes,"label"),s=o.x,l=void 0===s?0:s,u=o.y,c=void 0===u?0:u,h=o.transform,p=o.transformOrigin,d=x(o,["x","y","transform","transformOrigin"]),f=m(Ut(d,[]),2),g=f[0],v=f[1],y=It(t).maybeAppendByClassName(Ae.labelGroup,"g").styles(v),b=w(w({},Se),g),S=b.text,L=x(b,["text"]);mt(!!a,y,function(t){e.label=t.maybeAppendByClassName(Ae.label,"text").styles(w(w({},L),{x:r+l,y:i+c,transform:h,transformOrigin:p,text:"".concat(S)})),e.label.on("mousedown",function(t){t.stopPropagation()}),e.label.on("touchstart",function(t){t.stopPropagation()})})},e.prototype.renderIcon=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.orientation,a=e.type,o=w(w({x:n,y:r,orientation:i},we),Kt(this.attributes,"icon")),s=this.attributes.iconShape,l=void 0===s?function(){return new Be({style:o})}:s;It(t).maybeAppendByClassName(Ae.iconGroup,"g").selectAll(Ae.icon.class).data([l]).join(function(t){return t.append("string"==typeof l?l:function(){return l(a)}).attr("className",Ae.icon.name)},function(t){return t.update(o)},function(t){return t.remove()})},e.prototype.render=function(t,e){this.renderIcon(e),this.renderLabel(e)},e}(Qt),Ce=function(t){function e(e){var n=t.call(this,e,w(w(w({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(t){return t.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},$t(Le,"handle")),$t(we,"handleIcon")),$t(Se,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(t){return function(e){e.stopPropagation(),n.target=t,n.prevPos=n.getOrientVal(yt(e));var r=n.availableSpace,i=r.x,a=r.y,o=n.getBBox(),s=o.x,l=o.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,a])-n.getOrientVal([+s,+l])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(t){var e=n.attributes,r=e.slidable,i=e.brushable,a=e.type;t.stopPropagation();var o=n.getOrientVal(yt(t)),s=o-n.prevPos;if(s){var l=n.getRatio(s);switch(n.target){case"start":r&&n.setValuesOffset(l);break;case"end":r&&n.setValuesOffset(0,l);break;case"selection":r&&n.setValuesOffset(l,l);break;case"track":if(!i)return;n.selectionWidth+=l,"range"===a?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0)}n.prevPos=o}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(t){var e=n.attributes,r=e.onChange,i=e.type,a="range"===i?t:t[1],o="range"===i?n.getValues():n.getValues()[1],s=new g("valuechange",{detail:{oldValue:a,value:o}});n.dispatchEvent(s),null==r||r(o)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return y(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var t=Kt(this.attributes,"sparkline");return w(w({zIndex:0},this.availableSpace),t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,e=t.trackLength,n=t.trackSize,r=m(this.getOrientVal([[e,n],[n,e]]),2);return{width:r[0],height:r[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes;t.x,t.y;var e=t.padding,n=m(Rt(e),4),r=n[0],i=n[1],a=n[2],o=n[3],s=this.shape;return{x:o,y:r,width:s.width-(o+i),height:s.height-(r+a)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1),this.attributes.values=t;var n=!1!==e&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},e.prototype.updateSelectionArea=function(t){var e=this.calcSelectionArea();this.foregroundGroup.selectAll(ke.selection.class).each(function(n,r){me(this,e[r],t)})},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&me(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&me(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1);var n=this.values,r=this.clampValues(t);this.attributes.values=r,this.setValues(r),e&&this.onValueChange(n)},e.prototype.renderTrack=function(t){var e=this.attributes,n=e.x,r=e.y,i=Kt(this.attributes,"track");this.trackShape=It(t).maybeAppendByClassName(ke.track,"rect").styles(w(w({x:n,y:r},this.shape),i))},e.prototype.renderBrushArea=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.brushable;this.brushArea=It(t).maybeAppendByClassName(ke.brushArea,"rect").styles(w({x:n,y:r,fill:"transparent",cursor:i?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var e=this,n=this.attributes,r=n.x,i=n.y;mt("horizontal"===n.orientation,It(t).maybeAppendByClassName(ke.sparklineGroup,"g"),function(t){var n=w(w({},e.sparklineStyle),{x:r,y:i});t.maybeAppendByClassName(ke.sparkline,function(){return new fe({style:n})}).update(n)})},e.prototype.renderHandles=function(){var t,e=this,n=this.attributes,r=n.showHandle,i=n.type,a=r?"range"===i?["start","end"]:["end"]:[],o=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll(ke.handle.class).data(a.map(function(t){return{type:t}}),function(t){return t.type}).join(function(t){return t.append(function(t){var n=t.type;return new Pe({style:e.getHandleStyle(n)})}).each(function(t){var e=t.type;this.attr("class","".concat(ke.handle.name," ").concat(e,"-handle"));var n="".concat(e,"Handle");o[n]=this,this.addEventListener("pointerdown",o.onDragStart(e))})},function(t){return t.each(function(t){var e=t.type;this.update(o.getHandleStyle(e))})},function(t){return t.each(function(t){var e=t.type,n="".concat(e,"Handle");o[n]=void 0}).remove()})},e.prototype.renderSelection=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.type,a=e.selectionType;this.foregroundGroup=It(t).maybeAppendByClassName(ke.foreground,"g");var o=Kt(this.attributes,"selection"),s=function(t){return t.style("visibility",function(t){return t.show?"visible":"hidden"}).style("cursor",function(t){return"select"===a?"grab":"invert"===a?"crosshair":"default"}).styles(w(w({},o),{transform:"translate(".concat(n,", ").concat(r,")")}))},l=this;this.foregroundGroup.selectAll(ke.selection.class).data("value"===i?[]:this.calcSelectionArea().map(function(t,e){return{style:w({},t),index:e,show:"select"===a?1===e:1!==e}}),function(t){return t.index}).join(function(t){return t.append("rect").attr("className",ke.selection.name).call(s).each(function(t,e){var n=this;1===e?(l.selectionShape=It(this),this.on("pointerdown",function(t){n.attr("cursor","grabbing"),l.onDragStart("selection")(t)}),l.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),l.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),l.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){n.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){n.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){n.attr("cursor","pointer")})):this.on("pointerdown",l.onDragStart("track"))})},function(t){return t.call(s)},function(t){return t.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderBrushArea(e),this.renderSelection(e)},e.prototype.clampValues=function(t,e){var n;void 0===e&&(e=4);var r=m(this.range,2),i=r[0],a=r[1],o=m(this.getValues().map(function(t){return _t(t,e)}),2),s=o[0],l=o[1],u=Array.isArray(t)?t:[s,null!=t?t:l],c=m((u||[s,l]).map(function(t){return _t(t,e)}),2),h=c[0],p=c[1];if("value"===this.attributes.type)return[0,N(p,i,a)];h>p&&(h=(n=m([p,h],2))[0],p=n[1]);var d=p-h;return d>a-i?[i,a]:h<i?s===i&&l===p?[i,p]:[i,d+i]:p>a?l===a&&s===h?[h,a]:[a-d,a]:[h,p]},e.prototype.calcSelectionArea=function(t){var e=m(this.clampValues(t),2),n=e[0],r=e[1],i=this.availableSpace,a=i.x,o=i.y,s=i.width,l=i.height;return this.getOrientVal([[{y:o,height:l,x:a,width:n*s},{y:o,height:l,x:n*s+a,width:(r-n)*s},{y:o,height:l,x:r*s,width:(1-r)*s}],[{x:a,width:s,y:o,height:n*l},{x:a,width:s,y:n*l+o,height:(r-n)*l},{x:a,width:s,y:r*l,height:(1-r)*l}]])},e.prototype.calcHandlePosition=function(t){var e=this.attributes.handleIconOffset,n=this.availableSpace,r=n.x,i=n.y,a=n.width,o=n.height,s=m(this.clampValues(),2),l=s[0],u=s[1],c="start"===t?-e:e,h=("start"===t?l:u)*this.getOrientVal([a,o])+c;return{x:r+this.getOrientVal([h,a/2]),y:i+this.getOrientVal([o/2,h])}},e.prototype.inferTextStyle=function(t){return"horizontal"===this.attributes.orientation?{}:"start"===t?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===t?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var e,n=this.attributes,r=n.type,i=n.orientation,a=n.formatter,o=n.autoFitLabel,s=Kt(this.attributes,"handle"),l=Kt(s,"label"),u=s.spacing,c=this.getHandleSize(),h=this.clampValues(),p=a("start"===t?h[0]:h[1]),d=new nt({style:w(w(w({},l),this.inferTextStyle(t)),{text:p})}),f=d.getBBox(),g=f.width,v=f.height;if(d.destroy(),!o){if("value"===r)return{text:p,x:0,y:-v-u};var y=u+c+("horizontal"===i?g/2:0);return(e={text:p})["horizontal"===i?"x":"y"]="start"===t?-y:y,e}var b=0,m=0,x=this.availableSpace,S=x.width,L=x.height,k=this.calcSelectionArea()[1],A=k.x,B=k.y,P=k.width,C=k.height,E=u+c;if("horizontal"===i){var O=E+g/2;if("start"===t)b=A-E-g>0?-O:O;else b=S-A-P-E>g?O:-O}else{var M=v+E;m="start"===t?B-c>v?-M:E:L-(B+C)-c>v?M:-E}return{x:b,y:m,text:p}},e.prototype.getHandleLabelStyle=function(t){var e=Kt(this.attributes,"handleLabel");return w(w(w({},e),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,e=Kt(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),r=this.getHandleSize();return w({cursor:n,shape:t,size:r},e)},e.prototype.getHandleStyle=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.showLabel,a=e.showLabelOnInteraction,o=e.orientation,s=this.calcHandlePosition(t),l=s.x,u=s.y,c=this.calcHandleText(t),h=i;return!i&&a&&(h=!!this.target),w(w(w({},$t(this.getHandleIconStyle(),"icon")),$t(w(w({},this.getHandleLabelStyle(t)),c),"label")),{transform:"translate(".concat(l+n,", ").concat(u+r,")"),orientation:o,showLabel:h,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,e=t.handleIconSize,n=t.width,r=t.height;return e||Math.floor((this.getOrientVal([+r,+n])+4)/2.4)},e.prototype.getOrientVal=function(t){var e=m(t,2),n=e[0],r=e[1];return"horizontal"===this.attributes.orientation?n:r},e.prototype.setValuesOffset=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var r=this.attributes.type,i=m(this.getValues(),2),a=[i[0]+("range"===r?t:0),i[1]+e].sort();n?this.setValues(a):this.innerSetValues(a,!0)},e.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,r=e.height;return t/this.getOrientVal([n,r])},e.prototype.dispatchCustomEvent=function(t,e,n){var r=this;t.on(e,function(t){t.stopPropagation(),r.dispatchEvent(new g(n,{detail:t}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){if(this.attributes.scrollable){var e=t.deltaX,n=t.deltaY||e,r=this.getRatio(n);this.setValuesOffset(r,r,!0)}},e.tag="slider",e}(Qt),Ee=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return n.range=[0,1],n.onValueChange=function(t){var e=n.attributes.value;if(t!==e){var r={detail:{oldValue:t,value:e}};n.dispatchEvent(new g("scroll",r)),n.dispatchEvent(new g("valuechange",r))}},n.onTrackClick=function(t){if(n.attributes.slidable){var e=m(n.getLocalPosition(),2),r=e[0],i=e[1],a=m(n.padding,4),o=a[0],s=a[3],l=n.getOrientVal([r+s,i+o]),u=(n.getOrientVal(yt(t))-l)/n.trackLength;n.setValue(u,!0)}},n.onThumbMouseenter=function(t){n.dispatchEvent(new g("thumbMouseenter",{detail:t.detail}))},n.onTrackMouseenter=function(t){n.dispatchEvent(new g("trackMouseenter",{detail:t.detail}))},n.onThumbMouseleave=function(t){n.dispatchEvent(new g("thumbMouseleave",{detail:t.detail}))},n.onTrackMouseleave=function(t){n.dispatchEvent(new g("trackMouseleave",{detail:t.detail}))},n}return y(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return Rt(this.attributes.padding)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.attributes.value,e=m(this.range,2),n=e[0],r=e[1];return N(t,n,r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var t=this.attributes,e=t.viewportLength,n=t.trackLength;return void 0===n?e:n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes.trackSize,e=this.trackLength,n=m(this.padding,4),r=n[0],i=n[1],a=n[2],o=n[3],s=m(this.getOrientVal([[e,t],[t,e]]),2);return{x:o,y:r,width:+s[0]-(o+i),height:+s[1]-(r+a)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.trackSize;return e?n/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.thumbRadius;if(!e)return 0;var r=this.availableSpace,i=r.width,a=r.height;return n||this.getOrientVal([a,i])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(t){void 0===t&&(t=this.value);var e=this.attributes,n=e.viewportLength/e.contentLength,r=m(this.range,2),i=r[0],a=t*(r[1]-i-n);return[a,a+n]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.orientation,a=e.trackSize,o=e.padding,s=e.slidable,l=Kt(this.attributes,"track"),u=Kt(this.attributes,"thumb"),c=w(w({x:n,y:r,brushable:!1,orientation:i,padding:o,selectionRadius:this.thumbRadius,showHandle:!1,slidable:s,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:a,values:this.getValues()},$t(l,"track")),$t(u,"selection"));this.slider=It(t).maybeAppendByClassName("scrollbar",function(){return new Ce({style:c})}).update(c).node()},e.prototype.render=function(t,e){this.renderSlider(e)},e.prototype.setValue=function(t,e){void 0===e&&(e=!1);var n=this.attributes.value,r=m(this.range,2),i=r[0],a=r[1];this.slider.setValues(this.getValues(N(t,i,a)),e),this.onValueChange(n)},e.prototype.bindEvents=function(){var t=this;this.slider.addEventListener("trackClick",function(e){e.stopPropagation(),t.onTrackClick(e.detail)}),this.onHover()},e.prototype.getOrientVal=function(t){return"horizontal"===this.attributes.orientation?t[0]:t[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(Qt),Oe={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new c({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};_({},Oe,{style:{type:"arc"}}),_({},Oe,{style:{}});var Me=lt({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),_e=lt({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function Ne(t){return t.reduce(function(t,e,n){return t.push(b([0===n?"M":"L"],m(e),!1)),t},[])}function je(t,e,n){return"surround"===e.type?function(t,e,n){var r=e.connect,i=void 0===r?"line":r,a=e.center;if("line"===i)return Ne(t);if(!a)return[];var o=Ot(t[0],a),s=n?0:1;return t.reduce(function(t,e,n){return 0===n?t.push(b(["M"],m(e),!1)):t.push(b(["A",o,o,0,0,s],m(e),!1)),t},[])}(t,e,n):Ne(t)}function ze(t,e,n){var r=n.type,i=n.connect,a=n.center,o=n.closed?[["Z"]]:[],s=m([je(t,n),je(e.slice().reverse(),n,!0)],2),l=s[0],u=s[1],c=m([t[0],e.slice(-1)[0]],2),h=c[0],p=c[1],d=function(t,e){return[l,t,u,e,o].flat()};if("line"===i||"surround"===r)return d([b(["L"],m(p),!1)],[b(["L"],m(h),!1)]);if(!a)throw new Error("Arc grid need to specified center");var f=m([Ot(p,a),Ot(h,a)],2),g=f[0],v=f[1];return d([b(["A",g,g,0,0,1],m(p),!1),b(["L"],m(p),!1)],[b(["A",v,v,0,0,0],m(h),!1),b(["L"],m(h),!1)])}var Ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.render=function(t,e){t.type,t.center,t.areaFill,t.closed;var n=x(t,["type","center","areaFill","closed"]),r=function(t){var e=t.data,n=void 0===e?[]:e;return t.closed?n.map(function(t){var e=t.points,n=m(e,1)[0];return w(w({},t),{points:b(b([],m(e),!1),[n],!1)})}):n}(t),i=It(e).maybeAppendByClassName(_e.lineGroup,"g"),a=It(e).maybeAppendByClassName(_e.regionGroup,"g"),o=function(t,e,n,r){var i=n.animate,a=n.isBillboard,o=e.map(function(t,e){return{id:t.id||"grid-line-".concat(e),d:je(t.points,n)}});return t.selectAll(_e.line.class).data(o,function(t){return t.id}).join(function(t){return t.append("path").each(function(t,e){var n=ot(Tt(w({d:t.d},r)),[t,e,o]);this.attr(w({class:_e.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},n))})},function(t){return t.transition(function(t,e){return me(this,ot(Tt(w({d:t.d},r)),[t,e,o]),i.update)})},function(t){return t.transition(function(){var t=this,e=xe(this,i.exit);return ve(e,function(){return t.remove()}),e})}).transitions()}(i,r,t,n),s=function(t,e,n){var r=n.animate,i=n.connect,a=n.areaFill;if(e.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(t){return o[t%o.length]},l=[],u=0;u<e.length-1;u++){var c=m([e[u].points,e[u+1].points],2),h=ze(c[0],c[1],n);l.push({d:h,fill:s(u)})}return t.selectAll(_e.region.class).data(l,function(t,e){return e}).join(function(t){return t.append("path").each(function(t,e){var n=ot(t,[t,e,l]);this.attr(n)}).attr("className",_e.region.name)},function(t){return t.transition(function(t,e){return me(this,ot(t,[t,e,l]),r.update)})},function(t){return t.transition(function(){var t=this,e=xe(this,r.exit);return ve(e,function(){return t.remove()}),e})}).transitions()}(a,r,t);return b(b([],m(o),!1),m(s),!1)},e}(Qt);function Te(t,e){return Object.fromEntries(Object.entries(t).map(function(t){var n=m(t,2);return[n[0],ot(n[1],e)]}))}function He(t,e){return e&&k(e)?t.filter(e):t}function Ve(t,e){var n=e.startAngle;return(e.endAngle-n)*t+n}function Ie(t,e){if("linear"===e.type){var n=m(e.startPos,2),r=n[0],i=n[1],a=m(e.endPos,2),o=a[0],s=a[1],l=m([o-r,s-i],2);return Mt([l[0],l[1]])}var u=rt(Ve(t,e));return[-Math.sin(u),Math.cos(u)]}function Re(t,e,n){var r,i=Ie(t,n);return r=i,"positive"!==e?[r[1],-r[0]]:[-r[1],r[0]]}function We(t,e){return Re(t,e.labelDirection,e)}function De(t,e){return"linear"===e.type?function(t,e){var n=m(e.startPos,2),r=n[0],i=n[1],a=m(e.endPos,2),o=a[0],s=a[1],l=m([o-r,s-i],2);return[r+l[0]*t,i+l[1]*t]}(t,e):function(t,e){var n=e.radius,r=m(e.center,2),i=r[0],a=r[1],o=rt(Ve(t,e));return[i+n*Math.cos(o),a+n*Math.sin(o)]}(t,e)}function Fe(t){return 0===Ie(0,t)[1]}function qe(t){return 0===Ie(0,t)[0]}function Ze(t,e){return e-t===360}function Ke(t,e,n,r,i){var a=e-t,o=m([i,i],2),s=o[0],l=o[1],u=m([rt(t),rt(e)],2),c=u[0],h=u[1],p=function(t){return[n+i*Math.cos(t),r+i*Math.sin(t)]},d=m(p(c),2),f=d[0],g=d[1],v=m(p(h),2),y=v[0],b=v[1];if(Ze(t,e)){var x=m(p((h+c)/2),2);return[["M",f,g],["A",s,l,0,1,0,x[0],x[1]],["A",s,l,0,1,0,y,b]]}var w=a>180?1:0,S=t>e?0:1;return"M".concat(f,",").concat(g,",A").concat(s,",").concat(l,",0,").concat(w,",").concat(S,",").concat(y,",").concat(b)}function $e(t,e,n,r){var i=e.startAngle,a=e.endAngle,o=e.center,s=e.radius;return t.selectAll(Me.line.class).data([{d:Ke.apply(void 0,b(b([i,a],m(o),!1),[s],!1))}],function(t,e){return e}).join(function(t){return t.append("path").attr("className",Me.line.name).styles(e).styles({d:function(t){return t.d}})},function(t){return t.transition(function(){var t=this,e=function(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var i=r.duration,a=void 0===i?0:i,o=wt(e,n),s=Math.ceil(+a/16),l=new Array(s).fill(0).map(function(t,e,n){return{__keyframe_data__:o(e/(n.length-1))}});return t.animate(l,w({fill:"both"},r))}(this,function(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,i=e.center,a=e.radius;return b(b([n,r],m(i),!1),[a],!1)}(this),b(b([i,a],m(o),!1),[s],!1),r.update);if(e){var n=function(){var e=R(t.attributes,"__keyframe_data__");t.style.d=Ke.apply(void 0,b([],m(e),!1))};e.onframe=n,e.onfinish=n}return e}).styles(e)},function(t){return t.remove()}).styles(n).transitions()}function Ue(t){var e=m(t,2),n=m(e[0],2),r=n[0],i=n[1],a=m(e[1],2);return{x1:r,y1:i,x2:a[0],y2:a[1]}}function Ye(t,e,n,r){var i=e.showTrunc,a=e.startPos,o=e.endPos,s=e.truncRange,l=e.lineExtension,u=m([a,o],2),c=m(u[0],2),h=c[0],p=c[1],d=m(u[1],2),f=d[0],g=d[1],v=m(l?function(t,e,n){void 0===n&&(n=[0,0]);var r=m([t,e,n],3),i=m(r[0],2),a=i[0],o=i[1],s=m(r[1],2),l=s[0],u=s[1],c=m(r[2],2),h=c[0],p=c[1],d=m([l-a,u-o],2),f=d[0],g=d[1],v=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)),y=m([-h/v,p/v],2),b=y[0],x=y[1];return[b*f,b*g,x*f,x*g]}(a,o,l):new Array(4).fill(0),4),y=v[0],b=v[1],x=v[2],w=v[3],S=function(e){return t.selectAll(Me.line.class).data(e,function(t,e){return e}).join(function(t){return t.append("line").attr("className",function(t){return"".concat(Me.line.name," ").concat(t.className)}).styles(n).transition(function(t){return me(this,Ue(t.line),!1)})},function(t){return t.styles(n).transition(function(t){return me(this,Ue(t.line),r.update)})},function(t){return t.remove()}).transitions()};if(!i||!s)return S([{line:[[h+y,p+b],[f+x,g+w]],className:Me.line.name}]);var L=m(s,2),k=L[0],A=L[1],B=f-h,P=g-p,C=m([h+B*k,p+P*k],2),E=C[0],O=C[1],M=m([h+B*A,p+P*A],2),_=M[0],N=M[1],j=S([{line:[[h+y,p+b],[E,O]],className:Me.lineFirst.name},{line:[[_,N],[f+x,g+w]],className:Me.lineSecond.name}]);return function(t,e){e.truncRange,e.truncShape,e.lineExtension}(0,e),j}function Xe(t,e,n){var r,i=e.type,a=Kt(e,"line");return r="linear"===i?Ye(t,e,Nt(a,"arrow"),n):$e(t,e,Nt(a,"arrow"),n),function(t,e,n,r){var i,a=n.showArrow,o=n.showTrunc,s=n.lineArrow,l=n.lineArrowOffset,u=n.lineArrowSize;if(i="arc"===e?t.select(Me.line.class):o?t.select(Me.lineSecond.class):t.select(Me.line.class),!a||!s||"arc"===n.type&&Ze(n.startAngle,n.endAngle)){var c=i.node();c&&(c.style.markerEnd=void 0)}else{var h=bt(s);h.attr(r),Ht(h,u),i.style("markerEnd",h).style("markerEndOffset",-l)}}(t,i,e,a),r}function Je(t){var e=t.type,n=t.gridCenter;return"linear"===e?n:n||t.center}function Qe(t,e){var n=e.gridLength;return t.map(function(t,r){var i=t.value,a=m(De(i,e),2),o=a[0],s=a[1],l=m(At(function(t,e){return Re(t,e.gridDirection,e)}(i,e),n),2);return{id:r,points:[[o,s],[o+l[0],s+l[1]]]}})}function tn(t,e,n,r){var i=Kt(n,"grid"),a=i.type,o=i.areaFill,s=Je(n),l=He(e,n.gridFilter),u="segment"===a?Qe(l,n):function(t,e){var n=e.gridControlAngles,r=Je(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||0===n.length)throw new Error("Invalid gridControlAngles");var i=m(r,2),a=i[0],o=i[1];return t.map(function(t,r){var i=t.value,s=m(De(i,e),2),l=s[0],u=s[1],c=m([l-a,u-o],2),h=c[0],p=c[1],d=[];return n.forEach(function(t){var e=rt(t),n=m([Math.cos(e),Math.sin(e)],2),r=n[0],i=n[1],s=h*r-p*i+a,l=h*i+p*r+o;d.push([s,l])}),{points:d,id:r}})}(l,n),c=w(w({},i),{center:s,areaFill:k(o)?l.map(function(t,e){return ot(o,[t,e,l])}):o,animate:r,data:u});return t.selectAll(Me.grid.class).data([1]).join(function(t){return t.append(function(){return new Ge({style:c})}).attr("className",Me.grid.name)},function(t){return t.transition(function(){return this.update(c)})},function(t){return t.remove()}).transitions()}var en=function(){function t(t,e,n,r){this.set(t,e,n,r)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(t,e,n){var r=this,i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=Math.cos(t),u=Math.sin(t),c=e-e*l+n*u,h=n-e*u-n*l;return[[l*i-u*s+c,u*i+l*s+h],[l*o-u*s+c,u*o+l*s+h],[l*i-u*a+c,u*i+l*a+h],[l*o-u*a+c,u*o+l*a+h]]},t.prototype.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},t.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},t}();function nn(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),i=m(r.min,2),a=i[0],o=i[1],s=m(r.max,2),l=s[0],u=s[1],c=t.getBBox(),h=c.width,p=c.height,d=0,f=0,g=a,v=o,y=ft(t);if(y){p-=1.5;var b=y.style.textAlign,x=y.style.textBaseline;"center"===b?g=(a+l)/2:"right"!==b&&"end"!==b||(g=l),"middle"===x?v=(o+u)/2:"bottom"===x&&(v=u)}var w=m(Rt(e),4),S=w[0],L=void 0===S?0:S,k=w[1],A=void 0===k?0:k,B=w[2],P=void 0===B?L:B,C=w[3],E=new en((d+=a)-(void 0===C?A:C),(f+=o)-L,d+h+A,f+p+P);return t.setEulerAngles(n),E.rotatedPoints(rt(n),g,v)}function rn(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function an(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return 0===r?0:r<0?2:1}function on(t,e){var n=an(t[0],t[1],e[0]),r=an(t[0],t[1],e[1]),i=an(e[0],e[1],t[0]),a=an(e[0],e[1],t[1]);return n!==r&&i!==a||(!(0!==n||!rn(t,e[0]))||(!(0!==r||!rn(t,e[1]))||(!(0!==i||!rn(e,t[0]))||!(0!==a||!rn(e,t[1])))))}function sn(t,e){return e.every(function(e){return function(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],i=0,a=0;do{var o=[t[a],t[(a+1)%n]];if(on(o,r)){if(0===an(o[0],e,o[1]))return rn(o,e);i++}a=(a+1)%n}while(0!==a);return!!(1&i)}(t,e)})}function ln(t,e){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some(function(t){return function(t,e){var n=m(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=m(e,4),l=s[0],u=s[1],c=a-r,h=o-i,p=s[2]-l,d=s[3]-u,f=c*d-p*h;if(0===f)return!1;var g=f>0,v=r-l,y=i-u,b=c*y-h*v;if(b<0===g)return!1;var x=p*y-d*v;return x<0!==g&&b>f!==g&&x>f!==g}(e,t)})}function un(t,e,n){var r,i,a=e.crossPadding,o=new Set,s=null,l=function(t,e){var n=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if("arc"===n){var a=t.center,o=t.radius,s=m(a,2),l=s[0],u=s[1],c="negative"===r?0:i,h=-o-c,p=o+c,d=m(Rt(e),4),f=d[0],g=d[1],v=d[2],y=d[3];return new en(l+h-y,u+h-f,l+p+g,u+p+v)}var b=m(t.startPos,2),x=b[0],w=b[1],S=m(t.endPos,2),L=S[0],k=S[1],A=m(qe(t)?[-e,0,e,0]:[0,e,0,-e],4),B=A[0],P=A[1],C=A[2],E=A[3],O=At(We(0,t),i),M=new en(x,w,L,k);return M.x1+=E,M.y1+=B,M.x2+=P+O[0],M.y2+=C+O[1],M}(e,a),u=function(t){return!l||function(t,e,n){var r=t.x1,i=t.x2,a=t.y1,o=t.y2;return sn([[r,a],[i,a],[i,o],[r,o]],nn(e,n))}(l,t)},c=function(t,e){return!t||!t.firstChild||!function(t,e,n){var r,i,a=nn(t,n).flat(1),o=nn(e,n).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var l=L(s),u=l.next();!u.done;u=l.next())if(ln(o,u.value))return!0}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return!1}(t.firstChild,e.firstChild,Rt(n))};try{for(var h=L(t),p=h.next();!p.done;p=h.next()){var d=p.value;u(d)?!s||c(s,d)?s=d:(o.add(s),o.add(d)):o.add(d)}}catch(f){r={error:f}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return Array.from(o)}function cn(t,e){return void 0===e&&(e={}),I(t)?0:"number"==typeof t?t:Math.floor(pt(t,e))}var hn=function(t,e){var n=e.seq,r=void 0===n?2:n;return t.filter(function(t,e){return!(e%r)||(J(t),!1)})},pn=function(t){return t.filter(ht)};var dn=new Map([["hide",function(t,e,n,r){var i=t.length,a=e.keepHeader,o=e.keepTail;if(!(i<=1||2===i&&a&&o)){var s,l,u=hn,c=function(t){return t.forEach(r.show),t},h=2,p=t.slice(),d=t.slice(),f=Math.min.apply(Math,b([1],m(t.map(function(t){return t.getBBox().width})),!1));if("linear"===n.type&&(Fe(n)||qe(n))){var g=Wt(t[0]).left,v=Wt(t[i-1]).right,y=Math.abs(v-g)||1;h=Math.max(Math.floor(i*f/y),h)}for(a&&(s=p.splice(0,1)[0]),o&&(l=p.splice(-1,1)[0],p.reverse()),c(p);h<t.length&&un(pn(l?b(b([l],m(d),!1),[s],!1):b([s],m(d),!1)),n,null==e?void 0:e.margin).length;){if(l&&!s&&h%2==0)p.splice(0,1).forEach(r.hide);else if(l&&s){p.splice(0,1).forEach(r.hide)}d=u(c(p),{seq:h}),h++}}}],["rotate",function(t,e,n,r){var i,a,o=e.optionalAngles,s=void 0===o?[0,45,90]:o,l=e.margin,u=e.recoverWhenFailed,c=void 0===u||u,h=t.map(function(t){return t.getLocalEulerAngles()}),p=function(){return un(t,n,l).length<1},d=function(e){return t.forEach(function(t,n){var i=Array.isArray(e)?e[n]:e;r.rotate(t,+i)})};try{for(var f=L(s),g=f.next();!g.done;g=f.next()){if(d(g.value),p())return}}catch(v){i={error:v}}finally{try{g&&!g.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}c&&d(h)}],["ellipsis",function(t,e,n,r){if(!(t.length<=0)){var i=e.suffix,a=void 0===i?"...":i,o=e.minLength,s=e.maxLength,l=void 0===s?1/0:s,u=e.step,c=void 0===u?" ":u,h=e.margin,p=void 0===h?[0,0,0,0]:h,d=dt(r.getTextShape(t[0])),f=cn(c,d),g=o?cn(o,d):f,v=cn(l,d);(I(v)||v===1/0)&&(v=Math.max.apply(null,t.map(function(t){return t.getBBox().width})));var y=t.slice(),b=m(p,4);b[0],b[1],b[2],b[3];for(var x=function(e){if(y.forEach(function(t){r.ellipsis(r.getTextShape(t),e,a)}),(y=un(t,n,p)).length<1)return{value:void 0}},w=v;w>g+f;w-=f){var S=x(w);if("object"==typeof S)return S.value}}}],["wrap",function(t,e,n,r,i){var a,o=e.maxLines,s=void 0===o?3:o,l=e.recoverWhenFailed,u=void 0===l||l,c=e.margin,h=void 0===c?[0,0,0,0]:c,p=ot(null!==(a=e.wordWrapWidth)&&void 0!==a?a:50,[i]),d=t.map(function(t){return t.attr("maxLines")||1}),f=Math.min.apply(Math,b([],m(d),!1)),g=function(){return un(t,n,h).length<1},v=function(t){var e=t.type,n=t.labelDirection;return"linear"===e&&Fe(t)?"negative"===n?"bottom":"top":"middle"}(n),y=function(e){return t.forEach(function(t,n){var i=Array.isArray(e)?e[n]:e;r.wrap(t,p,i,v)})};if(!(f>s)){if("linear"===n.type&&Fe(n)){if(y(s),g())return}else for(var x=f;x<=s;x++)if(y(x),g())return;u&&y(d)}}]]);function fn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t*("positive"===e?-1:1)},1)}function gn(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function vn(t,e){var n=m(t,2),r=n[0],i=n[1],a=m(e,2),o=a[0],s=a[1],l=m([r*o+i*s,r*s-i*o],2),u=l[0],c=l[1];return Math.atan2(c,u)}function yn(t,e,n){var r,i=n.labelAlign;if(null===(r=e.style.transform)||void 0===r?void 0:r.includes("rotate"))return e.getLocalEulerAngles();var a=We(t.value,n),o=Ie(t.value,n);return"horizontal"===i?0:function(t){var e=(t+360)%180;return xt(e,-90,90)||(e+=180),e}(it("perpendicular"===i?vn([1,0],a):vn([o[0]<0?-1:1,0],o)))}function bn(t,e,n){var r=n.type,i=n.labelAlign,a=We(t,n),o=gn(e),s=gn(it(vn([1,0],a))),l="center",u="middle";return"linear"===r?[90,270].includes(s)&&0===o?(l="center",u=1===a[1]?"top":"bottom"):s%180||![90,270].includes(o)?0===s?(xt(o,0,90,!1,!0)||xt(o,0,90)||xt(o,270,360))&&(l="start"):90===s?xt(o,0,90,!1,!0)?l="start":(xt(o,90,180)||xt(o,270,360))&&(l="end"):270===s?xt(o,0,90,!1,!0)?l="end":(xt(o,90,180)||xt(o,270,360))&&(l="start"):180===s&&(90===o?l="start":(xt(o,0,90)||xt(o,270,360))&&(l="end")):l="center":"parallel"===i?u=xt(s,0,180,!0)?"top":"bottom":"horizontal"===i?xt(s,90,270,!1)?l="end":(xt(s,270,360,!1)||xt(s,0,90))&&(l="start"):"perpendicular"===i&&(l=xt(s,90,270)?"end":"start"),{textAlign:l,textBaseline:u}}function mn(t,e,n){var r=n.showTick,i=n.tickLength,a=n.tickDirection,o=n.labelDirection,s=n.labelSpacing,l=e.indexOf(t),u=ot(s,[t,l,e]),c=m([We(t.value,n),fn(o,a)],2),h=c[0],p=1===c[1]?ot(r?i:0,[t,l,e]):0,d=m(Bt(At(h,u+p),De(t.value,n)),2);return{x:d[0],y:d[1]}}function xn(t,e){"text"===t.nodeName&&t.attr(e)}function wn(t,e){!function(t,e,n,r){var i=e.labelOverlap,a=void 0===i?[]:i;a.length&&a.forEach(function(i){var a=i.type,o=dn.get(a);(function(t,e,n){return!(e.labelOverlap.length<1)&&("hide"===n?!function(t){for(var e=t;e;){if("offscreen"===e.className)return!0;e=e.parent}return!1}(t[0]):"rotate"===n?!t.some(function(t){var e;return!!(null===(e=t.attr("transform"))||void 0===e?void 0:e.includes("rotate"))}):"ellipsis"!==n&&"wrap"!==n||t.filter(function(t){return t.querySelector("text")}).length>=1)})(t,e,a)&&(null==o||o(t,i,e,r,n))})}(this.node().childNodes,t,e,{hide:J,show:X,rotate:function(e,n){!function(t,e,n){e.setLocalEulerAngles(t);var r=bn(e.__data__.value,t,n),i=e.querySelector(Me.labelItem.class);i&&xn(i,r)}(+n,e,t)},ellipsis:function(t,e,n){t&&vt(t,e||1/0,n)},wrap:function(t,e,n){var r,i;t&&(void 0===(r=n)&&(r=2),void 0===i&&(i="top"),gt(t,{wordWrap:!0,wordWrapWidth:e,maxLines:r,textBaseline:i}))},getTextShape:function(t){return t.querySelector("text")}})}function Sn(t,e,n,r,i){var a=n.indexOf(e),o=It(t).append(function(t,e,n,r){var i=r.labelFormatter;return k(i)?function(){return bt(ot(i,[t,e,n,We(t.value,r)]))}:function(){return bt(t.label||"")}}(e,a,n,i)).attr("className",Me.labelItem.name).node(),s=m(Ut(Te(r,[e,a,n])),2),l=s[0],u=s[1],c=u.transform,h=x(u,["transform"]);Yt(o,c);var p=yn(e,o,i);return o.getLocalEulerAngles()||o.setLocalEulerAngles(p),xn(o,w(w({},bn(e.value,p,i)),l)),t.attr(h),o}function Ln(t,e,n,r,i){var a,o,s,l=He(e,n.labelFilter),u=Kt(n,"label"),c=t.selectAll(Me.label.class).data(l,function(t,e){return e}).join(function(t){return t.append("g").attr("className",Me.label.name).transition(function(t){Sn(this,t,e,u,n);var r=mn(t,e,n),i=r.x,a=r.y;return this.style.transform="translate(".concat(i,", ").concat(a,")"),null})},function(t){return t.transition(function(t){var i=function(t,e,n,r){if(void 0===r&&(r="destroy"),function(t,e){return"text"===t.nodeName&&"text"===e.nodeName&&t.attributes.text===e.attributes.text}(t,e))return t.remove(),[null];var i=function(){"destroy"===r?t.destroy():"hide"===r&&J(t),e.isVisible()&&X(e)};if(!n)return i(),[null];var a=n.duration,o=void 0===a?0:a,s=n.delay,l=void 0===s?0:s,u=Math.ceil(+o/2),c=+o/4,h=m(t.getGeometryBounds().center,2),p=h[0],d=h[1],f=m(e.getGeometryBounds().center,2),g=f[0],v=f[1],y=m([(p+g)/2-p,(d+v)/2-d],2),b=y[0],x=y[1],S=t.style.opacity,L=void 0===S?1:S,k=e.style.opacity,A=void 0===k?1:k,B=t.style.transform||"",P=e.style.transform||"",C=t.animate([{opacity:L,transform:"translate(0, 0) ".concat(B)},{opacity:0,transform:"translate(".concat(b,", ").concat(x,") ").concat(B)}],w(w({fill:"both"},n),{duration:l+u+c})),E=e.animate([{opacity:0,transform:"translate(".concat(-b,", ").concat(-x,") ").concat(P),offset:.01},{opacity:A,transform:"translate(0, 0) ".concat(P)}],w(w({fill:"both"},n),{duration:u+c,delay:l+u-c}));return ve(E,i),[C,E]}(this.querySelector(Me.labelItem.class),Sn(this,t,e,u,n),r.update),a=mn(t,e,n),o=a.x,s=a.y,l=me(this,{transform:"translate(".concat(o,", ").concat(s,")")},r.update);return b(b([],m(i),!1),[l],!1)})},function(t){return a=t,t.transition(function(){var t=this,e=xe(this.childNodes[0],r.exit);return ve(e,function(){return It(t).remove()}),e}),a}).transitions();return s=function(){wn.call(t,n,i)},0===(o=c).length?s():Promise.all(o.map(function(t){return null==t?void 0:t.finished})).then(s),c}function kn(t,e){return Re(t,e.tickDirection,e)}function An(t,e,n,r,i){var a=i.tickLength,o=m(function(t,e){var n=m(t,2);return[[0,0],[n[0]*e,n[1]*e]]}(r,ot(a,[t,e,n])),2),s=m(o[0],2),l=s[0],u=s[1],c=m(o[1],2);return{x1:l,x2:c[0],y1:u,y2:c[1]}}function Bn(t,e,n,r,i,a){var o=function(t,e,n,r,i){var a=i.tickFormatter,o=kn(e.value,i),s="line";return k(a)&&(s=function(){return ot(a,[e,n,r,o])}),t.append(s).attr("className",Me.tickItem.name)}(It(this),t,e,n,r);!function(t,e,n,r,i,a,o){var s=kn(t.value,a),l=An(t,e,n,s,a),u=l.x1,c=l.x2,h=l.y1,p=l.y2,d=m(Ut(Te(o,[t,e,n,s])),2),f=d[0],g=d[1];"line"===r.node().nodeName&&r.styles(w({x1:u,x2:c,y1:h,y2:p},f)),i.attr(g),r.styles(f)}(t,e,n,o,this,r,i);var s=m(De(t.value,r),2),l=s[0],u=s[1];return me(this,{transform:"translate(".concat(l,", ").concat(u,")")},a)}var Pn=lt({text:"text"},"title");function Cn(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(t){return t[0]}):t.length>2?[t[0]]:t.split("")}function En(t,e){var n=Object.entries(e).reduce(function(e,n){var r=m(n,2),i=r[0],a=r[1];return t.node().attr(i)||(e[i]=a),e},{});t.styles(n)}var On=function(t){function e(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return y(e,t),e.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,n=t.height,r=t.position,i=t.spacing,a=t.inset,o=this.querySelector(Pn.text.class);if(!o)return new at(0,0,+e,+n);var s=o.getBBox(),l=s.width,u=s.height,c=m(Rt(i),4),h=c[0],p=c[1],d=c[2],f=c[3],g=m([0,0,+e,+n],4),v=g[0],y=g[1],b=g[2],x=g[3],w=Cn(r);if(w.includes("i"))return new at(v,y,b,x);w.forEach(function(t,r){var i,a,o,s;"t"===t&&(i=m(0===r?[u+d,+n-u-d]:[0,+n],2),y=i[0],x=i[1]),"r"===t&&(a=m([+e-l-f],1),b=a[0]),"b"===t&&(o=m([+n-u-h],1),x=o[0]),"l"===t&&(s=m(0===r?[l+p,+e-l-p]:[0,+e],2),v=s[0],b=s[1])});var S=m(Rt(a),4),L=S[0],k=S[1],A=S[2],B=S[3],P=m([B+k,L+A],2),C=P[0],E=P[1];return new at(v+B,y+L,b-C,x-E)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new at(0,0,0,0)},e.prototype.render=function(t,e){var n=this;t.width,t.height,t.position,t.spacing;var r=x(t,["width","height","position","spacing"]),i=m(Ut(r),1)[0],a=function(t){var e,n,r,i,a=t,o=a.width,s=a.height,l=a.position,u=m([+o/2,+s/2],2),c=u[0],h=u[1],p=m([+c,+h,"center","middle"],4),d=p[0],f=p[1],g=p[2],v=p[3],y=Cn(l);return y.includes("l")&&(d=(e=m([0,"start"],2))[0],g=e[1]),y.includes("r")&&(d=(n=m([+o,"end"],2))[0],g=n[1]),y.includes("t")&&(f=(r=m([0,"top"],2))[0],v=r[1]),y.includes("b")&&(f=(i=m([+s,"bottom"],2))[0],v=i[1]),{x:d,y:f,textAlign:g,textBaseline:v}}(t),o=a.x,s=a.y,l=a.textAlign,u=a.textBaseline;mt(!!r.text,It(e),function(t){n.title=t.maybeAppendByClassName(Pn.text,"text").styles(i).call(En,{x:o,y:s,textAlign:l,textBaseline:u}).node()})},e}(Qt);function Mn(t,e,n,r,i){var a=Kt(r,"title"),o=m(Ut(a),2),s=o[0],l=o[1],u=l.transform,c=l.transformOrigin,h=x(l,["transform","transformOrigin"]);e.styles(h);var p=u||function(t,e,n){var r=2*t.getGeometryBounds().halfExtents[1];if("vertical"===e){if("left"===n)return"rotate(-90) translate(0, ".concat(r/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(r/2,")")}return""}(t.node(),s.direction,s.position);t.styles(w(w({},s),{transformOrigin:c})),Yt(t.node(),p);var d=function(t,e,n){var r=n.titlePosition,i=void 0===r?"lb":r,a=n.titleSpacing,o=Cn(i),s=t.node().getLocalBounds(),l=m(s.min,2),u=l[0],c=l[1],h=m(s.halfExtents,2),p=h[0],d=h[1],f=m(e.node().getLocalBounds().halfExtents,2),g=f[0],v=f[1],y=m([u+p,c+d],2),b=y[0],x=y[1],w=m(Rt(a),4),S=w[0],L=w[1],k=w[2],A=w[3];if(["start","end"].includes(i)&&"linear"===n.type){var B=n.startPos,P=n.endPos,C=m("start"===i?[B,P]:[P,B],2),E=C[0],O=C[1],M=Mt([-O[0]+E[0],-O[1]+E[1]]),_=m(At(M,S),2),N=_[0],j=_[1];return{x:E[0]+N,y:E[1]+j}}return o.includes("t")&&(x-=d+v+S),o.includes("r")&&(b+=p+g+L),o.includes("l")&&(b-=p+g+A),o.includes("b")&&(x+=d+v+k),{x:b,y:x}}(It(n._offscreen||n.querySelector(Me.mainGroup.class)),e,r),f=d.x,g=d.y;return me(e.node(),{transform:"translate(".concat(f,", ").concat(g,")")},i)}function _n(t,e,n,r){var i=t.showLine,a=t.showTick,o=t.showLabel,s=mt(i,e.maybeAppendByClassName(Me.lineGroup,"g"),function(e){return Xe(e,t,r)})||[],l=mt(a,e.maybeAppendByClassName(Me.tickGroup,"g"),function(e){return function(t,e,n,r){var i=He(e,n.tickFilter),a=Kt(n,"tick");return t.selectAll(Me.tick.class).data(i,function(t){return t.id||t.label}).join(function(t){return t.append("g").attr("className",Me.tick.name).transition(function(t,e){return Bn.call(this,t,e,i,n,a,!1)})},function(t){return t.transition(function(t,e){return this.removeChildren(),Bn.call(this,t,e,i,n,a,r.update)})},function(t){return t.transition(function(){var t=this,e=xe(this.childNodes[0],r.exit);return ve(e,function(){return t.remove()}),e})}).transitions()}(e,n,t,r)})||[],u=mt(o,e.maybeAppendByClassName(Me.labelGroup,"g"),function(i){return Ln(i,n,t,r,e.node())})||[];return b(b(b([],m(s),!1),m(l),!1),m(u),!1).filter(function(t){return!!t})}var Nn=function(t){function e(e){return t.call(this,e,Oe)||this}return y(e,t),e.prototype.render=function(t,e,n){var r=this,i=t.titleText,a=t.data,o=t.animate,s=t.showTitle,l=t.showGrid,u=t.dataThreshold,c=t.truncRange,h=function(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}(a,u).filter(function(t){var e=t.value;return!(c&&e>c[0]&&e<c[1])}),p=ge(void 0===n?o:n),d=mt(l,It(e).maybeAppendByClassName(Me.gridGroup,"g"),function(e){return tn(e,h,t,p)})||[],f=It(e).maybeAppendByClassName(Me.mainGroup,"g");i&&(!this.initialized&&p.enter||this.initialized&&p.update)&&_n(t,It(this.offscreenGroup),h,ge(!1));var g=_n(t,It(f.node()),h,p),v=mt(s,It(e).maybeAppendByClassName(Me.titleGroup,"g"),function(e){return function(t,e,n,r){var i=n.titleText;return t.selectAll(Me.title.class).data([{title:i}].filter(function(t){return!!t.title}),function(t,e){return t.title}).join(function(a){return a.append(function(){return bt(i)}).attr("className",Me.title.name).transition(function(){return Mn(It(this),t,e,n,r.enter)})},function(i){return i.transition(function(){return Mn(It(this),t,e,n,r.update)})},function(t){return t.remove()}).transitions()}(e,r,t,p)})||[];return b(b(b([],m(d),!1),m(g),!1),m(v),!1).flat().filter(function(t){return!!t})},e}(Qt),jn=lt({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),zn=function(n){function r(t){var r,i,a,o=n.call(this,t,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:(r=0,i=0,a=6,[["M",r-a,i-a],["L",r+a,i],["L",r-a,i+a],["Z"]]),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(t,e){return"".concat(t,"/").concat(e)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return o.playState="idle",o.contentGroup=o.appendChild(new e({class:jn.contentGroup.name})),o.playWindow=o.contentGroup.appendChild(new e({class:jn.playWindow.name})),o.innerCurrPage=o.defaultPage,o}return y(r,n),Object.defineProperty(r.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return N(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageShape",{get:function(){var t=this.pageViews,e=m(function(t){var e;return(null===(e=t[0])||void 0===e?void 0:e.map(function(e,n){return t.map(function(t){return t[n]})}))||[]}(t.map(function(t){var e=t.getBBox();return[e.width,e.height]})).map(function(t){return Math.max.apply(Math,b([],m(t),!1))}),2),n=e[0],r=e[1],i=this.attributes,a=i.pageWidth,o=void 0===a?n:a,s=i.pageHeight;return{pageWidth:o,pageHeight:void 0===s?r:s}},enumerable:!1,configurable:!0}),r.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(r.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var t=n.prototype.getBBox.call(this),e=t.x,r=t.y,i=this.controllerShape,a=this.pageShape,o=a.pageWidth,s=a.pageHeight;return new at(e,r,o+i.width,s)},r.prototype.goTo=function(t){var e=this,n=this.attributes.animate,r=this,i=r.currPage,a=r.playState,o=r.playWindow,s=r.pageViews;if("idle"!==a||t<0||s.length<=0||t>=s.length)return null;s[i].setLocalPosition(0,0),this.prepareFollowingPage(t);var l=m(this.getFollowingPageDiff(t),2),u=l[0],c=l[1];this.playState="running";var h=be(o,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-u,", ").concat(-c,")")}],n);return ve(h,function(){e.innerCurrPage=t,e.playState="idle",e.setVisiblePages([t]),e.updatePageInfo()}),h},r.prototype.prev=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;var r=t?(n-1+e)%e:N(n-1,0,e);return this.goTo(r)},r.prototype.next=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;var r=t?(n+1)%e:N(n+1,0,e);return this.goTo(r)},r.prototype.renderClipPath=function(t){var e=this.pageShape,n=e.pageWidth,r=e.pageHeight;n&&r?(this.clipPath=t.maybeAppendByClassName(jn.clipPath,"rect").styles({width:n,height:r}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0},r.prototype.setVisiblePages=function(t){this.playWindow.children.forEach(function(e,n){t.includes(n)?X(e):J(e)})},r.prototype.adjustControllerLayout=function(){var t=this,e=t.prevBtnGroup,n=t.nextBtnGroup,r=t.pageInfoGroup,i=this.attributes,a=i.orientation,o=i.controllerPadding,s=r.getBBox(),l=s.width;s.height;var u=m("horizontal"===a?[-180,0]:[-90,90],2),c=u[0],h=u[1];e.setLocalEulerAngles(c),n.setLocalEulerAngles(h);var p=e.getBBox(),d=p.width,f=p.height,g=n.getBBox(),v=g.width,y=g.height,b=Math.max(d,l,v),x="horizontal"===a?{offset:[[0,0],[d/2+o,0],[d+l+2*o,0]],textAlign:"start"}:{offset:[[b/2,-f-o],[b/2,0],[b/2,y+o]],textAlign:"center"},w=m(x.offset,3),S=m(w[0],2),L=S[0],k=S[1],A=m(w[1],2),B=A[0],P=A[1],C=m(w[2],2),E=C[0],O=C[1],M=x.textAlign,_=r.querySelector("text");_&&(_.style.textAlign=M),e.setLocalPosition(L,k),r.setLocalPosition(B,P),n.setLocalPosition(E,O)},r.prototype.updatePageInfo=function(){var t,e=this,n=e.currPage,r=e.pageViews,i=e.attributes.formatter;r.length<2||(null===(t=this.pageInfoGroup.querySelector(jn.pageInfo.class))||void 0===t||t.attr("text",i(n+1,r.length)),this.adjustControllerLayout())},r.prototype.getFollowingPageDiff=function(t){var e=this.currPage;if(e===t)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=t<e?-1:1;return"horizontal"===n?[o*i,0]:[0,o*a]},r.prototype.prepareFollowingPage=function(t){var e=this.currPage,n=this.pageViews;if(this.setVisiblePages([t,e]),t!==e){var r=m(this.getFollowingPageDiff(t),2),i=r[0],a=r[1];n[t].setLocalPosition(i,a)}},r.prototype.renderController=function(t){var e=this,n=this.attributes.controllerSpacing,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=this.pageViews.length>=2,s=t.maybeAppendByClassName(jn.controller,"g");if(Q(s.node(),o),o){var l=Kt(this.attributes,"button"),u=Kt(this.attributes,"pageNum"),c=m(Ut(l),2),h=c[0],p=c[1],d=h.size,f=x(h,["size"]),g=!s.select(jn.prevBtnGroup.class).node(),v=s.maybeAppendByClassName(jn.prevBtnGroup,"g").styles(p);this.prevBtnGroup=v.node();var y=v.maybeAppendByClassName(jn.prevBtn,"path"),b=s.maybeAppendByClassName(jn.nextBtnGroup,"g").styles(p);this.nextBtnGroup=b.node(),[y,b.maybeAppendByClassName(jn.nextBtn,"path")].forEach(function(t){t.styles(w(w({},f),{transformOrigin:"center"})),Ht(t.node(),d)});var S=s.maybeAppendByClassName(jn.pageInfoGroup,"g");this.pageInfoGroup=S.node(),S.maybeAppendByClassName(jn.pageInfo,"text").styles(u),this.updatePageInfo(),s.node().setLocalPosition(i+n,a/2),g&&(this.prevBtnGroup.addEventListener("click",function(){e.prev()}),this.nextBtnGroup.addEventListener("click",function(){e.next()}))}},r.prototype.render=function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i;this.attr("transform","translate(".concat(r,", ").concat(a,")"));var o=It(e);this.renderClipPath(o),this.renderController(o),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},r.prototype.bindEvents=function(){var e=this,n=W(function(){return e.render(e.attributes,e)},50);this.playWindow.addEventListener(t.INSERTED,n),this.playWindow.addEventListener(t.REMOVED,n)},r}(Qt);function Gn(t,e,n){return void 0===t&&(t="horizontal"),"horizontal"===t?e:n}oe.registerSymbol("hiddenHandle",function(t,e,n){var r=1.4*n;return[["M",t-n,e-r],["L",t+n,e-r],["L",t+n,e+r],["L",t-n,e+r],["Z"]]}),oe.registerSymbol("verticalHandle",function(t,e,n){var r=1.4*n,i=n/2,a=n/6,o=t+.4*r;return[["M",t,e],["L",o,e+i],["L",t+r,e+i],["L",t+r,e-i],["L",o,e-i],["Z"],["M",o,e+a],["L",t+r-2,e+a],["M",o,e-a],["L",t+r-2,e-a]]}),oe.registerSymbol("horizontalHandle",function(t,e,n){var r=1.4*n,i=n/2,a=n/6,o=e+.4*r;return[["M",t,e],["L",t-i,o],["L",t-i,e+r],["L",t+i,e+r],["L",t+i,o],["Z"],["M",t-a,o],["L",t-a,e+r-2],["M",t+a,o],["L",t+a,e+r-2]]});var Tn=lt({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");var Hn=function(t){function e(e){return t.call(this,e,{span:[1,1],marker:function(){return new h({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return y(e,t),Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return!!t&&("string"==typeof t||"number"==typeof t?""!==t:"function"==typeof t||""!==t.attr("text"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,e=this.valueGroup,n=this.attributes.markerSize,r=t.node().getBBox(),i=r.width,a=r.height,o=e.node().getBBox(),s=o.width,l=o.height;return{markerWidth:n,labelWidth:i,valueWidth:s,height:Math.max(n,a,l)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var e=m(Rt(t),2),n=e[0],r=e[1],i=this.showValue?r:0,a=n+i;return[n/a,i/a]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t,e=this.attributes,n=e.markerSize,r=e.width,i=this.actualSpace,a=i.markerWidth,o=i.height,s=this.actualSpace,l=s.labelWidth,u=s.valueWidth,c=m(this.spacing,2),h=c[0],p=c[1];if(r){var d=r-n-h-p,f=m(this.span,2),g=f[0],v=f[1];l=(t=m([g*d,v*d],2))[0],u=t[1]}return{width:a+l+u+h+p,height:o,markerWidth:a,labelWidth:l,valueWidth:u}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes.spacing;if(!t)return[0,0];var e=m(Rt(t),2),n=e[0],r=e[1];return this.showValue?[n,r]:[n,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,e=t.markerWidth,n=t.labelWidth,r=t.valueWidth,i=t.width,a=t.height,o=m(this.spacing,2),s=o[0];return{height:a,width:i,markerWidth:e,labelWidth:n,valueWidth:r,position:[e/2,e+s,e+n+s+o[1]]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t,e,n=(t=this.markerGroup.node(),(e=t.querySelector(Tn.marker.class))?e.style:{}),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,o=void 0===a?n.strokeWidth:a,s=r.markerLineWidth,l=void 0===s?n.lineWidth:s,u=r.markerStroke,c=void 0===u?n.stroke:u,h=+(o||l||(c?1:0))*Math.sqrt(2),p=this.markerGroup.node().getBBox(),d=p.width,f=p.height;return(1-h/Math.max(d,f))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var e=this,n=this.attributes.marker,r=Kt(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(Tn.markerGroup,"g").style("zIndex",0),mt(!!n,this.markerGroup,function(){var t,i=e.markerGroup.node(),a=null===(t=i.childNodes)||void 0===t?void 0:t[0],o="string"==typeof n?new oe({style:{symbol:n},className:Tn.marker.name}):n();a?o.nodeName===a.nodeName?a instanceof oe?a.update(w(w({},r),{symbol:n})):(!function(t,e){var n,r,i=e.attributes;try{for(var a=L(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=m(o.value,2),l=s[0],u=s[1];"id"!==l&&"className"!==l&&t.attr(l,u)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(a,o),It(a).styles(r)):(a.remove(),It(o).attr("className",Tn.marker.name).styles(r),i.appendChild(o)):(o instanceof oe||It(o).attr("className",Tn.marker.name).styles(r),i.appendChild(o)),e.markerGroup.node().scale(1/e.markerGroup.node().getScale()[0]);var s=Ht(e.markerGroup.node(),e.scaleSize);e.markerGroup.node().style._transform="scale(".concat(s,")")})},e.prototype.renderLabel=function(t){var e=Kt(this.attributes,"label"),n=e.text,r=x(e,["text"]);this.labelGroup=t.maybeAppendByClassName(Tn.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(Tn.label,function(){return bt(n)}).styles(r)},e.prototype.renderValue=function(t){var e=this,n=Kt(this.attributes,"value"),r=n.text,i=x(n,["text"]);this.valueGroup=t.maybeAppendByClassName(Tn.valueGroup,"g").style("zIndex",0),mt(this.showValue,this.valueGroup,function(){e.valueGroup.maybeAppendByClassName(Tn.value,function(){return bt(r)}).styles(i)})},e.prototype.renderBackground=function(t){var e=this.shape,n=e.width,r=e.height,i=Kt(this.attributes,"background");this.background=t.maybeAppendByClassName(Tn.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(Tn.background,"rect").styles(w({width:n,height:r},i))},e.prototype.adjustLayout=function(){var t=this.layout,e=t.labelWidth,n=t.valueWidth,r=t.height,i=m(t.position,3),a=i[0],o=i[1],s=i[2],l=r/2;this.markerGroup.styles({transform:"translate(".concat(a,", ").concat(l,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(o,", ").concat(l,")")}),vt(this.labelGroup.select(Tn.label.class).node(),Math.ceil(e)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(s,", ").concat(l,")")}),vt(this.valueGroup.select(Tn.value.class).node(),Math.ceil(n)))},e.prototype.render=function(t,e){var n=It(e),r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a;n.styles({transform:"translate(".concat(i,", ").concat(o,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.adjustLayout()},e}(Qt),Vn=lt({page:"item-page",navigator:"navigator",item:"item"},"items"),In=function(t,e,n){return void 0===n&&(n=!0),t?e(t):n},Rn=function(t){function n(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:D,mouseenter:D,mouseleave:D})||this;return n.navigatorShape=[0,0],n}return y(n,t),Object.defineProperty(n.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"grid",{get:function(){var t=this.attributes,e=t.gridRow,n=t.gridCol,r=t.data;if(!e&&!n)throw new Error("gridRow and gridCol can not be set null at the same time");return e&&n?[e,n]:e?[e,r.length]:[r.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderData",{get:function(){var t=this.attributes,e=t.data,n=t.layout,r=Kt(this.attributes,"item");return e.map(function(t,i){var a=t.id,o=void 0===a?i:a,s=t.label,l=t.value;return{id:"".concat(o),index:i,style:w({layout:n,labelText:s,valueText:l},Object.fromEntries(Object.entries(r).map(function(n){var r=m(n,2);return[r[0],ot(r[1],[t,i,e])]})))}})},enumerable:!1,configurable:!0}),n.prototype.getGridLayout=function(){var t=this,e=this.attributes,n=e.orientation,r=e.width,i=e.rowPadding,a=e.colPadding,o=m(this.navigatorShape,1)[0],s=m(this.grid,2),l=s[0],u=s[1],c=u*l,h=0;return this.pageViews.children.map(function(e,s){var p,d,f=Math.floor(s/c),g=s%c,v=t.ifHorizontal(u,l),y=[Math.floor(g/v),g%v];"vertical"===n&&y.reverse();var b=m(y,2),x=b[0],w=b[1],S=(r-o-(u-1)*a)/u,L=e.getBBox().height,k=m([0,0],2),A=k[0],B=k[1];return"horizontal"===n?(A=(p=m([h,x*(L+i)],2))[0],B=p[1],h=w===u-1?0:h+S+a):(A=(d=m([w*(S+a),h],2))[0],B=d[1],h=x===l-1?0:h+L+i),{page:f,index:s,row:x,col:w,pageIndex:g,width:S,height:L,x:A,y:B}})},n.prototype.getFlexLayout=function(){var t=this.attributes,e=t.width,n=t.height,r=t.rowPadding,i=t.colPadding,a=m(this.navigatorShape,1)[0],o=m(this.grid,2),s=o[0],l=o[1],u=m([e-a,n],2),c=u[0],h=u[1],p=m([0,0,0,0,0,0,0,0],8),d=p[0],f=p[1],g=p[2],v=p[3],y=p[4],b=p[5],x=p[6],w=p[7];return this.pageViews.children.map(function(t,e){var n,a,o,u,p=t.getBBox(),S=p.width,L=p.height,k=0===x?0:i,A=x+k+S;return A<=c&&In(y,function(t){return t<l})?(n=m([x+k,w,A],3),d=n[0],f=n[1],x=n[2],{width:S,height:L,x:d,y:f,page:g,index:e,pageIndex:v++,row:b,col:y++}):(a=m([b+1,0,0,w+L+r],4),b=a[0],y=a[1],x=a[2],(w=a[3])+L<=h&&In(b,function(t){return t<s})?(o=m([x,w,S],3),d=o[0],f=o[1],x=o[2],{width:S,height:L,x:d,y:f,page:g,index:e,pageIndex:v++,row:b,col:y++}):(u=m([0,0,S,0,g+1,0,0,0],8),d=u[0],f=u[1],x=u[2],w=u[3],g=u[4],v=u[5],b=u[6],y=u[7],{width:S,height:L,x:d,y:f,page:g,index:e,pageIndex:v++,row:b,col:y++}))})},Object.defineProperty(n.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e},enumerable:!1,configurable:!0}),n.prototype.ifHorizontal=function(t,e){return Gn(this.attributes.orientation,t,e)},n.prototype.flattenPage=function(t){t.querySelectorAll(Vn.item.class).forEach(function(e){t.appendChild(e)}),t.querySelectorAll(Vn.page.class).forEach(function(e){t.removeChild(e).destroy()})},n.prototype.renderItems=function(t){var e=this.attributes,n=e.click,r=e.mouseenter,i=e.mouseleave;this.flattenPage(t);var a=this.dispatchCustomEvent.bind(this);It(t).selectAll(Vn.item.class).data(this.renderData,function(t){return t.id}).join(function(t){return t.append(function(t){var e=t.style;return new Hn({style:e})}).attr("className",Vn.item.name).on("click",function(){null==n||n(this),a("itemClick",{item:this})}).on("pointerenter",function(){null==r||r(this),a("itemMouseenter",{item:this})}).on("pointerleave",function(){null==i||i(this),a("itemMouseleave",{item:this})})},function(t){return t.each(function(t){var e=t.style;this.update(e)})},function(t){return t.remove()})},n.prototype.relayoutNavigator=function(){var t,e=this.attributes,n=e.layout,r=e.width,i=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,a=m(this.navigatorShape,2),o=a[0],s=a[1];this.navigator.update("grid"===n?{pageWidth:r-o,pageHeight:i-s}:{})},n.prototype.adjustLayout=function(){var t,n,r=this,i=Object.entries((t=this.itemsLayout,n="page",t.reduce(function(t,e){return(t[e[n]]=t[e[n]]||[]).push(e),t},{}))).map(function(t){var e=m(t,2);return{page:e[0],layouts:e[1]}}),a=b([],m(this.navigator.getContainer().children),!1);i.forEach(function(t){var n=t.layouts,i=r.pageViews.appendChild(new e({className:Vn.page.name}));n.forEach(function(t){var e=t.x,n=t.y,r=t.index,o=t.width,s=t.height,l=a[r];i.appendChild(l),F(l,"__layout__",t),l.update({x:e,y:n,width:o,height:s})})}),this.relayoutNavigator()},n.prototype.renderNavigator=function(t){var e=this.attributes.orientation,n=Kt(this.attributes,"nav"),r=ct({orientation:e},n),i=this;return t.selectAll(Vn.navigator.class).data(["nav"]).join(function(t){return t.append(function(){return new zn({style:r})}).attr("className",Vn.navigator.name).each(function(){i.navigator=this})},function(t){return t.each(function(){this.update(r)})},function(t){return t.remove()}),this.navigator},n.prototype.getBBox=function(){return this.navigator.getBBox()},n.prototype.render=function(t,e){var n=this.attributes.data;if(n&&0!==n.length){var r=this.renderNavigator(It(e));this.renderItems(r.getContainer()),this.adjustLayout()}},n.prototype.dispatchCustomEvent=function(t,e){var n=new g(t,{detail:e});this.dispatchEvent(n)},n}(Qt),Wn=lt({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),Dn={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},Fn=function(t){function e(e){return t.call(this,e,Dn)||this}return y(e,t),e.prototype.render=function(t,e){var n=It(e).maybeAppendByClassName(Wn.markerGroup,"g");this.renderMarker(n);var r=It(e).maybeAppendByClassName(Wn.labelGroup,"g");this.renderLabel(r)},e.prototype.renderMarker=function(t){var e=this,n=this.attributes,r=n.orientation,i=n.markerSymbol,a=void 0===i?Gn(r,"horizontalHandle","verticalHandle"):i;mt(!!a,t,function(t){var n=Kt(e.attributes,"marker"),r=w({symbol:a},n);e.marker=t.maybeAppendByClassName(Wn.marker,function(){return new oe({style:r})}).update(r)})},e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.showLabel,i=n.orientation,a=n.spacing,o=void 0===a?0:a,s=n.formatter;mt(r,t,function(t){var n,r=Kt(e.attributes,"label"),a=r.text,l=x(r,["text"]),u=(null===(n=t.select(Wn.marker.class))||void 0===n?void 0:n.node().getBBox())||{},c=u.width,h=void 0===c?0:c,p=u.height,d=m(Gn(i,[0,(void 0===p?0:p)+o,"center","top"],[h+o,0,"start","middle"]),4),f=d[0],g=d[1],v=d[2],y=d[3];t.maybeAppendByClassName(Wn.label,"text").styles(w(w({},l),{x:f,y:g,text:s(a).toString(),textAlign:v,textBaseline:y}))})},e}(Qt),qn={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},Zn=ct({},qn,{}),Kn=ct({},qn,$t(Dn,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),$n=lt({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),Un=function(t){function e(e){return t.call(this,e,Zn)||this}return y(e,t),e.prototype.renderTitle=function(t,e,n){var r=this.attributes,i=r.showTitle,a=r.titleText,o=Kt(this.attributes,"title"),s=m(Ut(o),2),l=s[0],u=s[1];this.titleGroup=t.maybeAppendByClassName($n.titleGroup,"g").styles(u);var c=w(w({width:e,height:n},l),{text:i?a:""});this.title=this.titleGroup.maybeAppendByClassName($n.title,function(){return new On({style:c})}).update(c)},e.prototype.renderItems=function(t,e){var n=e.x,r=e.y,i=e.width,a=e.height,o=Kt(this.attributes,"title",!0),s=m(Ut(o),2),l=s[0],u=s[1],c=w(w({},l),{width:i,height:a,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName($n.itemsGroup,"g").styles(w(w({},u),{transform:"translate(".concat(n,", ").concat(r,")")}));var h=this;this.itemsGroup.selectAll($n.items.class).data(["items"]).join(function(t){return t.append(function(){return new Rn({style:c})}).attr("className",$n.items.name).each(function(){h.items=It(this)})},function(t){return t.update(c)},function(t){return t.remove()})},e.prototype.adjustLayout=function(){if(this.attributes.showTitle){var t=this.title.node().getAvailableSpace(),e=t.x,n=t.y;this.itemsGroup.node().style.transform="translate(".concat(e,", ").concat(n,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.showTitle,n=t.width,r=t.height;return e?this.title.node().getAvailableSpace():new at(0,0,n,r)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e,n,r=null===(e=this.title)||void 0===e?void 0:e.node(),i=null===(n=this.items)||void 0===n?void 0:n.node();return r&&i?function(t,e){var n=t.attributes,r=n.position,i=n.spacing,a=n.inset,o=n.text,s=t.getBBox(),l=e.getBBox(),u=Cn(r),c=m(Rt(o?i:0),4),h=c[0],p=c[1],d=c[2],f=c[3],g=m(Rt(a),4),v=g[0],y=g[1],b=g[2],x=g[3],w=m([f+p,h+d],2),S=w[0],L=w[1],k=m([x+y,v+b],2),A=k[0],B=k[1];if("l"===u[0])return new at(s.x,s.y,l.width+s.width+S+A,Math.max(l.height+B,s.height));if("t"===u[0])return new at(s.x,s.y,Math.max(l.width+A,s.width),l.height+s.height+L+B);var P=m([e.attributes.width||l.width,e.attributes.height||l.height],2),C=P[0],E=P[1];return new at(l.x,l.y,C+s.width+S+A,E+s.height+L+B)}(r,i):t.prototype.getBBox.call(this)},e.prototype.render=function(t,e){var n=this.attributes,r=n.width,i=n.height,a=n.x,o=void 0===a?0:a,s=n.y,l=void 0===s?0:s,u=It(e);e.style.transform="translate(".concat(o,", ").concat(l,")"),this.renderTitle(u,r,i),this.renderItems(u,this.availableSpace),this.adjustLayout()},e}(Qt),Yn={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},Xn=lt({background:"background",labelGroup:"label-group",label:"label"},"indicator"),Jn=function(n){function r(t){var r=n.call(this,t,Yn)||this;return r.point=[0,0],r.group=r.appendChild(new e({})),r.isMutationObserved=!0,r}return y(r,n),r.prototype.renderBackground=function(){if(this.label){var t=this.attributes,e=t.position,n=t.padding,r=m(Rt(n),4),i=r[0],a=r[1],o=r[2],s=r[3],l=this.label.node().getLocalBounds(),u=l.min,c=l.max,h=new at(u[0]-s,u[1]-i,c[0]+a-u[0]+s,c[1]+o-u[1]+i),p=this.getPath(e,h),d=Kt(this.attributes,"background");this.background=It(this.group).maybeAppendByClassName(Xn.background,"path").styles(w(w({},d),{d:p})),this.group.appendChild(this.label.node())}},r.prototype.renderLabel=function(){var t=this.attributes,e=t.formatter,n=t.labelText,r=Kt(this.attributes,"label"),i=m(Ut(r),2),a=i[0],o=i[1];a.text;var s=x(a,["text"]);(this.label=It(this.group).maybeAppendByClassName(Xn.labelGroup,"g").styles(o),n)&&this.label.maybeAppendByClassName(Xn.label,function(){return bt(e(n))}).style("text",e(n).toString()).selectAll("text").styles(s)},r.prototype.adjustLayout=function(){var t=m(this.point,2),e=t[0],n=t[1],r=this.attributes,i=r.x,a=r.y;this.group.attr("transform","translate(".concat(i-e,", ").concat(a-n,")"))},r.prototype.getPath=function(t,e){var n=this.attributes.radius,r=e.x,i=e.y,a=e.width,o=e.height,s=[["M",r+n,i],["L",r+a-n,i],["A",n,n,0,0,1,r+a,i+n],["L",r+a,i+o-n],["A",n,n,0,0,1,r+a-n,i+o],["L",r+n,i+o],["A",n,n,0,0,1,r,i+o-n],["L",r,i+n],["A",n,n,0,0,1,r+n,i],["Z"]],l={top:4,right:6,bottom:0,left:2}[t],u=this.createCorner([s[l].slice(-2),s[l+1].slice(-2)]);return s.splice.apply(s,b([l+1,1],m(u),!1)),s[0][0]="M",s},r.prototype.createCorner=function(t,e){void 0===e&&(e=10);var n=Dt.apply(void 0,b([],m(t),!1)),r=m(t,2),i=m(r[0],2),a=i[0],o=i[1],s=m(r[1],2),l=s[0],u=s[1],c=m(n?[l-a,[a,l]]:[u-o,[o,u]],2),h=c[0],p=m(c[1],2),d=p[0],f=p[1],g=h/2,v=e*(h/Math.abs(h)),y=v/2,x=v*Math.sqrt(3)/2*.8,w=m([d,d+g-y,d+g,d+g+y,f],5),S=w[0],L=w[1],k=w[2],A=w[3],B=w[4];return n?(this.point=[k,o-x],[["L",S,o],["L",L,o],["L",k,o-x],["L",A,o],["L",B,o]]):(this.point=[a+x,k],[["L",a,S],["L",a,L],["L",a+x,k],["L",a,A],["L",a,B]])},r.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?J(this):X(this)},r.prototype.bindEvents=function(){this.label.on(t.BOUNDS_CHANGED,this.renderBackground)},r.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},r}(Qt);function Qn(t,e){var n=m(function(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(e>=r&&e<=i)return[r,i]}return[e,e]}(t,e),2),r=n[0],i=n[1];return{tick:e>(r+i)/2?i:r,range:[r,i]}}var tr=lt({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function er(t){var e=t.orientation,n=t.size,r=t.length;return Gn(e,[r,n],[n,r])}function nr(t){var e=t.type,n=m(er(t),2),r=n[0],i=n[1];return"size"===e?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function rr(t){return nr(t)}function ir(t){var e,n=t.orientation,r=t.color,i=t.block,a=t.partition;if(k(r)){e=new Array(20).fill(0).map(function(t,e,n){return r(e/(n.length-1))})}else e=r;var o=e.length,s=e.map(function(t){return v(t).toString()});return o?1===o?s[0]:i?function(t,e,n){var r=Array.from(e),i=t.length;return new Array(i).fill(0).reduce(function(e,n,a){var o=r[a%r.length];return e+" ".concat(t[a],":").concat(o).concat(a<i-1?" ".concat(t[a+1],":").concat(o):"")},"l(".concat("horizontal"===n?"0":"270",")"))}(a,s,n):s.reduce(function(t,e,n){return t+" ".concat(n/(o-1),":").concat(e)},"l(".concat(Gn(n,"0","270"),")")):""}function ar(t){var e=t.orientation,n=t.range;if(!n)return[];var r=m(er(t),2),i=r[0],a=r[1],o=m(n,2),s=o[0],l=o[1],u=Gn(e,s*i,0),c=Gn(e,0,s*a),h=Gn(e,l*i,i),p=Gn(e,a,l*a);return[["M",u,c],["L",u,p],["L",h,p],["L",h,c],["Z"]]}var or=function(t){function e(e){return t.call(this,e,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return y(e,t),e.prototype.render=function(t,e){!function(t,e){var n=Kt(e,"track");t.maybeAppendByClassName(tr.track,"path").styles(w({d:nr(e)},n))}(It(e).maybeAppendByClassName(tr.trackGroup,"g"),t),function(t,e){var n=Kt(e,"selection"),r=ir(e),i=t.maybeAppendByClassName(tr.selection,"path").styles(w({d:rr(e),fill:r},n)),a=i.maybeAppendByClassName(tr.clipPath,"path").styles({d:ar(e)}).node();i.style("clipPath",a)}(It(e).maybeAppendByClassName(tr.selectionGroup,"g"),t)},e}(Qt);var sr=function(t){function e(e){var n=t.call(this,e,Kn)||this;return n.eventToOffsetScale=new $({}),n.innerRibbonScale=new $({}),n.cacheLabelBBox=null,n.cacheHandleBBox=null,n.onHovering=function(t){var e=n.attributes,r=e.data,i=e.block;t.stopPropagation();var a=n.getValueByCanvasPoint(t);if(i){var o=Qn(r.map(function(t){return t.value}),a).range,s=n.getRealSelection(o);n.showIndicator((o[0]+o[1])/2,"".concat(s[0],"-").concat(s[1])),n.dispatchIndicated(a,o)}else{var l=n.getTickValue(a);n.showIndicator(l,"".concat(n.getRealValue(l))),n.dispatchIndicated(l)}},n.onDragStart=function(t){return function(e){e.stopPropagation(),n.attributes.slidable&&(n.target=t,n.prevValue=n.getTickValue(n.getValueByCanvasPoint(e)),document.addEventListener("mousemove",n.onDragging),document.addEventListener("touchmove",n.onDragging),document.addEventListener("mouseleave",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("touchend",n.onDragEnd))}},n.onDragging=function(t){var e=n.target;n.updateMouse();var r=m(n.selection,2),i=r[0],a=r[1],o=n.getTickValue(n.getValueByCanvasPoint(t)),s=o-n.prevValue;"start"===e?i!==o&&n.updateSelection(o,a):"end"===e?a!==o&&n.updateSelection(i,o):"ribbon"===e&&0!==s&&(n.prevValue=o,n.updateSelection(s,s,!0))},n.onDragEnd=function(){n.style.cursor="pointer",document.removeEventListener("mousemove",n.onDragging),document.removeEventListener("touchmove",n.onDragging),document.removeEventListener("mouseup",n.onDragEnd),document.removeEventListener("touchend",n.onDragEnd)},n}return y(e,t),Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=this.attributes,e=t.width,n=t.height;return new at(0,0,e,n)},e.prototype.render=function(t,e){var n=this,r=t.showLabel;this.renderTitle(It(e));var i=this.availableSpace,a=i.x,o=i.y,s=It(e).maybeAppendByClassName($n.contentGroup,"g").styles({transform:"translate(".concat(a,", ").concat(o,")")});mt(!!r,s.maybeAppendByClassName($n.labelGroup,"g").styles({zIndex:1}),function(t){n.renderLabel(t)});var l=s.maybeAppendByClassName($n.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=s.maybeAppendByClassName($n.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(l),this.renderIndicator(s),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var t=this.attributes,e=t.data,n=t.domain;return n?{min:n[0],max:n[1]}:function(t){return{min:Math.min.apply(Math,b([],m(t.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,b([],m(t.map(function(t){return t.value})),!1))}}(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var t=this.range,e=t.min,n=t.max;return this.innerRibbonScale.update({domain:[e,n],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var t=m(this.selection,2),e=t[0],n=t[1],r=this.ribbonScale;return[r.map(e),r.map(n)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var t=this.range,e=t.min,n=t.max,r=this.attributes.defaultValue,i=m(void 0===r?[e,n]:r,2);return[i[0],i[1]]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){return Gn(this.attributes.orientation,"function"==typeof t?t():t,"function"==typeof e?e():e)},e.prototype.renderTitle=function(t){var e=this.attributes,n=e.showTitle,r=e.titleText,i=e.width,a=e.height,o=Kt(this.attributes,"title"),s=w(w({},o),{width:i,height:a,text:r}),l=this;t.selectAll($n.title.class).data(n?[r]:[]).join(function(t){return t.append(function(){return new On({style:s})}).attr("className",$n.title.name).each(function(){l.title=this})},function(t){return t.update(s)},function(t){return t.each(function(){l.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var t=this.attributes,e=t.width,n=t.height;return new at(0,0,e,n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){return this.attributes.showTick?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var t=this.attributes,e=t.orientation,n=t.labelDirection;return{vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}}[e][n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var t;if(!this.attributes.showLabel)return new at(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var e=(null===(t=this.label.querySelector(Me.labelGroup.class))||void 0===t?void 0:t.children.slice(-1)[0]).getBBox(),n=e.width,r=e.height;return this.cacheLabelBBox=new at(0,0,n,r),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var t=this.attributes,e=t.showLabel,n=t.labelSpacing,r=void 0===n?0:n;if(!e)return{width:0,height:0,size:0,length:0};var i=this.labelBBox,a=i.width,o=i.height;return{width:a,height:o,size:this.ifHorizontal(o,a)+r+this.labelFixedSpacing,length:this.ifHorizontal(a,o)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var t=this.attributes,e=t.showHandle,n=t.ribbonSize,r=this.availableSpace,i=r.width,a=r.height,o=this.labelShape,s=o.size,l=o.length,u=m(this.ifHorizontal([a,i],[i,a]),2),c=u[0],h=u[1],p=e?this.handleShape:{size:0,length:0},d=p.size,f=p.length,g=this.handleOffsetRatio,v=0,y=this.labelPosition;v=n||(["bottom","right"].includes(y)?Math.min(c-s,(c-d)/g):c*(1-g)>d?Math.max(c-s,0):Math.max((c-s-d)/g,0));var b=Math.max(f,l),x=h-b,w=m(this.ifHorizontal([x,v],[v,x]),2),S=w[0],L=w[1],k=["top","left"].includes(y)?s:0,A=m(this.ifHorizontal([b/2,k],[k,b/2]),2),B=A[0],P=A[1];return new at(B,P,S,L)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var t=this.ribbonBBox,e=t.width,n=t.height;return this.ifHorizontal({size:n,length:e},{size:e,length:n})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(t){var e=this.attributes,n=e.data,r=e.type,i=e.orientation,a=e.color,o=e.block,s=Kt(this.attributes,"ribbon"),l=this.range,u=l.min,c=l.max,h=this.ribbonBBox,p=h.x,d=h.y,f=this.ribbonShape,g=f.length,v=f.size,y=ct({transform:"translate(".concat(p,", ").concat(d,")"),length:g,size:v,type:r,orientation:i,color:a,block:o,partition:n.map(function(t){return(t.value-u)/(c-u)}),range:this.ribbonRange},s);this.ribbon=t.maybeAppendByClassName($n.ribbon,function(){return new or({style:y})}).update(y)},e.prototype.getHandleClassName=function(t){return"".concat($n.prefix("".concat(t,"-handle")))},e.prototype.renderHandles=function(){var t=this.attributes,e=t.showHandle,n=t.orientation,r=Kt(this.attributes,"handle"),i=m(this.selection,2),a=i[0],o=i[1],s=w(w({},r),{orientation:n}),l=r.shape,u="basic"===(void 0===l?"slider":l)?Fn:Pe,c=this;this.handlesGroup.selectAll($n.handle.class).data(e?[{value:a,type:"start"},{value:o,type:"end"}]:[],function(t){return t.type}).join(function(t){return t.append(function(){return new u({style:s})}).attr("className",function(t){var e=t.type;return"".concat($n.handle," ").concat(c.getHandleClassName(e))}).each(function(t){var e=t.type,n=t.value;this.update({labelText:n});var r="".concat(e,"Handle");c[r]=this,this.addEventListener("pointerdown",c.onDragStart(e))})},function(t){return t.update(s).each(function(t){var e=t.value;this.update({labelText:e})})},function(t){return t.each(function(t){var e=t.type,n="".concat(e,"Handle");c[n]=void 0}).remove()})},e.prototype.adjustHandles=function(){var t=m(this.selection,2),e=t[0],n=t[1];this.setHandlePosition("start",e),this.setHandlePosition("end",n)},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new at(0,0,0,0);var t=this.startHandle.getBBox(),e=t.width,n=t.height,r=this.endHandle.getBBox(),i=r.width,a=r.height,o=m([Math.max(e,i),Math.max(n,a)],2),s=o[0],l=o[1];return this.cacheHandleBBox=new at(0,0,s,l),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var t=this.handleBBox,e=t.width,n=t.height,r=m(this.ifHorizontal([n,e],[e,n]),2);return{width:e,height:n,size:r[0],length:r[1]}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(t,e){var n=this.attributes.handleFormatter,r=this.ribbonBBox,i=r.x,a=r.y,o=this.ribbonShape.size,s=this.getOffset(e),l=m(this.ifHorizontal([i+s,a+o*this.handleOffsetRatio],[i+o*this.handleOffsetRatio,a+s]),2),u=l[0],c=l[1],h=this.handlesGroup.select(".".concat(this.getHandleClassName(t))).node();null==h||h.update({transform:"translate(".concat(u,", ").concat(c,")"),formatter:n})},e.prototype.renderIndicator=function(t){var e=Kt(this.attributes,"indicator");this.indicator=t.maybeAppendByClassName($n.indicator,function(){return new Jn({})}).update(e)},Object.defineProperty(e.prototype,"labelData",{get:function(){var t=this;return this.attributes.data.reduce(function(e,n,r,i){var a,o,s=null!==(a=null==n?void 0:n.id)&&void 0!==a?a:r.toString();if(e.push(w(w({},n),{id:s,index:r,type:"value",label:null!==(o=null==n?void 0:n.label)&&void 0!==o?o:n.value.toString(),value:t.ribbonScale.map(n.value)})),r<i.length-1){var l=i[r+1],u=m([n.value,l.value],2),c=u[0],h=u[1],p=(c+h)/2;e.push(w(w({},n),{id:s,index:r,type:"range",range:[c,h],label:[c,h].join("~"),value:t.ribbonScale.map(p)}))}return e},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var t=m(["center","middle"],2),e=t[0],n=t[1],r=this.labelPosition;return"top"===r?n="bottom":"bottom"===r?n="top":"left"===r?e="end":"right"===r&&(e="start"),{labelTextAlign:e,labelTextBaseline:n}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(t){var e=this.attributes,n=e.showTick,r=void 0!==n&&n,i=e.labelFilter,a=e.labelFormatter,o=Kt(this.attributes,"tick"),s=Kt(this.attributes,"label"),l=s.align,u=ct(w({showLine:!1,showGrid:!1,showTick:r,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),$t(o,"tick"),$t(s,"label"),{data:this.labelData}),c={tickFilter:function(t,e,n){return"value"===(null==t?void 0:t.type)&&(!i||i(t,t.index,n.filter(function(t){return"value"!==t.type})))},labelFilter:function(t,e,n){return(null==t?void 0:t.type)===l&&(!i||i(t,t.index,n.filter(function(t){return t.type===l})))},labelFormatter:a},h=w(w(w({},u),c),{labelOverlap:[{type:"hide"}]});this.label=t.maybeAppendByClassName($n.label,function(){return new Nn({style:h})}).node(),this.label.update(h,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var t=this.attributes,e=t.showTick,n=t.labelDirection,r=t.labelSpacing,i=t.tickLength,a=this.ribbonShape.size,o=this.labelPosition,s=this.labelFixedSpacing,l=m([0,0,0],3),u=l[0],c=l[1],h=l[2],p=null!=i?i:a;return e?(h=p,c=s,"positive"===n?"right"===o?(u=p,h=p):"bottom"===o&&(u=h):"negative"===n&&("top"===o||"left"===o)&&(u=a)):"positive"===n?"right"===o?c=p:"bottom"===o&&(u=a+s,c=r):"negative"===n&&("left"===o||"top"===o)&&(c=r),{offset:u,spacing:c,tickLength:h}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){if(this.attributes.showLabel){var t=this.ribbonBBox,e=t.x,n=t.y,r=t.width,i=t.height,a=this.labelAxisStyle,o=a.offset,s=a.spacing,l=a.tickLength,u=m(this.ifHorizontal([[e,n+o],[e+r,n+o]],[[e+o,n+i],[e+o,n]]),2),c=u[0],h=u[1];this.label.update({startPos:c,endPos:h,tickLength:l,labelSpacing:s},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(t,e){if(void 0===e&&(e="".concat(t)),this.attributes.showIndicator&&"number"==typeof t){var n=this.range,r=n.min,i=n.max,a=this.ribbonBBox,o=a.x,s=a.y,l=N(t,r,i),u=this.getOffset(l),c=this.ifHorizontal([u+o,s],[o,u+s]);this.indicator.update({x:c[0],y:c[1],position:this.ifHorizontal("top","left"),labelText:e}),X(this.indicator.node())}else this.hideIndicator()},e.prototype.hideIndicator=function(){J(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(t,e){this.updateSelection(t,e)},e.prototype.updateSelection=function(t,e,n){var r;void 0===n&&(n=!1);var i=m(this.selection,2),a=i[0],o=i[1],s=m([t,e],2),l=s[0],u=s[1];n&&(l+=a,u+=o);var c=this.range,h=c.min,p=c.max;r=m(function(t,e,n){var r,i=m(t,2),a=i[0],o=i[1],s=m(e,2),l=s[0],u=s[1],c=m(n,2),h=c[0],p=c[1],d=m([l,u],2),f=d[0],g=d[1],v=g-f;return f>g&&(f=(r=m([g,f],2))[0],g=r[1]),v>o-a?[a,o]:f<a?h===a&&p===g?[a,g]:[a,v+a]:g>o?p===o&&h===f?[f,o]:[o-v,o]:[f,g]}([h,p],[l,u],this.selection),2),l=r[0],u=r[1],this.update({defaultValue:[l,u]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var t=this.attributes.step,e=void 0===t?1:t,n=this.range,r=n.min,i=n.max;return q(e)?_t(.01*(i-r),0):e},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(t){var e=this.attributes,n=e.data,r=e.block,i=this.range.min;return r?Qn(n.map(function(t){return t.value}),t).tick:function(t,e,n){return n+Math.round((t-n)/e)*e}(t,this.step,i)},e.prototype.getValueByCanvasPoint=function(t){var e=this.range,n=e.min,r=e.max,i=m(this.ribbon.node().getPosition(),2),a=i[0],o=i[1],s=this.ifHorizontal(a,o),l=this.ifHorizontal.apply(this,b([],m(yt(t)),!1))-s;return N(this.getOffset(l,!0),n,r)},e.prototype.getOffset=function(t,e){void 0===e&&(e=!1);var n=this.range,r=n.min,i=n.max,a=this.ribbonShape.length,o=this.eventToOffsetScale;return o.update({domain:[r,i],range:[0,a]}),e?o.invert(t):o.map(t)},e.prototype.getRealSelection=function(t){var e=this.range.max,n=m(t,2),r=n[0],i=n[1];return this.ifHorizontal([r,i],[e-i,e-r])},e.prototype.getRealValue=function(t){var e=this.range.max;return this.ifHorizontal(t,e-t)},e.prototype.dispatchSelection=function(){var t=this.getRealSelection(this.selection),e=new g("valuechange",{detail:{value:t}});this.dispatchEvent(e)},e.prototype.dispatchIndicated=function(t,e){var n=this,r=this.range.max,i=this.ifHorizontal(function(){return{value:t,range:e}},function(){return{value:r-t,range:e?n.getRealSelection(e):void 0}}),a=new g("indicate",{detail:i});this.dispatchEvent(a)},e}(Qt);function lr(t){return void 0===t&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var ur={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function cr(t){var e;void 0===t&&(t="");var n=lr(t);return(e={})[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=w({flex:1},ur),e[".".concat(n.VALUE)]=w({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},ur),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var hr=function(t){function e(e){var n,r,i=this,a=null===(r=null===(n=e.style)||void 0===n?void 0:n.template)||void 0===r?void 0:r.prefixCls,o=lr(a);return(i=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(o.NAME,'">\n          <span class="').concat(o.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(o.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(o.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:cr(a)})||this).timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return y(e,t),Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,e=t.data,n=t.template;return e.map(function(t,e){var r=t.name,i=void 0===r?"":r,a=t.color,o=void 0===a?"black":a,s=t.index,l=x(t,["name","color","index"]),u=w({name:i,color:o,index:null!=s?s:e},l);return Z(K(n.item,u))})},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var e;null===(e=this.element)||void 0===e||e.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(t,e){var n=this;if(void 0!==t&&void 0!==e){var r=function(){n.attributes.x=null!=t?t:n.attributes.x,n.attributes.y=null!=e?e:n.attributes.y,n.updatePosition()};"hidden"===this.element.style.visibility?this.closeTransition(r):r()}this.element.style.visibility="visible"},e.prototype.hide=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.attributes.enterable&&this.isCursorEntered(t,e)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=Z(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&("string"==typeof t?this.element.innerHTML=t:Xt(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,e,n=this.attributes,r=n.template,i=n.title,a=n.enterable,o=n.style,s=n.content,l=lr(r.prefixCls),u=this.element;if(this.element.style.pointerEvents=a?"auto":"none",s)this.renderCustomContent();else{i?(u.innerHTML=r.title,u.getElementsByClassName(l.TITLE)[0].innerHTML=i):null===(e=null===(t=u.getElementsByClassName(l.TITLE))||void 0===t?void 0:t[0])||void 0===e||e.remove();var c=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=l.LIST,Xt(h,c);var p=this.element.querySelector(".".concat(l.LIST));p?p.replaceWith(h):u.appendChild(h)}!function(t,e){Object.entries(e).forEach(function(e){var n=m(e,2),r=n[0],i=n[1];b([t],m(t.querySelectorAll(r)),!1).filter(function(t){return t.matches(r)}).forEach(function(t){t&&(t.style.cssText+=Object.entries(i).reduce(function(t,e){return"".concat(t).concat(e.join(":"),";")},""))})})}(u,o)},e.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,r=e.offset,i=(t||n).split("-"),a={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},o=this.elementSize,s=o.width,l=o.height,u=[-s/2,-l/2];return i.forEach(function(t){var e=m(u,2),n=e[0],i=e[1],o=m(a[t],2),c=o[0],h=o[1];u=[n+(s/2+r[0])*c,i+(l/2+r[1])*h]}),u},e.prototype.setOffsetPosition=function(t){var e=m(t,2),n=e[0],r=e[1],i=this.attributes,a=i.x,o=void 0===a?0:a,s=i.y,l=void 0===s?0:s,u=i.container,c=u.x,h=u.y;this.element.style.left="".concat(+o+c+n,"px"),this.element.style.top="".concat(+l+h+r,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,e=void 0===t?60:t,n=Date.now();this.timestamp>0&&n-this.timestamp<e||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var e=m(t,2),n=e[0],r=e[1],i=this.attributes,a=i.x,o=i.y,s=i.bounding,l=i.position;if(!s)return[n,r];var u=this.element,c=u.offsetWidth,h=u.offsetHeight,p=m([+a+n,+o+r],2),d=p[0],f=p[1],g={left:"right",right:"left",top:"bottom",bottom:"top"},v=s.x,y=s.y,b={left:d<v,right:d+c>v+s.width,top:f<y,bottom:f+h>y+s.height},x=[];l.split("-").forEach(function(t){b[t]?x.push(g[t]):x.push(t)});var w=x.join("-");return this.getRelativeOffsetFromCursor(w)},e.prototype.isCursorEntered=function(t,e){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,a=n.width,o=n.height;return new at(r,i,a,o).isPointIn(t,e)}return!1},e.prototype.closeTransition=function(t){var e=this,n=this.element.style.transition;this.element.style.transition="none",t(),setTimeout(function(){e.element.style.transition=n},10)},e.tag="tooltip",e}(Qt),pr=function(e){function n(n){var r=e.call(this,n)||this;r.layoutEvents=[t.BOUNDS_CHANGED,t.INSERTED,t.REMOVED],r.$margin=Rt(0),r.$padding=Rt(0);var i=n.style||{},a=i.margin,o=void 0===a?0:a,s=i.padding,l=void 0===s?0:s;return r.margin=o,r.padding=l,r.isMutationObserved=!0,r.bindEvents(),r}return y(n,e),Object.defineProperty(n.prototype,"margin",{get:function(){return this.$margin},set:function(t){this.$margin=Rt(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding=Rt(t)},enumerable:!1,configurable:!0}),n.prototype.getBBox=function(){var t=this.attributes,e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,a=t.width,o=t.height,s=m(this.$margin,4),l=s[0],u=s[1],c=s[2],h=s[3];return new at(n-h,i-l,a+h+u,o+l+c)},n.prototype.appendChild=function(t,n){return t.isMutationObserved=!0,e.prototype.appendChild.call(this,t,n),t},n.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,n=t.height,r=m(this.$padding,4),i=r[0],a=r[1],o=r[2],s=r[3],l=m(this.$margin,4),u=l[0],c=l[3];return new at(s+c,i+u,e-s-a,n-i-o)},n.prototype.layout=function(){if(this.attributes.display&&this.isConnected&&!this.children.some(function(t){return!t.isConnected}))try{var t=this.attributes,e=t.x,n=t.y;this.style.transform="translate(".concat(e,", ").concat(n,")");var r=function(t,e,n){if(0===e.length)return[];var r={flex:Lt,grid:kt},i=n.display in r?r[n.display]:null;return(null==i?void 0:i.call(null,t,e,n))||[]}(this.getAvailableSpace(),this.children.map(function(t){return t.getBBox()}),this.attributes);this.children.forEach(function(t,e){var n=r[e],i=n.x,a=n.y;t.style.transform="translate(".concat(i,", ").concat(a,")")})}catch(i){}},n.prototype.bindEvents=function(){var t=this;this.layoutEvents.forEach(function(e){t.addEventListener(e,function(e){e.target&&(e.target.isMutationObserved=!0,t.layout())})})},n.prototype.attributeChangedCallback=function(t,e,n){"margin"===t?this.margin=n:"padding"===t&&(this.padding=n),this.layout()},n}(e);export{Nn as A,Un as C,pr as L,oe as M,Ce as S,hr as T,sr as a,Ee as b};
