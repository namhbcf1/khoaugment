import{c as e}from"./vendor-classnames-Bjqz8XQ3.js";import{R as n,r as t}from"./react-vendor-D_ybsntB.js";import{e as o,j as a,k as r,f as l,g as s,h as u,d as c}from"./polyfills-B4r5O4me.js";import{k as i,o as f}from"./vendor-rc-util-Cfhh6bGy.js";function d(e,n,t){var o=n.cloneNode(!0),a=Object.create(e,{target:{value:o},currentTarget:{value:o}});return o.value=t,"number"==typeof n.selectionStart&&"number"==typeof n.selectionEnd&&(o.selectionStart=n.selectionStart,o.selectionEnd=n.selectionEnd),o.setSelectionRange=function(){n.setSelectionRange.apply(n,arguments)},a}function p(e,n,t,o){if(t){var a=n;"click"!==n.type?"file"===e.type||void 0===o?t(a):t(a=d(n,e,o)):t(a=d(n,e,""))}}function v(e,n){if(e){e.focus(n);var t=(n||{}).cursor;if(t){var o=e.value.length;switch(t){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(o,o);break;default:e.setSelectionRange(0,o)}}}}var m=n.forwardRef(function(s,u){var c,i,f,d=s.inputElement,p=s.children,v=s.prefixCls,m=s.prefix,x=s.suffix,g=s.addonBefore,y=s.addonAfter,h=s.className,E=s.style,w=s.disabled,C=s.readOnly,N=s.focused,b=s.triggerFocus,S=s.allowClear,R=s.value,F=s.handleReset,k=s.hidden,j=s.classes,B=s.classNames,W=s.dataAttrs,D=s.styles,I=s.components,K=s.onClear,A=null!=p?p:d,z=(null==I?void 0:I.affixWrapper)||"span",L=(null==I?void 0:I.groupWrapper)||"span",P=(null==I?void 0:I.wrapper)||"span",U=(null==I?void 0:I.groupAddon)||"span",H=t.useRef(null),M=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(s),O=t.cloneElement(A,{value:R,className:e(null===(c=A.props)||void 0===c?void 0:c.className,!M&&(null==B?void 0:B.variant))||null}),T=t.useRef(null);if(n.useImperativeHandle(u,function(){return{nativeElement:T.current||H.current}}),M){var V=null;if(S){var q=!w&&!C&&R,G="".concat(v,"-clear-icon"),J="object"===o(S)&&null!=S&&S.clearIcon?S.clearIcon:"âœ–";V=n.createElement("button",{type:"button",tabIndex:-1,onClick:function(e){null==F||F(e),null==K||K()},onMouseDown:function(e){return e.preventDefault()},className:e(G,a(a({},"".concat(G,"-hidden"),!q),"".concat(G,"-has-suffix"),!!x))},J)}var Q="".concat(v,"-affix-wrapper"),X=e(Q,a(a(a(a(a({},"".concat(v,"-disabled"),w),"".concat(Q,"-disabled"),w),"".concat(Q,"-focused"),N),"".concat(Q,"-readonly"),C),"".concat(Q,"-input-with-clear-btn"),x&&S&&R),null==j?void 0:j.affixWrapper,null==B?void 0:B.affixWrapper,null==B?void 0:B.variant),Y=(x||S)&&n.createElement("span",{className:e("".concat(v,"-suffix"),null==B?void 0:B.suffix),style:null==D?void 0:D.suffix},V,x);O=n.createElement(z,r({className:X,style:null==D?void 0:D.affixWrapper,onClick:function(e){var n;null!==(n=H.current)&&void 0!==n&&n.contains(e.target)&&(null==b||b())}},null==W?void 0:W.affixWrapper,{ref:H}),m&&n.createElement("span",{className:e("".concat(v,"-prefix"),null==B?void 0:B.prefix),style:null==D?void 0:D.prefix},m),O,Y)}if(function(e){return!(!e.addonBefore&&!e.addonAfter)}(s)){var Z="".concat(v,"-group"),$="".concat(Z,"-addon"),_="".concat(Z,"-wrapper"),ee=e("".concat(v,"-wrapper"),Z,null==j?void 0:j.wrapper,null==B?void 0:B.wrapper),ne=e(_,a({},"".concat(_,"-disabled"),w),null==j?void 0:j.group,null==B?void 0:B.groupWrapper);O=n.createElement(L,{className:ne,ref:T},n.createElement(P,{className:ee},g&&n.createElement(U,{className:$},g),O,y&&n.createElement(U,{className:$},y)))}return n.cloneElement(O,{className:e(null===(i=O.props)||void 0===i?void 0:i.className,h)||null,style:l(l({},null===(f=O.props)||void 0===f?void 0:f.style),E),hidden:k})}),x=["show"];function g(e,n){return t.useMemo(function(){var t={};n&&(t.show="object"===o(n)&&n.formatter?n.formatter:!!n);var a=t=l(l({},t),e),r=a.show,u=s(a,x);return l(l({},u),{},{show:!!r,showFormatter:"function"==typeof r?r:void 0,strategy:u.strategy||function(e){return e.length}})},[e,n])}var y=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],h=t.forwardRef(function(o,d){var x=o.autoComplete,h=o.onChange,E=o.onFocus,w=o.onBlur,C=o.onPressEnter,N=o.onKeyDown,b=o.onKeyUp,S=o.prefixCls,R=void 0===S?"rc-input":S,F=o.disabled,k=o.htmlSize,j=o.className,B=o.maxLength,W=o.suffix,D=o.showCount,I=o.count,K=o.type,A=void 0===K?"text":K,z=o.classes,L=o.classNames,P=o.styles,U=o.onCompositionStart,H=o.onCompositionEnd,M=s(o,y),O=t.useState(!1),T=u(O,2),V=T[0],q=T[1],G=t.useRef(!1),J=t.useRef(!1),Q=t.useRef(null),X=t.useRef(null),Y=function(e){Q.current&&v(Q.current,e)},Z=i(o.defaultValue,{value:o.value}),$=u(Z,2),_=$[0],ee=$[1],ne=null==_?"":String(_),te=t.useState(null),oe=u(te,2),ae=oe[0],re=oe[1],le=g(I,D),se=le.max||B,ue=le.strategy(ne),ce=!!se&&ue>se;t.useImperativeHandle(d,function(){var e;return{focus:Y,blur:function(){var e;null===(e=Q.current)||void 0===e||e.blur()},setSelectionRange:function(e,n,t){var o;null===(o=Q.current)||void 0===o||o.setSelectionRange(e,n,t)},select:function(){var e;null===(e=Q.current)||void 0===e||e.select()},input:Q.current,nativeElement:(null===(e=X.current)||void 0===e?void 0:e.nativeElement)||Q.current}}),t.useEffect(function(){J.current&&(J.current=!1),q(function(e){return(!e||!F)&&e})},[F]);var ie=function(e,n,t){var o,a,r=n;if(!G.current&&le.exceedFormatter&&le.max&&le.strategy(n)>le.max)n!==(r=le.exceedFormatter(n,{max:le.max}))&&re([(null===(o=Q.current)||void 0===o?void 0:o.selectionStart)||0,(null===(a=Q.current)||void 0===a?void 0:a.selectionEnd)||0]);else if("compositionEnd"===t.source)return;ee(r),Q.current&&p(Q.current,e,h,r)};t.useEffect(function(){var e;ae&&(null===(e=Q.current)||void 0===e||e.setSelectionRange.apply(e,c(ae)))},[ae]);var fe,de=function(e){ie(e,e.target.value,{source:"change"})},pe=function(e){G.current=!1,ie(e,e.currentTarget.value,{source:"compositionEnd"}),null==H||H(e)},ve=function(e){C&&"Enter"===e.key&&!J.current&&(J.current=!0,C(e)),null==N||N(e)},me=function(e){"Enter"===e.key&&(J.current=!1),null==b||b(e)},xe=function(e){q(!0),null==E||E(e)},ge=function(e){J.current&&(J.current=!1),q(!1),null==w||w(e)},ye=ce&&"".concat(R,"-out-of-range");return n.createElement(m,r({},M,{prefixCls:R,className:e(j,ye),handleReset:function(e){ee(""),Y(),Q.current&&p(Q.current,e,h)},value:ne,focused:V,triggerFocus:Y,suffix:function(){var t=Number(se)>0;if(W||le.show){var o=le.showFormatter?le.showFormatter({value:ne,count:ue,maxLength:se}):"".concat(ue).concat(t?" / ".concat(se):"");return n.createElement(n.Fragment,null,le.show&&n.createElement("span",{className:e("".concat(R,"-show-count-suffix"),a({},"".concat(R,"-show-count-has-suffix"),!!W),null==L?void 0:L.count),style:l({},null==P?void 0:P.count)},o),W)}return null}(),disabled:F,classes:z,classNames:L,styles:P,ref:X}),(fe=f(o,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]),n.createElement("input",r({autoComplete:x},fe,{onChange:de,onFocus:xe,onBlur:ge,onKeyDown:ve,onKeyUp:me,className:e(R,a({},"".concat(R,"-disabled"),F),null==L?void 0:L.input),style:null==P?void 0:P.input,ref:Q,size:k,type:A,onCompositionStart:function(e){G.current=!0,null==U||U(e)},onCompositionEnd:pe}))))});export{m as B,h as I,p as r,v as t,g as u};
