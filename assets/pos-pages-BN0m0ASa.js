import{r as e,j as t,R as n,l as s,u as i}from"./react-vendor-D_ybsntB.js";import{A as l,P as r,u as a}from"./common-components-Cl8eBnCL.js";import{j as c,C as d,R as o,a as h,B as x,S as m,T as p,I as u,A as j,m as g,D as y,b as v,k as f,h as S,_ as T,s as b,E as C,t as k,F as I,z as A,p as w,c as E,L as N,l as _,f as P,d as D,g as O,W as M,x as R,$ as V,u as z,y as B,Y as H,v as F,q as L,a0 as q,e as G}from"./antd-core-DVlmEpkB.js";import{by as $,aO as U,I as K,aq as Y,L as W,a6 as X,a3 as Q,_ as Z,l as J,as as ee,b as te,U as ne,X as se,F as ie,D as le,au as re,bz as ae,C as ce,j as de,bA as oe,o as he,a2 as xe,a0 as me,aE as pe,z as ue,aR as je,i as ge,V as ye,d as ve,bB as fe,A as Se,aj as Te,a5 as be,bt as Ce,bx as ke,v as Ie,w as Ae,ag as we,P as Ee,aw as Ne,al as _e,bC as Pe,ar as De,f as Oe,B as Me,Q as Re,r as Ve,M as ze}from"./antd-icons-DMCzxaTm.js";import{e as Be}from"./ai-features-DMPRBddn.js";import{d as He}from"./datetime-CZsEG1Fw.js";import{Q as Fe}from"./vendor-qrcode.react-D2-ly9fM.js";const Le={ADMIN:"admin",CASHIER:"cashier",STAFF:"staff",CUSTOMER:"customer"},qe={DASHBOARD_VIEW:"dashboard.view",PRODUCTS_VIEW:"products.view",PRODUCTS_CREATE:"products.create",PRODUCTS_UPDATE:"products.update",PRODUCTS_DELETE:"products.delete",INVENTORY_VIEW:"inventory.view",INVENTORY_UPDATE:"inventory.update",ORDERS_VIEW:"orders.view",ORDERS_CREATE:"orders.create",ORDERS_UPDATE:"orders.update",ORDERS_DELETE:"orders.delete",CUSTOMERS_VIEW:"customers.view",CUSTOMERS_CREATE:"customers.create",CUSTOMERS_UPDATE:"customers.update",CUSTOMERS_DELETE:"customers.delete",STAFF_VIEW:"staff.view",STAFF_CREATE:"staff.create",STAFF_UPDATE:"staff.update",STAFF_DELETE:"staff.delete",REPORTS_VIEW:"reports.view",REPORTS_CREATE:"reports.create",SETTINGS_VIEW:"settings.view",SETTINGS_UPDATE:"settings.update",POS_USE:"pos.use",POS_DISCOUNT:"pos.discount",POS_REFUND:"pos.refund",POS_VOID:"pos.void",POS_CASH_DRAWER:"pos.cash_drawer",ANALYTICS_VIEW:"analytics.view",ANALYTICS_EXPORT:"analytics.export",FINANCIAL_REPORTS:"financial.reports",PROFIT_MARGINS:"profit.margins",AI_USE:"ai.use",AI_CONFIGURE:"ai.configure",AI_INSIGHTS:"ai.insights",GAMIFICATION_VIEW:"gamification.view",GAMIFICATION_MANAGE:"gamification.manage",ACHIEVEMENTS_VIEW:"achievements.view",ACHIEVEMENTS_MANAGE:"achievements.manage",SYSTEM_LOGS:"system.logs",BACKUP_RESTORE:"backup.restore",INTEGRATIONS_MANAGE:"integrations.manage",STAFF_PERFORMANCE:"staff.performance",STAFF_SCHEDULE:"staff.schedule",STAFF_PAYROLL:"staff.payroll"},Ge={[Le.ADMIN]:[qe.DASHBOARD_VIEW,qe.PRODUCTS_VIEW,qe.PRODUCTS_CREATE,qe.PRODUCTS_UPDATE,qe.PRODUCTS_DELETE,qe.INVENTORY_VIEW,qe.INVENTORY_UPDATE,qe.ORDERS_VIEW,qe.ORDERS_CREATE,qe.ORDERS_UPDATE,qe.ORDERS_DELETE,qe.CUSTOMERS_VIEW,qe.CUSTOMERS_CREATE,qe.CUSTOMERS_UPDATE,qe.CUSTOMERS_DELETE,qe.STAFF_VIEW,qe.STAFF_CREATE,qe.STAFF_UPDATE,qe.STAFF_DELETE,qe.REPORTS_VIEW,qe.REPORTS_CREATE,qe.SETTINGS_VIEW,qe.SETTINGS_UPDATE,qe.POS_USE,qe.POS_DISCOUNT,qe.POS_REFUND,qe.POS_VOID,qe.POS_CASH_DRAWER,qe.ANALYTICS_VIEW,qe.ANALYTICS_EXPORT,qe.FINANCIAL_REPORTS,qe.PROFIT_MARGINS,qe.AI_USE,qe.AI_CONFIGURE,qe.AI_INSIGHTS,qe.GAMIFICATION_VIEW,qe.GAMIFICATION_MANAGE,qe.ACHIEVEMENTS_VIEW,qe.ACHIEVEMENTS_MANAGE,qe.SYSTEM_LOGS,qe.BACKUP_RESTORE,qe.INTEGRATIONS_MANAGE,qe.STAFF_PERFORMANCE,qe.STAFF_SCHEDULE,qe.STAFF_PAYROLL],[Le.CASHIER]:[qe.DASHBOARD_VIEW,qe.POS_USE,qe.POS_DISCOUNT,qe.POS_CASH_DRAWER,qe.ORDERS_VIEW,qe.ORDERS_CREATE,qe.ORDERS_UPDATE,qe.CUSTOMERS_VIEW,qe.CUSTOMERS_CREATE,qe.CUSTOMERS_UPDATE,qe.PRODUCTS_VIEW,qe.INVENTORY_VIEW,qe.GAMIFICATION_VIEW,qe.ACHIEVEMENTS_VIEW],[Le.STAFF]:[qe.DASHBOARD_VIEW,qe.PRODUCTS_VIEW,qe.PRODUCTS_CREATE,qe.PRODUCTS_UPDATE,qe.INVENTORY_VIEW,qe.INVENTORY_UPDATE,qe.CUSTOMERS_VIEW,qe.CUSTOMERS_CREATE,qe.CUSTOMERS_UPDATE,qe.ORDERS_VIEW,qe.ORDERS_CREATE,qe.ANALYTICS_VIEW,qe.AI_USE,qe.AI_INSIGHTS,qe.GAMIFICATION_VIEW,qe.ACHIEVEMENTS_VIEW],[Le.CUSTOMER]:[qe.GAMIFICATION_VIEW,qe.ACHIEVEMENTS_VIEW]},$e=(e,t)=>e===t,Ue=(e,t)=>t.includes(e),Ke=(e,t)=>(Ge[e]||[]).includes(t),Ye=(e,t)=>{const n=Ge[e]||[];return t.some(e=>n.includes(e))},We=()=>{const t=e.useContext(l);if(!t)throw new Error("useAuth must be used within an AuthProvider");const{user:n,loading:s,login:i,logout:r,refreshToken:a,updateProfile:c,error:d,clearError:o}=t,h={hasRole:e=>$e(n,e),hasAnyRole:e=>Ue(n,e),hasAllRoles:e=>{return t=n,e.every(e=>t===e);var t},hasPermission:e=>Ke(n,e),hasAnyPermission:e=>Ye(n,e),hasAllPermissions:e=>((e,t)=>{const n=Ge[e]||[];return t.every(e=>n.includes(e))})(n,e),getUserPermissions:()=>Ge[n]||[],isFeatureEnabled:e=>!0,checkBusinessRule:(e,t)=>!0,isAdmin:$e(n,"admin"),isManager:Ue(n,["admin","manager"]),isCashier:Ue(n,["admin","manager","cashier"]),isStaff:Ue(n,["admin","manager","cashier","staff"]),isAuthenticated:!!n,isLoading:s};return{user:n,loading:s,error:d,login:i,logout:r,refreshToken:a,updateProfile:c,clearError:o,...h}},{Title:Xe,Text:Qe}=p,Ze=({visible:n,onClose:s,onScan:i})=>{const[l,r]=e.useState(!1),[a,p]=e.useState(!1),[g,y]=e.useState(""),[v,f]=e.useState(""),[S,T]=e.useState(""),b=e.useRef(null),C=e.useRef(null);e.useEffect(()=>(n&&!a&&k(),()=>{I()}),[n,a]);const k=async()=>{try{if(f(""),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£ tr√™n tr√¨nh duy·ªát n√†y");const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:640},height:{ideal:480}}});b.current&&(b.current.srcObject=e,C.current=e,r(!0),A())}catch(e){f(e.message||"Kh√¥ng th·ªÉ truy c·∫≠p camera"),p(!0)}},I=()=>{C.current&&(C.current.getTracks().forEach(e=>e.stop()),C.current=null),r(!1)},A=()=>{setTimeout(()=>{if(l){w("8934673123456")}},3e3)},w=e=>{T(e),f(""),i(e),setTimeout(()=>{_()},1e3)},E=()=>{const e=g.trim();e?w(e):f("Vui l√≤ng nh·∫≠p m√£ v·∫°ch")},N=()=>{a?(p(!1),k()):(p(!0),I()),f(""),y("")},_=()=>{I(),y(""),f(""),T(""),s()};return t.jsxs(c,{title:t.jsxs(m,{children:[t.jsx(Y,{}),t.jsx("span",{children:"Qu√©t m√£ v·∫°ch"})]}),open:n,onCancel:_,footer:null,width:600,destroyOnClose:!0,children:[t.jsxs("div",{style:{padding:"16px 0"},children:[a?t.jsx(d,{children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsx(Xe,{level:5,children:"Nh·∫≠p m√£ v·∫°ch th·ªß c√¥ng"}),t.jsx(u,{placeholder:"Nh·∫≠p ho·∫∑c qu√©t m√£ v·∫°ch...",value:g,onChange:e=>y(e.target.value),onPressEnter:E,size:"large",style:{fontFamily:"monospace"},autoFocus:!0}),t.jsxs(o,{gutter:[8,8],children:[t.jsx(h,{span:12,children:t.jsx(x,{type:"primary",icon:t.jsx(Y,{}),onClick:E,disabled:!g.trim(),block:!0,children:"X·ª≠ l√Ω"})}),t.jsx(h,{span:12,children:t.jsx(x,{icon:t.jsx($,{}),onClick:N,block:!0,children:"Qu√©t camera"})})]})]})}):t.jsxs(d,{children:[t.jsxs("div",{style:{position:"relative",marginBottom:16},children:[t.jsx("video",{ref:b,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"300px",backgroundColor:"#000",borderRadius:"8px",objectFit:"cover"}}),l&&t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"2px",backgroundColor:"#ff4d4f",boxShadow:"0 0 10px #ff4d4f",animation:"scan 2s ease-in-out infinite"}})]}),t.jsxs(o,{gutter:[8,8],children:[t.jsx(h,{span:8,children:t.jsx(x,{type:"primary",icon:t.jsx($,{}),onClick:k,disabled:l,block:!0,children:l?"ƒêang qu√©t...":"B·∫Øt ƒë·∫ßu qu√©t"})}),t.jsx(h,{span:8,children:t.jsx(x,{icon:t.jsx(U,{}),onClick:I,disabled:!l,block:!0,children:"D·ª´ng qu√©t"})}),t.jsx(h,{span:8,children:t.jsx(x,{icon:t.jsx(K,{}),onClick:N,block:!0,children:"Nh·∫≠p th·ªß c√¥ng"})})]})]}),t.jsxs("div",{style:{marginTop:16},children:[l&&t.jsx(j,{message:"ƒêang qu√©t m√£ v·∫°ch...",description:"ƒê·∫∑t m√£ v·∫°ch trong khung h√¨nh ƒë·ªÉ qu√©t t·ª± ƒë·ªông",type:"info",showIcon:!0,style:{marginBottom:8}}),S&&t.jsx(j,{message:`ƒê√£ qu√©t th√†nh c√¥ng: ${S}`,type:"success",showIcon:!0,style:{marginBottom:8}}),v&&t.jsx(j,{message:"L·ªói",description:v,type:"error",showIcon:!0,style:{marginBottom:8}})]}),t.jsxs(d,{size:"small",style:{marginTop:16,backgroundColor:"#f6f6f6"},children:[t.jsx(Xe,{level:5,children:"H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:"}),t.jsxs("ul",{style:{margin:0,paddingLeft:20},children:[t.jsx("li",{children:"ƒê·∫∑t m√£ v·∫°ch trong khung h√¨nh ƒë·ªÉ qu√©t t·ª± ƒë·ªông"}),t.jsx("li",{children:"ƒê·∫£m b·∫£o m√£ v·∫°ch r√µ n√©t v√† ƒë·ªß √°nh s√°ng"}),t.jsx("li",{children:"C√≥ th·ªÉ nh·∫≠p th·ªß c√¥ng n·∫øu kh√¥ng qu√©t ƒë∆∞·ª£c"}),t.jsx("li",{children:"Nh·∫•n Enter ho·∫∑c n√∫t X·ª≠ l√Ω ƒë·ªÉ t√¨m s·∫£n ph·∫©m"})]})]})]}),t.jsx("style",{jsx:!0,children:"\n        @keyframes scan {\n          0%, 100% { \n            transform: translate(-50%, -100px); \n            opacity: 0.5; \n          }\n          50% { \n            transform: translate(-50%, 100px); \n            opacity: 1; \n          }\n        }\n      "})]})},{Option:Je}=v,{TextArea:et}=u,tt=({visible:n,onClose:s,onCustomerCreated:i})=>{const[l]=g.useForm(),[r,a]=e.useState(!1),d=()=>{l.resetFields(),s()};return t.jsx(c,{title:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx(X,{}),t.jsx("span",{children:"Th√™m kh√°ch h√†ng m·ªõi"})]}),open:n,onCancel:d,footer:null,width:600,destroyOnClose:!0,children:t.jsxs(g,{form:l,layout:"vertical",onFinish:async e=>{a(!0);try{const t={name:e.name,email:e.email||null,phone:e.phone||null,address:e.address||null,date_of_birth:e.date_of_birth?e.date_of_birth.format("YYYY-MM-DD"):null,gender:e.gender||null,segment:e.segment||"Regular"},n=await Be.post("/customers",t);n.data.success?(f.success("T·∫°o kh√°ch h√†ng th√†nh c√¥ng!"),i(n.data.data),l.resetFields(),s()):f.error(n.data.message||"C√≥ l·ªói x·∫£y ra khi t·∫°o kh√°ch h√†ng")}catch(t){f.error("C√≥ l·ªói x·∫£y ra khi t·∫°o kh√°ch h√†ng")}finally{a(!1)}},style:{marginTop:16},children:[t.jsx(o,{gutter:16,children:t.jsx(h,{span:24,children:t.jsx(g.Item,{name:"name",label:"T√™n kh√°ch h√†ng",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng"},{min:2,message:"T√™n ph·∫£i c√≥ √≠t nh·∫•t 2 k√Ω t·ª±"}],children:t.jsx(u,{placeholder:"Nh·∫≠p t√™n kh√°ch h√†ng",size:"large"})})})}),t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"phone",label:"S·ªë ƒëi·ªán tho·∫°i",rules:[{pattern:/^[0-9+\-\s()]+$/,message:"S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá"}],children:t.jsx(u,{placeholder:"Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i",size:"large"})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"email",label:"Email",rules:[{type:"email",message:"Email kh√¥ng h·ª£p l·ªá"}],children:t.jsx(u,{placeholder:"Nh·∫≠p email",size:"large"})})})]}),t.jsx(o,{gutter:16,children:t.jsx(h,{span:24,children:t.jsx(g.Item,{name:"address",label:"ƒê·ªãa ch·ªâ",children:t.jsx(et,{placeholder:"Nh·∫≠p ƒë·ªãa ch·ªâ",rows:3,size:"large"})})})}),t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"date_of_birth",label:"Ng√†y sinh",children:t.jsx(y,{placeholder:"Ch·ªçn ng√†y sinh",style:{width:"100%"},size:"large",format:"DD/MM/YYYY"})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"gender",label:"Gi·ªõi t√≠nh",children:t.jsxs(v,{placeholder:"Ch·ªçn gi·ªõi t√≠nh",size:"large",children:[t.jsx(Je,{value:"male",children:"Nam"}),t.jsx(Je,{value:"female",children:"N·ªØ"}),t.jsx(Je,{value:"other",children:"Kh√°c"})]})})})]}),t.jsx(o,{gutter:16,children:t.jsx(h,{span:24,children:t.jsx(g.Item,{name:"segment",label:"Ph√¢n kh√∫c kh√°ch h√†ng",initialValue:"Regular",children:t.jsxs(v,{size:"large",children:[t.jsx(Je,{value:"Regular",children:"Kh√°ch h√†ng th∆∞·ªùng"}),t.jsx(Je,{value:"VIP",children:"Kh√°ch h√†ng VIP"}),t.jsx(Je,{value:"Premium",children:"Kh√°ch h√†ng Premium"}),t.jsx(Je,{value:"New",children:"Kh√°ch h√†ng m·ªõi"})]})})})}),t.jsxs(o,{gutter:16,style:{marginTop:24},children:[t.jsx(h,{span:12,children:t.jsx(x,{size:"large",block:!0,onClick:d,children:"H·ªßy"})}),t.jsx(h,{span:12,children:t.jsx(x,{type:"primary",size:"large",block:!0,htmlType:"submit",loading:r,icon:t.jsx(W,{}),children:r?"ƒêang t·∫°o...":"T·∫°o kh√°ch h√†ng"})})]})]})})},{Title:nt,Text:st}=p,it=({visible:e,order:n,onClose:s,onPrintReceipt:i,onNewOrder:l})=>{if(!n)return null;const r=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return t.jsxs(c,{title:t.jsxs(m,{children:[t.jsx(te,{style:{color:"#52c41a"}}),t.jsx("span",{children:"Thanh to√°n th√†nh c√¥ng"})]}),open:e,onCancel:s,footer:null,width:500,className:"receipt-modal",children:[t.jsxs("div",{className:"receipt-content",style:{fontFamily:"monospace",lineHeight:1.6},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[t.jsxs(nt,{level:3,style:{margin:0,color:"#1890ff"},children:[t.jsx(Q,{})," KhoChuan Store"]}),t.jsx(st,{type:"secondary",children:"123 Main Street, Ho Chi Minh City"}),t.jsx("br",{}),t.jsx(st,{type:"secondary",children:"Tel: +84 901 234 567"})]}),t.jsx(S,{style:{margin:"16px 0",borderStyle:"dashed"}}),t.jsxs(o,{gutter:[16,8],style:{marginBottom:16},children:[t.jsx(h,{span:12,children:t.jsxs(st,{strong:!0,children:["H√≥a ƒë∆°n: ",n.order_number]})}),t.jsx(h,{span:12,style:{textAlign:"right"},children:t.jsxs(st,{children:[t.jsx(Z,{})," ",He(n.created_at).format("DD/MM/YYYY HH:mm")]})}),t.jsx(h,{span:12,children:t.jsxs(st,{children:["Thu ng√¢n: ",n.cashier_name]})}),t.jsx(h,{span:12,style:{textAlign:"right"},children:t.jsxs(st,{children:["Khu v·ª±c: ",n.location_name||"Main Store"]})})]}),n.customer_name&&t.jsxs(t.Fragment,{children:[t.jsx(S,{style:{margin:"12px 0"}}),t.jsxs("div",{style:{marginBottom:16},children:[t.jsxs(st,{strong:!0,children:[t.jsx(J,{})," Kh√°ch h√†ng: ",n.customer_name]}),n.customer_phone&&t.jsx("div",{children:t.jsxs(st,{type:"secondary",children:["SƒêT: ",n.customer_phone]})})]})]}),t.jsx(S,{style:{margin:"12px 0"}}),t.jsxs("div",{style:{marginBottom:16},children:[t.jsx(st,{strong:!0,children:"Chi ti·∫øt ƒë∆°n h√†ng:"}),t.jsx("div",{style:{marginTop:8},children:n.items?.map((e,n)=>t.jsxs(o,{style:{marginBottom:8},children:[t.jsx(h,{span:12,children:t.jsxs("div",{children:[t.jsx(st,{strong:!0,children:e.product_name||e.name}),t.jsx("div",{children:t.jsx(st,{type:"secondary",style:{fontSize:"12px"},children:e.product_sku||e.sku})})]})}),t.jsx(h,{span:4,style:{textAlign:"center"},children:t.jsx(st,{children:e.quantity})}),t.jsx(h,{span:4,style:{textAlign:"right"},children:t.jsx(st,{children:r(e.unit_price||e.price)})}),t.jsx(h,{span:4,style:{textAlign:"right"},children:t.jsx(st,{strong:!0,children:r(e.total_price||e.price*e.quantity)})})]},n))})]}),t.jsx(S,{style:{margin:"12px 0",borderStyle:"dashed"}}),t.jsxs("div",{style:{marginBottom:16},children:[t.jsxs(o,{justify:"space-between",style:{marginBottom:4},children:[t.jsx(h,{children:t.jsx(st,{children:"T·∫°m t√≠nh:"})}),t.jsx(h,{children:t.jsx(st,{children:r(n.subtotal)})})]}),n.tax_amount>0&&t.jsxs(o,{justify:"space-between",style:{marginBottom:4},children:[t.jsx(h,{children:t.jsx(st,{children:"Thu·∫ø VAT:"})}),t.jsx(h,{children:t.jsx(st,{children:r(n.tax_amount)})})]}),n.discount_amount>0&&t.jsxs(o,{justify:"space-between",style:{marginBottom:4},children:[t.jsx(h,{children:t.jsx(st,{children:"Gi·∫£m gi√°:"})}),t.jsx(h,{children:t.jsxs(st,{children:["-",r(n.discount_amount)]})})]}),t.jsx(S,{style:{margin:"8px 0"}}),t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:t.jsx(st,{strong:!0,style:{fontSize:"16px"},children:"T·ªïng c·ªông:"})}),t.jsx(h,{children:t.jsx(st,{strong:!0,style:{fontSize:"16px"},children:r(n.total)})})]})]}),t.jsx(S,{style:{margin:"12px 0"}}),t.jsx("div",{style:{marginBottom:16},children:t.jsxs(o,{justify:"space-between",align:"middle",children:[t.jsx(h,{children:t.jsxs(m,{children:[t.jsx(ee,{}),t.jsxs(st,{children:[(a=n.payment_method,{cash:"üíµ",card:"üí≥",qr:"üì±",mobile:"üì≤"}[a]||"üíµ")," ",(e=>({cash:"Ti·ªÅn m·∫∑t",card:"Th·∫ª t√≠n d·ª•ng",qr:"QR Code",mobile:"V√≠ ƒëi·ªán t·ª≠"}[e]||"Ti·ªÅn m·∫∑t"))(n.payment_method)]})]})}),t.jsx(h,{children:t.jsxs(m,{children:[t.jsx(te,{style:{color:"#52c41a"}}),t.jsx(st,{strong:!0,style:{color:"#52c41a"},children:"ƒê√£ thanh to√°n"})]})})]})}),t.jsx(S,{style:{margin:"12px 0",borderStyle:"dashed"}}),t.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[t.jsx(st,{type:"secondary",children:"C·∫£m ∆°n qu√Ω kh√°ch ƒë√£ mua h√†ng!"}),t.jsx("br",{}),t.jsx(st,{type:"secondary",children:"H·∫πn g·∫∑p l·∫°i qu√Ω kh√°ch l·∫ßn sau."})]}),t.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[t.jsx(T,{value:`${window.location.origin}/receipt/${n.id}`,size:80}),t.jsx("div",{style:{marginTop:8},children:t.jsx(st,{type:"secondary",style:{fontSize:"12px"},children:"Qu√©t QR ƒë·ªÉ xem h√≥a ƒë∆°n online"})})]})]}),t.jsx("div",{style:{marginTop:24},children:t.jsxs(o,{gutter:[8,8],children:[t.jsx(h,{span:8,children:t.jsx(x,{type:"primary",icon:t.jsx(ne,{}),onClick:()=>{i?.(n),window.print()},block:!0,children:"In h√≥a ƒë∆°n"})}),n.customer_email&&t.jsx(h,{span:8,children:t.jsx(x,{icon:t.jsx(se,{}),onClick:()=>{c.info({title:"G·ª≠i h√≥a ƒë∆°n qua email",content:"H√≥a ƒë∆°n ƒë√£ ƒë∆∞·ª£c g·ª≠i qua email th√†nh c√¥ng!"})},block:!0,children:"G·ª≠i email"})}),t.jsx(h,{span:n.customer_email?8:16,children:t.jsx(x,{type:"default",icon:t.jsx(ie,{}),onClick:()=>{l?.(),s()},block:!0,children:"ƒê∆°n h√†ng m·ªõi"})})]})}),t.jsx("style",{jsx:!0,global:!0,children:"\n        @media print {\n          .receipt-modal .ant-modal-mask,\n          .receipt-modal .ant-modal-wrap {\n            position: static !important;\n          }\n          \n          .receipt-modal .ant-modal {\n            box-shadow: none !important;\n            padding: 0 !important;\n            margin: 0 !important;\n            max-width: none !important;\n            width: 100% !important;\n          }\n          \n          .receipt-modal .ant-modal-content {\n            box-shadow: none !important;\n            border-radius: 0 !important;\n          }\n          \n          .receipt-modal .ant-modal-header,\n          .receipt-modal .ant-modal-footer,\n          .receipt-modal .ant-btn {\n            display: none !important;\n          }\n          \n          .receipt-content {\n            padding: 0 !important;\n            font-size: 12px !important;\n          }\n        }\n      "})]});var a},{Search:lt}=u,{Option:rt}=v,{Title:at,Text:ct}=p,dt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{user:s}=We(),[i,l]=e.useState(!1),[a,p]=e.useState([]),[j,y]=e.useState([]),[v,f]=e.useState([]),[T,E]=e.useState([]),[N,_]=e.useState([]),[P,D]=e.useState("all"),[O,M]=e.useState(""),[R,V]=e.useState(null),[z,B]=e.useState(!1),[H,F]=e.useState(!1),[L]=g.useForm(),[q,G]=e.useState(!1),[$,U]=e.useState(!1),[K,Y]=e.useState(!1),[W,Q]=e.useState(null);e.useEffect(()=>{Z(),te(),ne()},[]),e.useEffect(()=>{se()},[a,O,P]);const Z=async()=>{try{l(!0);const e=await Be.get("/products",{params:{page:1,limit:50}});e.data.success?p(e.data.data.products||[]):p(fe())}catch(e){p(fe())}finally{l(!1)}},te=async()=>{try{const e=await Be.get("/categories");e.data.success?f([{id:"all",name:"All Products"},...e.data.data.categories||[]]):f([{id:"all",name:"All Products"},...Se()])}catch(e){f([{id:"all",name:"All Products"},...Se()])}},ne=async()=>{try{const e=await Be.get("/customers",{params:{limit:100}});e.data.success?E(e.data.data.customers||[]):E(Te())}catch(e){E(Te())}},se=()=>{let e=a;O&&(e=e.filter(e=>e.name.toLowerCase().includes(O.toLowerCase())||e.sku?.toLowerCase().includes(O.toLowerCase())||e.barcode?.includes(O))),"all"!==P&&(e=e.filter(e=>e.category===P)),y(e)},xe=e.useCallback(e=>{_(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},[]),me=e.useCallback((e,t)=>{t<=0?pe(e):_(n=>n.map(n=>n.id===e?{...n,quantity:t}:n))},[]),pe=e.useCallback(e=>{_(t=>t.filter(t=>t.id!==e))},[]),ue=e.useCallback(()=>{_([]),V(null)},[]),je=n.useMemo(()=>{const e=N.reduce((e,t)=>e+t.price*t.quantity,0),t=.1*e,n=R?.discount||0;return{subtotal:e,tax:t,discount:n,total:e+t-n}},[N,R]),ge=e.useCallback(async e=>{try{const t=a.find(t=>t.barcode===e||t.sku===e);if(t)return xe(t),void b.success({message:"S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c th√™m",description:`${t.name} ƒë√£ ƒë∆∞·ª£c th√™m v√†o gi·ªè h√†ng`});const n=await Be.get(`/products/${e}`);n.data.success?(xe(n.data.data),b.success({message:"S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c th√™m",description:`${n.data.data.name} ƒë√£ ƒë∆∞·ª£c th√™m v√†o gi·ªè h√†ng`})):b.error({message:"Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m",description:"Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m v·ªõi m√£ v·∫°ch n√†y"})}catch(t){b.error({message:"L·ªói",description:"C√≥ l·ªói x·∫£y ra khi t√¨m s·∫£n ph·∫©m"})}},[a,xe]),ye=e.useCallback(e=>{E(t=>[e,...t]),V(e),b.success({message:"Kh√°ch h√†ng ƒë√£ ƒë∆∞·ª£c t·∫°o",description:`${e.name} ƒë√£ ƒë∆∞·ª£c th√™m v√†o h·ªá th·ªëng`})},[]),ve=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),fe=()=>[{id:1,name:"Coca Cola 330ml",price:12e3,category:"Beverages",stock:50,sku:"CC-330",barcode:"8934673123456"},{id:2,name:"Pepsi 330ml",price:11e3,category:"Beverages",stock:30,sku:"PP-330",barcode:"8934673123457"},{id:3,name:"B√°nh m√¨ sandwich",price:25e3,category:"Food",stock:20,sku:"BM-SW",barcode:"8934673123458"},{id:4,name:"M√¨ t√¥m H·∫£o H·∫£o",price:5e3,category:"Food",stock:100,sku:"MT-HH",barcode:"8934673123459"},{id:5,name:"C√† ph√™ ƒëen",price:2e4,category:"Beverages",stock:25,sku:"CF-BK",barcode:"8934673123460"}],Se=()=>[{id:1,name:"Beverages"},{id:2,name:"Food"},{id:3,name:"Snacks"}],Te=()=>[{id:1,name:"Nguy·ªÖn VƒÉn A",phone:"0901234567",email:"nguyenvana@email.com"},{id:2,name:"Tr·∫ßn Th·ªã B",phone:"0907654321",email:"tranthib@email.com"},{id:3,name:"L√™ VƒÉn C",phone:"0912345678",email:"levanc@email.com"}],be=[{title:"Name",dataIndex:"name",key:"name"},{title:"Phone",dataIndex:"phone",key:"phone"},{title:"Action",key:"action",render:e=>t.jsx(x,{type:"primary",size:"small",onClick:()=>{V(e),F(!1)},children:"Select"})}];return t.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[t.jsx(r,{title:"KhoChuan POS Terminal",subtitle:`Cashier: ${s?.name} | ${(new Date).toLocaleString("vi-VN")}`,icon:"cart"}),t.jsxs("div",{style:{padding:"0 24px 24px",flex:1},children:[t.jsxs(o,{gutter:16,style:{flex:1},children:[t.jsx(h,{span:16,children:t.jsxs(d,{title:"Products",style:{height:"100%"},bodyStyle:{padding:0,height:"calc(100% - 57px)",display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{padding:"16px",borderBottom:"1px solid #f0f0f0"},children:t.jsxs(u.Group,{compact:!0,children:[t.jsx(lt,{placeholder:"Search products or scan barcode...",value:O,onChange:e=>M(e.target.value),onPressEnter:e=>{const t=e.target.value.trim();t.length>=8&&ge(t)},prefix:t.jsx(re,{}),enterButton:t.jsx(le,{}),size:"large",style:{width:"calc(100% - 50px)"}}),t.jsx(x,{type:"primary",icon:t.jsx(re,{}),size:"large",onClick:()=>G(!0),style:{width:"50px"},title:"Qu√©t m√£ v·∫°ch"})]})}),t.jsx("div",{style:{padding:"16px",borderBottom:"1px solid #f0f0f0"},children:t.jsxs(m,{wrap:!0,children:[t.jsx(x,{type:"all"===P?"primary":"default",onClick:()=>D("all"),children:"All"}),v.map(e=>t.jsx(x,{type:P===e.name?"primary":"default",onClick:()=>D(e.name),children:e.name},e.id))]})}),t.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px"},children:t.jsx(o,{gutter:[8,8],children:j.map(e=>t.jsx(h,{xs:12,sm:8,md:6,lg:4,children:t.jsxs(d,{hoverable:!0,size:"small",onClick:()=>xe(e),style:{height:"120px",cursor:"pointer",border:N.find(t=>t.id===e.id)?"2px solid #1890ff":"1px solid #d9d9d9"},bodyStyle:{padding:"8px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[t.jsx("div",{children:t.jsx(ct,{strong:!0,style:{fontSize:"12px",lineHeight:"14px"},children:e.name})}),t.jsxs("div",{children:[t.jsx(ct,{type:"primary",strong:!0,children:ve(e.price)}),t.jsx("div",{children:t.jsxs(ct,{type:"secondary",style:{fontSize:"10px"},children:["Stock: ",e.stock||0]})})]})]})},e.id))})})]})}),t.jsx(h,{span:8,children:t.jsxs(d,{title:t.jsxs(m,{children:[t.jsx(de,{}),t.jsxs("span",{children:["Cart (",N.length,")"]}),t.jsx(x,{icon:t.jsx(J,{}),onClick:()=>F(!0),type:R?"primary":"default",children:R?R.name:"Select Customer"}),t.jsx(x,{icon:t.jsx(oe,{}),onClick:ue,disabled:0===N.length,danger:!0,children:"Clear"})]}),style:{height:"100%"},bodyStyle:{padding:0,height:"calc(100% - 57px)",display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px"},children:0===N.length?t.jsx(C,{description:"Cart is empty"}):N.map(e=>t.jsx(d,{size:"small",style:{marginBottom:8},children:t.jsxs(o,{align:"middle",children:[t.jsx(h,{span:12,children:t.jsxs("div",{children:[t.jsx(ct,{strong:!0,children:e.name}),t.jsx("div",{children:t.jsxs(ct,{type:"secondary",style:{fontSize:"12px"},children:[ve(e.price)," each"]})})]})}),t.jsx(h,{span:6,children:t.jsxs(m,{children:[t.jsx(x,{size:"small",icon:t.jsx(ae,{}),onClick:()=>me(e.id,e.quantity-1)}),t.jsx(ct,{children:e.quantity}),t.jsx(x,{size:"small",icon:t.jsx(ie,{}),onClick:()=>me(e.id,e.quantity+1)})]})}),t.jsx(h,{span:4,children:t.jsx(ct,{strong:!0,children:ve(e.price*e.quantity)})}),t.jsx(h,{span:2,children:t.jsx(x,{size:"small",icon:t.jsx(ce,{}),onClick:()=>pe(e.id),danger:!0})})]})},e.id))}),t.jsx("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0"},children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:"Subtotal:"}),t.jsx(h,{children:ve(je.subtotal)})]}),t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:"Tax:"}),t.jsx(h,{children:ve(je.tax)})]}),t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:"Discount:"}),t.jsx(h,{children:ve(je.discount)})]}),t.jsx(S,{style:{margin:"8px 0"}}),t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:t.jsx(ct,{strong:!0,children:"Total:"})}),t.jsx(h,{children:t.jsx(ct,{strong:!0,style:{fontSize:"18px",color:"#1890ff"},children:ve(je.total)})})]})]})}),t.jsx("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0"},children:t.jsx(x,{type:"primary",size:"large",block:!0,icon:t.jsx(ee,{}),onClick:()=>B(!0),disabled:0===N.length,loading:i,children:"Checkout"})})]})})]}),t.jsx(k,{title:"Select Customer",placement:"right",onClose:()=>F(!1),open:H,width:400,children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsx(lt,{placeholder:"Search customers...",enterButton:"Search",size:"large"}),t.jsx(x,{type:"primary",icon:t.jsx(X,{}),onClick:()=>{U(!0),F(!1)},block:!0,style:{marginBottom:16},children:"Th√™m kh√°ch h√†ng m·ªõi"}),t.jsx(I,{columns:be,dataSource:T,rowKey:"id",size:"small",pagination:{pageSize:10}}),t.jsx(x,{block:!0,onClick:()=>{V(null),F(!1)},children:"Continue without customer"})]})}),t.jsx(c,{title:"Payment",open:z,onCancel:()=>B(!1),footer:null,width:500,children:t.jsxs(g,{form:L,layout:"vertical",onFinish:async e=>{try{l(!0);const t={customer_id:R?.id||null,cashier_id:s.id,location_id:"loc-001",items:N.map(e=>({product_id:e.id,quantity:e.quantity,unit_price:e.price,discount_amount:0,total_price:e.price*e.quantity})),subtotal:je.subtotal,tax_amount:je.tax,discount_amount:je.discount,total:je.total,payment_method:e.method,notes:e.notes||"",metadata:{payment_method:e.method,cashier_name:s.name,customer_name:R?.name}},n=await Be.post("/orders",t);if(!n.data.success)throw new Error(n.data.message||"C√≥ l·ªói x·∫£y ra khi x·ª≠ l√Ω ƒë∆°n h√†ng");{const t={...n.data.data,items:N,customer_name:R?.name,customer_email:R?.email,customer_phone:R?.phone,cashier_name:s.name,location_name:"KhoChuan Store Main",payment_method:e.method};Q(t),Y(!0),ue(),B(!1),L.resetFields(),b.success({message:"Thanh to√°n th√†nh c√¥ng",description:`ƒê∆°n h√†ng #${n.data.data.order_number} ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω th√†nh c√¥ng!`})}}catch(t){b.error({message:"Payment Failed",description:t.message||"An error occurred while processing payment"})}finally{l(!1)}},children:[t.jsx(d,{size:"small",style:{marginBottom:16},children:t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:t.jsx(ct,{strong:!0,children:"Total Amount:"})}),t.jsx(h,{children:t.jsx(ct,{strong:!0,style:{fontSize:"20px",color:"#1890ff"},children:ve(je.total)})})]})}),t.jsx(g.Item,{name:"method",label:"Payment Method",rules:[{required:!0,message:"Please select payment method"}],children:t.jsx(A.Group,{children:t.jsxs(m,{direction:"vertical",children:[t.jsx(A,{value:"cash",children:t.jsxs(m,{children:[t.jsx(he,{}),"Cash"]})}),t.jsx(A,{value:"card",children:t.jsxs(m,{children:[t.jsx(ee,{}),"Credit Card"]})}),t.jsx(A,{value:"qr",children:t.jsxs(m,{children:[t.jsx(re,{}),"QR Code"]})})]})})}),t.jsx(g.Item,{name:"amount",label:"Amount Received",rules:[{required:!0,message:"Please enter amount"}],initialValue:je.total,children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),min:je.total})}),t.jsx(g.Item,{children:t.jsxs(m,{style:{width:"100%",justifyContent:"flex-end"},children:[t.jsx(x,{onClick:()=>B(!1),children:"Cancel"}),t.jsx(x,{type:"primary",htmlType:"submit",loading:i,children:"Process Payment"})]})})]})}),t.jsx(Ze,{visible:q,onClose:()=>G(!1),onScan:ge}),t.jsx(tt,{visible:$,onClose:()=>U(!1),onCustomerCreated:ye}),t.jsx(it,{visible:K,order:W,onClose:()=>Y(!1),onPrintReceipt:e=>{},onNewOrder:()=>{V(null),Q(null),setTimeout(()=>{const e=document.querySelector('.ant-input[placeholder*="Search"]');e&&e.focus()},100)}})]})]})}},Symbol.toStringTag,{value:"Module"})),{Title:ot,Text:ht}=p,{Search:xt}=u,{TabPane:mt}=O,pt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n,s]=e.useState([]),[i,l]=e.useState([]),[r,a]=e.useState([]),[p,u]=e.useState("all"),[j,g]=e.useState(""),[y,v]=e.useState([]),[T,b]=e.useState(!1),[C,A]=e.useState(null),[O,M]=e.useState("grid"),[R,V]=e.useState(!1),[z,B]=e.useState("cash"),[H,F]=e.useState(0),[L,q]=e.useState(!1);e.useEffect(()=>{setTimeout(()=>{const e=G(),t=[...new Set(e.map(e=>e.category))];l(e),v(e),a(t),q(!1)},1e3)},[]);const G=()=>[{id:1,name:"Laptop Dell Inspiron 15",price:15e6,category:"Laptop",image:"https://via.placeholder.com/80",barcode:"8935236799892",stock:25},{id:2,name:'M√†n h√¨nh Dell 24"',price:35e5,category:"M√†n h√¨nh",image:"https://via.placeholder.com/80",barcode:"8935236799893",stock:42},{id:3,name:"Chu·ªôt kh√¥ng d√¢y Logitech",price:45e4,category:"Ph·ª• ki·ªán",image:"https://via.placeholder.com/80",barcode:"8935236799894",stock:78},{id:4,name:"B√†n ph√≠m c∆° AKKO",price:12e5,category:"Ph·ª• ki·ªán",image:"https://via.placeholder.com/80",barcode:"8935236799895",stock:15},{id:5,name:"Laptop Acer Nitro 5",price:22e6,category:"Laptop",image:"https://via.placeholder.com/80",barcode:"8935236799896",stock:12},{id:6,name:"Tai nghe Sony WH-1000XM4",price:58e5,category:"√Çm thanh",image:"https://via.placeholder.com/80",barcode:"8935236799897",stock:8},{id:7,name:"M√°y t√≠nh ƒë·ªÉ b√†n HP Pavilion",price:18e6,category:"PC",image:"https://via.placeholder.com/80",barcode:"8935236799898",stock:10},{id:8,name:"SSD Samsung 1TB",price:25e5,category:"Linh ki·ªán",image:"https://via.placeholder.com/80",barcode:"8935236799899",stock:35},{id:9,name:"RAM Kingston 16GB DDR4",price:15e5,category:"Linh ki·ªán",image:"https://via.placeholder.com/80",barcode:"8935236799900",stock:28},{id:10,name:"Card ƒë·ªì h·ªça NVIDIA RTX 3060",price:95e5,category:"Linh ki·ªán",image:"https://via.placeholder.com/80",barcode:"8935236799901",stock:5},{id:11,name:"M√°y in HP LaserJet",price:42e5,category:"M√°y in",image:"https://via.placeholder.com/80",barcode:"8935236799902",stock:7},{id:12,name:"Webcam Logitech C920",price:18e5,category:"Ph·ª• ki·ªán",image:"https://via.placeholder.com/80",barcode:"8935236799903",stock:15}];e.useEffect(()=>{let e=[...i];if("all"!==p&&(e=e.filter(e=>e.category===p)),j){const t=j.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.barcode.includes(t))}v(e)},[p,j,i]);const $=e=>{const t=n.find(t=>t.id===e.id);if(t){if(t.quantity>=e.stock)return void f.warning(`Ch·ªâ c√≤n ${e.stock} s·∫£n ph·∫©m trong kho!`);s(n.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t))}else{if(e.stock<=0)return void f.warning("S·∫£n ph·∫©m ƒë√£ h·∫øt h√†ng!");s([...n,{...e,quantity:1}])}f.success(`ƒê√£ th√™m ${e.name} v√†o gi·ªè h√†ng`)},U=(e,t)=>{const l=i.find(t=>t.id===e);t>l.stock?f.warning(`Ch·ªâ c√≤n ${l.stock} s·∫£n ph·∫©m trong kho!`):s(t<=0?n.filter(t=>t.id!==e):n.map(n=>n.id===e?{...n,quantity:t}:n))},K=()=>n.reduce((e,t)=>e+t.price*t.quantity,0),Y=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),X=[{title:"S·∫£n ph·∫©m",dataIndex:"name",key:"name",render:(e,n)=>t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx("img",{src:n.image,alt:e,style:{width:40,height:40,marginRight:10}}),t.jsxs("div",{children:[t.jsx("div",{children:e}),t.jsx("div",{style:{fontSize:"12px",color:"rgba(0, 0, 0, 0.45)"},children:n.barcode})]})]})},{title:"Gi√°",dataIndex:"price",key:"price",render:e=>Y(e)},{title:"S·ªë l∆∞·ª£ng",dataIndex:"quantity",key:"quantity",render:(e,n)=>t.jsxs("div",{className:"quantity-control",children:[t.jsx(x,{icon:t.jsx(ae,{}),onClick:()=>U(n.id,n.quantity-1)}),t.jsx(w,{min:1,max:n.stock,value:e,onChange:e=>U(n.id,e)}),t.jsx(x,{icon:t.jsx(ie,{}),onClick:()=>U(n.id,n.quantity+1)})]})},{title:"Th√†nh ti·ªÅn",dataIndex:"price",key:"total",render:(e,t)=>Y(e*t.quantity)},{title:"",key:"action",render:(e,i)=>t.jsx(x,{type:"text",danger:!0,icon:t.jsx(ce,{}),onClick:()=>{return e=i.id,s(n.filter(t=>t.id!==e)),void f.success("ƒê√£ x√≥a s·∫£n ph·∫©m kh·ªèi gi·ªè h√†ng");var e}})}];return t.jsxs("div",{className:"pos-terminal",children:[t.jsxs(o,{gutter:[16,16],children:[t.jsx(h,{xs:24,lg:15,children:t.jsxs(d,{className:"full-height-card",children:[t.jsxs("div",{className:"pos-header",children:[t.jsx(ot,{level:4,children:"B√°n h√†ng"}),t.jsxs(m,{children:[t.jsx(x,{icon:t.jsx(xe,{}),type:"grid"===O?"primary":"default",onClick:()=>M("grid")}),t.jsx(x,{icon:t.jsx(me,{}),type:"list"===O?"primary":"default",onClick:()=>M("list")})]})]}),t.jsx("div",{className:"pos-search-bar",children:t.jsx(xt,{placeholder:"Nh·∫≠p t√™n ho·∫∑c qu√©t m√£ v·∫°ch...",enterButton:t.jsx(le,{}),prefix:t.jsx(pe,{}),onChange:e=>g(e.target.value),value:j})}),t.jsxs("div",{className:"pos-categories",children:[t.jsx(x,{type:"all"===p?"primary":"default",onClick:()=>u("all"),children:"T·∫•t c·∫£"}),r.map(e=>t.jsx(x,{type:p===e?"primary":"default",onClick:()=>u(e),children:e},e))]}),t.jsx(S,{}),t.jsx("div",{className:"pos-products",children:"grid"===O?t.jsx(o,{gutter:[16,16],children:y.map(e=>t.jsx(h,{xs:12,sm:8,md:6,lg:6,xl:4,children:t.jsx(d,{hoverable:!0,cover:t.jsx("img",{alt:e.name,src:e.image,style:{height:100,objectFit:"contain"}}),onClick:()=>$(e),className:"product-card",children:t.jsxs("div",{className:"product-card-content",children:[t.jsx("div",{className:"product-card-title",children:e.name}),t.jsx("div",{className:"product-card-price",children:Y(e.price)}),t.jsx("div",{className:"product-card-stock",children:t.jsx(E,{status:e.stock>10?"success":e.stock>0?"warning":"error",text:`${e.stock} trong kho`})})]})})},e.id))}):(()=>{const e=[{title:"S·∫£n ph·∫©m",dataIndex:"name",key:"name",render:(e,n)=>t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx("img",{src:n.image,alt:e,style:{width:40,height:40,marginRight:10}}),t.jsxs("div",{children:[t.jsx("div",{children:e}),t.jsx("div",{style:{fontSize:"12px",color:"rgba(0, 0, 0, 0.45)"},children:n.barcode})]})]})},{title:"Danh m·ª•c",dataIndex:"category",key:"category",render:e=>t.jsx(D,{children:e})},{title:"Gi√°",dataIndex:"price",key:"price",render:e=>Y(e)},{title:"T·ªìn kho",dataIndex:"stock",key:"stock",render:e=>t.jsx(E,{status:e>10?"success":e>0?"warning":"error",text:e})},{title:"Thao t√°c",key:"action",render:(e,n)=>t.jsx(x,{type:"primary",size:"small",onClick:()=>$(n),disabled:n.stock<=0,children:"Th√™m"})}];return t.jsx(I,{columns:e,dataSource:y,rowKey:"id",pagination:{pageSize:6}})})()})]})}),t.jsx(h,{xs:24,lg:9,children:t.jsxs(d,{className:"full-height-card cart-section",children:[t.jsxs("div",{className:"cart-header",children:[t.jsxs("div",{className:"cart-title",children:[t.jsx(de,{}),t.jsx("span",{children:"Gi·ªè h√†ng"}),t.jsx(E,{count:n.length,showZero:!0})]}),t.jsx("div",{className:"customer-section",children:t.jsx(x,{icon:t.jsx(J,{}),onClick:()=>b(!0),children:C?C.name:"Ch·ªçn kh√°ch h√†ng"})})]}),t.jsx("div",{className:"cart-content",children:0===n.length?t.jsxs("div",{className:"empty-cart",children:[t.jsx(ue,{style:{fontSize:48,color:"#d9d9d9"}}),t.jsx(ht,{type:"secondary",children:"Gi·ªè h√†ng tr·ªëng"})]}):t.jsx(I,{columns:X,dataSource:n,rowKey:"id",pagination:!1,size:"small"})}),t.jsxs("div",{className:"cart-footer",children:[t.jsxs("div",{className:"cart-summary",children:[t.jsxs("div",{className:"cart-summary-row",children:[t.jsx(ht,{children:"T·ªïng s·∫£n ph·∫©m:"}),t.jsxs(ht,{children:[n.reduce((e,t)=>e+t.quantity,0)," s·∫£n ph·∫©m"]})]}),t.jsxs("div",{className:"cart-summary-row",children:[t.jsx(ht,{children:"T·ªïng ti·ªÅn:"}),t.jsx(ht,{strong:!0,className:"total-amount",children:Y(K())})]}),C&&t.jsxs("div",{className:"cart-summary-row",children:[t.jsx(ht,{children:"Kh√°ch h√†ng:"}),t.jsxs(ht,{children:[C.name," (",C.points," ƒëi·ªÉm)"]})]})]}),t.jsxs("div",{className:"cart-actions",children:[t.jsx(x,{danger:!0,icon:t.jsx(ce,{}),onClick:()=>{c.confirm({title:"X√≥a gi·ªè h√†ng",content:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô gi·ªè h√†ng?",okText:"X√≥a",cancelText:"H·ªßy",onOk:()=>{s([]),f.success("ƒê√£ x√≥a to√†n b·ªô gi·ªè h√†ng")}})},disabled:0===n.length,children:"X√≥a t·∫•t c·∫£"}),t.jsx(x,{type:"primary",icon:t.jsx(ee,{}),size:"large",onClick:()=>V(!0),disabled:0===n.length,children:"Thanh to√°n"})]})]})]})})]}),t.jsxs(k,{title:"Ch·ªçn kh√°ch h√†ng",placement:"right",onClose:()=>b(!1),visible:T,width:400,children:[t.jsx("div",{style:{marginBottom:16},children:t.jsx(xt,{placeholder:"T√¨m ki·∫øm theo t√™n ho·∫∑c SƒêT",enterButton:!0})}),t.jsx(N,{itemLayout:"horizontal",dataSource:[{id:1,name:"Nguy·ªÖn VƒÉn A",phone:"0912345678",points:120},{id:2,name:"Tr·∫ßn Th·ªã B",phone:"0923456789",points:85},{id:3,name:"L√™ VƒÉn C",phone:"0934567890",points:210},{id:4,name:"Ph·∫°m Th·ªã D",phone:"0945678901",points:45},{id:5,name:"Ho√†ng VƒÉn E",phone:"0956789012",points:150}],renderItem:e=>t.jsx(N.Item,{actions:[t.jsx(x,{type:"primary",size:"small",onClick:()=>{return A(t=e),b(!1),void f.success(`ƒê√£ ch·ªçn kh√°ch h√†ng: ${t.name}`);var t},children:"Ch·ªçn"})],children:t.jsx(N.Item.Meta,{avatar:t.jsx(_,{icon:t.jsx(J,{})}),title:e.name,description:t.jsxs("div",{children:[t.jsxs("div",{children:["SƒêT: ",e.phone]}),t.jsxs("div",{children:["ƒêi·ªÉm t√≠ch l≈©y: ",e.points]})]})})})})]}),t.jsx(c,{title:"Thanh to√°n",visible:R,onCancel:()=>V(!1),footer:null,width:600,children:t.jsxs("div",{className:"checkout-modal",children:[t.jsxs("div",{className:"checkout-summary",children:[t.jsx(ot,{level:4,children:"T·ªïng quan ƒë∆°n h√†ng"}),t.jsxs("div",{className:"checkout-items",children:[t.jsxs("div",{className:"checkout-item-header",children:[t.jsx(ht,{strong:!0,children:"S·∫£n ph·∫©m"}),t.jsx(ht,{strong:!0,children:"SL"}),t.jsx(ht,{strong:!0,children:"Th√†nh ti·ªÅn"})]}),n.map(e=>t.jsxs("div",{className:"checkout-item",children:[t.jsx(ht,{children:e.name}),t.jsx(ht,{children:e.quantity}),t.jsx(ht,{children:Y(e.price*e.quantity)})]},e.id))]}),t.jsx(S,{}),t.jsxs("div",{className:"checkout-total",children:[t.jsx(ht,{strong:!0,children:"T·ªïng ti·ªÅn:"}),t.jsx(ht,{strong:!0,className:"checkout-total-amount",children:Y(K())})]}),C&&t.jsxs("div",{className:"checkout-customer",children:[t.jsxs(ht,{children:["Kh√°ch h√†ng: ",C.name]}),t.jsxs(ht,{children:["ƒêi·ªÉm t√≠ch l≈©y: ",C.points]})]})]}),t.jsxs("div",{className:"payment-section",children:[t.jsx(ot,{level:4,children:"Ph∆∞∆°ng th·ª©c thanh to√°n"}),t.jsxs("div",{className:"payment-methods",children:[t.jsxs("div",{className:"payment-method-selection",children:[t.jsx(x,{type:"cash"===z?"primary":"default",icon:t.jsx(he,{}),size:"large",onClick:()=>B("cash"),children:"Ti·ªÅn m·∫∑t"}),t.jsx(x,{type:"card"===z?"primary":"default",icon:t.jsx(ee,{}),size:"large",onClick:()=>B("card"),children:"Th·∫ª"})]}),"cash"===z&&t.jsxs("div",{className:"cash-payment",children:[t.jsxs("div",{className:"amount-input",children:[t.jsx(ht,{children:"Ti·ªÅn kh√°ch ƒë∆∞a:"}),t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),size:"large",min:K(),onChange:F})]}),t.jsxs("div",{className:"change-amount",children:[t.jsx(ht,{children:"Ti·ªÅn th·ªëi l·∫°i:"}),t.jsx(ht,{strong:!0,children:Y((()=>{const e=K();return H>e?H-e:0})())})]})]})]}),t.jsxs("div",{className:"payment-actions",children:[t.jsx(x,{onClick:()=>V(!1),children:"H·ªßy"}),t.jsx(x,{type:"primary",icon:t.jsx(je,{}),size:"large",loading:L,onClick:()=>{q(!0),setTimeout(()=>{f.success("Thanh to√°n th√†nh c√¥ng!"),s([]),A(null),V(!1),q(!1)},1500)},children:"Ho√†n t·∫•t thanh to√°n"}),t.jsx(P,{title:"L∆∞u ƒë∆°n ch·ªù",children:t.jsx(x,{icon:t.jsx(W,{}),onClick:()=>{f.success("ƒê√£ l∆∞u ƒë∆°n h√†ng ch·ªù"),V(!1)},children:"L∆∞u"})}),t.jsx(P,{title:"In h√≥a ƒë∆°n",children:t.jsx(x,{icon:t.jsx(ne,{}),onClick:()=>f.info("ƒêang in h√≥a ƒë∆°n..."),children:"In"})})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),{Text:ut,Title:jt}=p,{TabPane:gt}=O,{useBreakpoint:yt}=M,vt=Object.freeze(Object.defineProperty({__proto__:null,default:({onAddToCart:n,suggestions:s=[]})=>{const[i,l]=e.useState([]),[r,a]=e.useState([]),[c,p]=e.useState(!1),[j,g]=e.useState(""),[y,S]=e.useState("all"),[T,b]=e.useState("name"),[k,I]=e.useState("grid"),[A,N]=e.useState([0,1e6]),[_,P]=e.useState({}),[M,z]=e.useState(new Set);yt();const B=[{id:"all",name:"T·∫•t c·∫£",icon:t.jsx(xe,{}),color:"#1890ff"},{id:"food",name:"Th·ª±c ph·∫©m",icon:"üçé",color:"#52c41a"},{id:"drinks",name:"ƒê·ªì u·ªëng",icon:"ü•§",color:"#13c2c2"},{id:"snacks",name:"Snacks",icon:"üçø",color:"#faad14"},{id:"personal",name:"C√° nh√¢n",icon:"üß¥",color:"#722ed1"},{id:"household",name:"Gia d·ª•ng",icon:"üè†",color:"#fa541c"},{id:"electronics",name:"ƒêi·ªán t·ª≠",icon:"üì±",color:"#2f54eb"},{id:"hot",name:"B√°n ch·∫°y",icon:t.jsx(ge,{}),color:"#f5222d"}],H=[{id:1,name:"Coca Cola 330ml",price:15e3,category:"drinks",image:"/api/placeholder/200/200",barcode:"8934567890123",stock:150,description:"N∆∞·ªõc ng·ªçt c√≥ ga Coca Cola",tags:["B√°n ch·∫°y","M·ªõi"],discount:0,rating:4.5,isHot:!0},{id:2,name:"B√°nh m√¨ sandwich",price:25e3,category:"food",image:"/api/placeholder/200/200",barcode:"8934567890124",stock:50,description:"B√°nh m√¨ sandwich th·ªãt ngu·ªôi",tags:["T∆∞∆°i s·ªëng"],discount:10,rating:4.2},{id:3,name:"N∆∞·ªõc su·ªëi Lavie 500ml",price:8e3,category:"drinks",image:"/api/placeholder/200/200",barcode:"8934567890125",stock:200,description:"N∆∞·ªõc su·ªëi tinh khi·∫øt Lavie",tags:[],discount:0,rating:4},{id:4,name:"Snack khoai t√¢y Lays",price:12e3,category:"snacks",image:"/api/placeholder/200/200",barcode:"8934567890126",stock:80,description:"Snack khoai t√¢y chi√™n v·ªã t·ª± nhi√™n",tags:["Gi√≤n tan"],discount:5,rating:4.3,isHot:!0},{id:5,name:"D·∫ßu g·ªôi Head & Shoulders",price:85e3,category:"personal",image:"/api/placeholder/200/200",barcode:"8934567890127",stock:25,description:"D·∫ßu g·ªôi ch·ªëng g√†u 400ml",tags:["ChƒÉm s√≥c"],discount:15,rating:4.4},{id:6,name:"iPhone Lightning Cable",price:45e4,category:"electronics",image:"/api/placeholder/200/200",barcode:"8934567890128",stock:15,description:"C√°p s·∫°c iPhone Lightning ch√≠nh h√£ng",tags:["Ch√≠nh h√£ng"],discount:0,rating:4.8}];e.useEffect(()=>{F(),L()},[]);const F=async()=>{p(!0);try{setTimeout(()=>{l(H),p(!1)},500)}catch(e){f.error("L·ªói khi t·∫£i s·∫£n ph·∫©m"),p(!1)}},L=()=>{a(B)},q=e.useMemo(()=>{let e=i;return"all"!==y&&(e="hot"===y?e.filter(e=>e.isHot):e.filter(e=>e.category===y)),j&&(e=e.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.barcode.includes(j)||e.description.toLowerCase().includes(j.toLowerCase()))),e=e.filter(e=>e.price>=A[0]&&e.price<=A[1]),e.sort((e,t)=>{switch(T){case"name":return e.name.localeCompare(t.name);case"price-low":return e.price-t.price;case"price-high":return t.price-e.price;case"stock":return t.stock-e.stock;case"rating":return(t.rating||0)-(e.rating||0);case"hot":return(t.isHot?1:0)-(e.isHot?1:0);default:return 0}}),e},[i,y,j,A,T]),G=({product:e})=>{const s=_[e.id]||1,i=e.discount>0?e.price*(1-e.discount/100):e.price;return t.jsx(d,{className:"product-card",hoverable:!0,cover:t.jsxs("div",{className:"product-image-container",children:[t.jsx(V,{src:e.image,alt:e.name,preview:!1,fallback:"/api/placeholder/200/200"}),t.jsxs("div",{className:"product-badges",children:[e.isHot&&t.jsx(E,{count:t.jsx(ge,{style:{color:"#f5222d"}})}),e.discount>0&&t.jsxs(D,{color:"red",className:"discount-tag",children:["-",e.discount,"%"]})]}),t.jsx("div",{className:"product-overlay",children:t.jsxs(m,{children:[t.jsx(x,{type:"primary",ghost:!0,icon:t.jsx(ve,{}),size:"small",onClick:e=>{e.stopPropagation(),f.info("Chi ti·∫øt s·∫£n ph·∫©m")}}),t.jsx(x,{type:M.has(e.id)?"primary":"default",ghost:!0,icon:t.jsx(fe,{}),size:"small",onClick:t=>{var n;t.stopPropagation(),n=e.id,z(e=>{const t=new Set(e);return t.has(n)?(t.delete(n),f.info("ƒê√£ x√≥a kh·ªèi y√™u th√≠ch")):(t.add(n),f.success("ƒê√£ th√™m v√†o y√™u th√≠ch")),t})}})]})})]}),actions:[t.jsx("div",{className:"quantity-selector",children:t.jsx(w,{min:1,max:e.stock,value:s,onChange:t=>((e,t)=>{P(n=>({...n,[e]:t||1}))})(e.id,t),size:"small",style:{width:60}})},"quantity"),t.jsx(x,{type:"primary",icon:t.jsx(de,{}),onClick:()=>((e,t=1)=>{e.stock<t?f.warning("Kh√¥ng ƒë·ªß t·ªìn kho!"):(n(e,t),P(t=>({...t,[e.id]:1})))})(e,s),disabled:0===e.stock,block:!0,children:"Th√™m"},"add")],children:t.jsx(d.Meta,{title:t.jsxs("div",{children:[t.jsx(ut,{strong:!0,ellipsis:{tooltip:e.name},children:e.name}),e.rating&&t.jsx("div",{style:{marginTop:4},children:t.jsxs(m,{size:"small",children:[t.jsx(ye,{style:{color:"#faad14"}}),t.jsx(ut,{type:"secondary",style:{fontSize:"12px"},children:e.rating})]})})]}),description:t.jsxs("div",{children:[t.jsx("div",{className:"product-price",children:e.discount>0?t.jsxs(m,{children:[t.jsxs(ut,{strong:!0,style:{color:"#f5222d"},children:[i.toLocaleString("vi-VN")," ‚Ç´"]}),t.jsxs(ut,{delete:!0,type:"secondary",style:{fontSize:"12px"},children:[e.price.toLocaleString("vi-VN")," ‚Ç´"]})]}):t.jsxs(ut,{strong:!0,style:{color:"#52c41a"},children:[e.price.toLocaleString("vi-VN")," ‚Ç´"]})}),t.jsx("div",{className:"product-stock",children:t.jsxs(ut,{type:"secondary",style:{fontSize:"12px"},children:["T·ªìn: ",e.stock]})}),e.tags.length>0&&t.jsx("div",{className:"product-tags",style:{marginTop:4},children:e.tags.slice(0,2).map(e=>t.jsx(D,{size:"small",color:"blue",children:e},e))})]})})})};return t.jsxs("div",{className:"product-selector",children:[t.jsx(d,{size:"small",className:"product-filters",children:t.jsxs(o,{gutter:[16,16],align:"middle",children:[t.jsx(h,{xs:24,sm:12,md:8,children:t.jsx(u,{placeholder:"T√¨m s·∫£n ph·∫©m...",prefix:t.jsx(le,{}),value:j,onChange:e=>g(e.target.value),allowClear:!0})}),t.jsx(h,{xs:12,sm:6,md:4,children:t.jsxs(v,{placeholder:"S·∫Øp x·∫øp",value:T,onChange:b,style:{width:"100%"},children:[t.jsx(v.Option,{value:"name",children:"T√™n A-Z"}),t.jsx(v.Option,{value:"price-low",children:"Gi√° th·∫•p"}),t.jsx(v.Option,{value:"price-high",children:"Gi√° cao"}),t.jsx(v.Option,{value:"stock",children:"T·ªìn kho"}),t.jsx(v.Option,{value:"rating",children:"ƒê√°nh gi√°"}),t.jsx(v.Option,{value:"hot",children:"B√°n ch·∫°y"})]})}),t.jsx(h,{xs:12,sm:6,md:4,children:t.jsxs(x.Group,{children:[t.jsx(x,{type:"grid"===k?"primary":"default",icon:t.jsx(xe,{}),onClick:()=>I("grid")}),t.jsx(x,{type:"list"===k?"primary":"default",icon:t.jsx(me,{}),onClick:()=>I("list")})]})}),t.jsx(h,{xs:24,md:8,children:t.jsxs(ut,{type:"secondary",children:["Hi·ªÉn th·ªã ",q.length," / ",i.length," s·∫£n ph·∫©m"]})})]})}),t.jsx(d,{size:"small",style:{marginTop:16},children:t.jsx("div",{className:"category-tabs",children:t.jsx(O,{activeKey:y,onChange:S,type:"card",size:"small",children:r.map(e=>t.jsx(gt,{tab:t.jsxs(m,{children:["string"==typeof e.icon?t.jsx("span",{style:{fontSize:"16px"},children:e.icon}):e.icon,e.name]})},e.id))})})}),t.jsx("div",{style:{marginTop:16},children:c?t.jsxs("div",{style:{textAlign:"center",padding:"50px 0"},children:[t.jsx(R,{size:"large"}),t.jsx("div",{style:{marginTop:16},children:t.jsx(ut,{children:"ƒêang t·∫£i s·∫£n ph·∫©m..."})})]}):0===q.length?t.jsx(C,{description:"Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m",image:C.PRESENTED_IMAGE_SIMPLE}):t.jsx(o,{gutter:[16,16],children:q.map(e=>t.jsx(h,{xs:12,sm:8,md:6,lg:6,xl:4,children:t.jsx(G,{product:e})},e.id))})}),t.jsx("div",{className:"product-quick-stats",style:{marginTop:16},children:t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:6,children:t.jsx(d,{size:"small",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(ut,{type:"secondary",children:"T·ªïng s·∫£n ph·∫©m"}),t.jsx("div",{children:t.jsx(ut,{strong:!0,style:{fontSize:"18px"},children:i.length})})]})})}),t.jsx(h,{span:6,children:t.jsx(d,{size:"small",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(ut,{type:"secondary",children:"B√°n ch·∫°y"}),t.jsx("div",{children:t.jsx(ut,{strong:!0,style:{fontSize:"18px",color:"#f5222d"},children:i.filter(e=>e.isHot).length})})]})})}),t.jsx(h,{span:6,children:t.jsx(d,{size:"small",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(ut,{type:"secondary",children:"Gi·∫£m gi√°"}),t.jsx("div",{children:t.jsx(ut,{strong:!0,style:{fontSize:"18px",color:"#faad14"},children:i.filter(e=>e.discount>0).length})})]})})}),t.jsx(h,{span:6,children:t.jsx(d,{size:"small",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(ut,{type:"secondary",children:"S·∫Øp h·∫øt"}),t.jsx("div",{children:t.jsx(ut,{strong:!0,style:{fontSize:"18px",color:"#ff7875"},children:i.filter(e=>e.stock<10).length})})]})})})]})})]})}},Symbol.toStringTag,{value:"Module"})),ft=e.createContext(),St=(e,t={})=>{const{currency:n="VND",locale:s="vi-VN",maximumFractionDigits:i=0,minimumFractionDigits:l=0}=t;return new Intl.NumberFormat(s,{style:"currency",currency:n,maximumFractionDigits:i,minimumFractionDigits:l}).format(e||0)};const Tt=new class{constructor(){this.connected=!1,this.callbacks=[],this.mockScannerInterval=null,this.testBarcodes=["8900001","8900002","8900003","8900004","8900005"]}connect(){return this.connected||setTimeout(()=>{this.connected=!0},500),!0}disconnect(){return!!this.connected&&(this.connected=!1,this.mockScannerInterval&&(clearInterval(this.mockScannerInterval),this.mockScannerInterval=null),!0)}onScan(e){if("function"!=typeof e)throw new Error("Callback must be a function");return this.callbacks.push(e),this.callbacks.length-1}offScan(e){return!(e<0||e>=this.callbacks.length)&&(this.callbacks.splice(e,1),!0)}mockScan(e){this.connected&&this.callbacks.forEach(t=>{try{t(e)}catch(n){}})}startDemo(e=5e3){this.mockScannerInterval&&clearInterval(this.mockScannerInterval),this.connect(),this.mockScannerInterval=setInterval(()=>{const e=Math.floor(Math.random()*this.testBarcodes.length);this.mockScan(this.testBarcodes[e])},e)}stopDemo(){this.mockScannerInterval&&(clearInterval(this.mockScannerInterval),this.mockScannerInterval=null)}},{Title:bt,Text:Ct}=p,{Search:kt}=u,{Option:It}=v,At=Object.freeze(Object.defineProperty({__proto__:null,default:({onCheckout:n,onCustomerSelect:s})=>{const{items:i,addItem:l,removeItem:r,updateQuantity:a,clearCart:c,applyDiscount:p,totalAmount:u,totalItems:j,totalDiscount:g,netAmount:y}=(()=>{const t=e.useContext(ft);if(void 0===t)throw new Error("useCartContext must be used within a CartProvider");return t})(),[T,b]=e.useState(""),[k,A]=e.useState(""),[E,N]=e.useState("percent"),[_,O]=e.useState(0),[M,R]=e.useState([]),[V,B]=e.useState(!1),[H,F]=e.useState(!1);e.useEffect(()=>{const e=e=>{f.info(`ƒê√£ qu√©t m√£: ${e}`),q(e)};return V?(Tt.connect(),Tt.onScan(e)):Tt.disconnect(),()=>{Tt.disconnect()}},[V]);const L=[{id:"1",name:"Laptop Dell XPS 13",price:25e6,barcode:"8900001",inStock:15},{id:"2",name:"Chu·ªôt kh√¥ng d√¢y Logitech",price:45e4,barcode:"8900002",inStock:45},{id:"3",name:"B√†n ph√≠m c∆° AKKO",price:12e5,barcode:"8900003",inStock:23},{id:"4",name:"Tai nghe Sony WH-1000XM4",price:45e5,barcode:"8900004",inStock:8},{id:"5",name:"M√†n h√¨nh LG 27 inch 4K",price:65e5,barcode:"8900005",inStock:12}],q=e=>{F(!0),b(e),setTimeout(()=>{const t=L.filter(t=>t.barcode===e||t.name.toLowerCase().includes(e.toLowerCase()));R(t),F(!1),V&&1===t.length&&G(t[0])},500)},G=e=>{e.inStock<=0?f.error(`S·∫£n ph·∫©m ${e.name} ƒë√£ h·∫øt h√†ng!`):(l({id:e.id,name:e.name,price:e.price,quantity:1,discount:0,maxQuantity:e.inStock}),f.success(`ƒê√£ th√™m ${e.name} v√†o gi·ªè h√†ng`))},$=[{title:"S·∫£n ph·∫©m",dataIndex:"name",key:"name",ellipsis:!0},{title:"ƒê∆°n gi√°",dataIndex:"price",key:"price",render:e=>St(e),width:120},{title:"SL",dataIndex:"quantity",key:"quantity",width:80,render:(e,n)=>t.jsx(w,{min:1,max:n.maxQuantity,value:e,onChange:e=>((e,t)=>{const n=i.find(t=>t.id===e);if(n){if(t<=0)return void f.error("S·ªë l∆∞·ª£ng ph·∫£i l·ªõn h∆°n 0");t>n.maxQuantity&&(f.warning(`Ch·ªâ c√≤n ${n.maxQuantity} s·∫£n ph·∫©m trong kho!`),t=n.maxQuantity),a(e,t)}})(n.id,e),size:"small"})},{title:"Th√†nh ti·ªÅn",key:"total",width:120,render:(e,t)=>St(t.price*t.quantity)},{title:"",key:"action",width:60,render:(e,n)=>t.jsx(m,{children:t.jsx(z,{title:"X√≥a s·∫£n ph·∫©m n√†y?",onConfirm:()=>r(n.id),okText:"X√≥a",cancelText:"H·ªßy",children:t.jsx(x,{type:"text",danger:!0,icon:t.jsx(ce,{}),size:"small"})})})}],K=[{title:"S·∫£n ph·∫©m",dataIndex:"name",key:"name",ellipsis:!0},{title:"Gi√°",dataIndex:"price",key:"price",render:e=>St(e),width:120},{title:"T·ªìn kho",dataIndex:"inStock",key:"inStock",width:80,render:e=>t.jsx(D,{color:e>0?"green":"red",children:e})},{title:"",key:"action",width:60,render:(e,n)=>t.jsx(x,{type:"primary",size:"small",icon:t.jsx(ie,{}),onClick:()=>G(n),disabled:n.inStock<=0,children:"Th√™m"})}];return t.jsx("div",{className:"cart-manager",children:t.jsxs(o,{gutter:[16,16],children:[t.jsx(h,{xs:24,md:16,children:t.jsxs(d,{title:t.jsxs(m,{children:[t.jsx(de,{}),t.jsx("span",{children:"Gi·ªè h√†ng"}),t.jsxs(D,{color:"blue",children:[j," s·∫£n ph·∫©m"]})]}),extra:t.jsxs(m,{children:[t.jsx(x,{type:"primary",danger:!0,icon:t.jsx(ce,{}),onClick:()=>(c(),void f.info("ƒê√£ x√≥a gi·ªè h√†ng")),disabled:0===i.length,children:"X√≥a gi·ªè h√†ng"}),t.jsx(x,{type:"primary",icon:t.jsx(W,{}),disabled:0===i.length,children:"L∆∞u gi·ªè h√†ng"})]}),children:[0===i.length?t.jsx(C,{description:"Gi·ªè h√†ng tr·ªëng"}):t.jsx(I,{columns:$,dataSource:i.map(e=>({...e,key:e.id})),pagination:!1,size:"small",scroll:{y:300}}),t.jsx("div",{style:{marginTop:16},children:t.jsx(o,{justify:"end",children:t.jsx(h,{xs:24,md:12,lg:8,children:t.jsx(d,{size:"small",children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:"T·ªïng ti·ªÅn:"}),t.jsx(h,{children:t.jsx(Ct,{strong:!0,children:St(u)})})]}),t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:"Chi·∫øt kh·∫•u:"}),t.jsx(h,{children:t.jsxs(Ct,{type:"danger",children:["- ",St(g)]})})]}),t.jsx(S,{style:{margin:"8px 0"}}),t.jsxs(o,{justify:"space-between",children:[t.jsx(h,{children:t.jsx(Ct,{strong:!0,children:"Th√†nh ti·ªÅn:"})}),t.jsx(h,{children:t.jsx(Ct,{strong:!0,style:{fontSize:18},children:St(y)})})]}),t.jsx(S,{style:{margin:"8px 0"}}),t.jsxs(o,{gutter:8,children:[t.jsx(h,{span:8,children:t.jsxs(v,{value:E,onChange:N,style:{width:"100%"},size:"small",children:[t.jsx(It,{value:"percent",children:"%"}),t.jsx(It,{value:"amount",children:"VND"})]})}),t.jsx(h,{span:10,children:t.jsx(w,{min:0,max:"percent"===E?100:void 0,value:_,onChange:O,style:{width:"100%"},size:"small",addonAfter:"percent"===E?"%":void 0,formatter:"amount"===E?e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","):void 0,parser:"amount"===E?e=>e.replace(/\$\s?|(,*)/g,""):void 0})}),t.jsx(h,{span:6,children:t.jsx(x,{type:"primary",size:"small",icon:t.jsx(Se,{}),onClick:()=>{_<0?f.error("Gi√° tr·ªã chi·∫øt kh·∫•u kh√¥ng h·ª£p l·ªá"):"percent"===E&&_>100?f.error("Gi√° tr·ªã chi·∫øt kh·∫•u kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100%"):"amount"===E&&_>u?f.error("Gi√° tr·ªã chi·∫øt kh·∫•u kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° t·ªïng s·ªë ti·ªÅn"):(p({type:E,value:_}),f.success("ƒê√£ √°p d·ª•ng chi·∫øt kh·∫•u"))},style:{width:"100%"},disabled:0===i.length,children:"√Åp d·ª•ng"})})]}),t.jsx(x,{type:"primary",block:!0,size:"large",onClick:()=>{0!==i.length?"function"==typeof n&&n({items:i,totalAmount:u,totalDiscount:g,netAmount:y}):f.error("Gi·ªè h√†ng tr·ªëng!")},disabled:0===i.length,style:{marginTop:16},children:"Thanh to√°n"})]})})})})})]})}),t.jsx(h,{xs:24,md:8,children:t.jsx(d,{title:t.jsxs(m,{children:[t.jsx(Te,{}),t.jsx("span",{children:"T√¨m ki·∫øm s·∫£n ph·∫©m"})]}),extra:t.jsx(P,{title:V?"T·∫Øt m√°y qu√©t":"B·∫≠t m√°y qu√©t",children:t.jsx(x,{type:V?"primary":"default",icon:V?t.jsx(U,{}):t.jsx(Te,{}),onClick:()=>B(!V)})}),children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsx(kt,{placeholder:"Nh·∫≠p t√™n ho·∫∑c m√£ v·∫°ch",enterButton:"T√¨m ki·∫øm",value:T,onChange:e=>b(e.target.value),onSearch:q,loading:H,allowClear:!0}),t.jsx(I,{columns:K,dataSource:M.map(e=>({...e,key:e.id})),pagination:!1,size:"small",scroll:{y:300},locale:{emptyText:"Kh√¥ng c√≥ s·∫£n ph·∫©m"}})]})})})]})})}},Symbol.toStringTag,{value:"Module"}));const wt=new class{constructor(){this.connected=!1,this.printers=[{id:"thermal1",name:"EPSON TM-T82 (Thermal)",type:"thermal",status:"ready",default:!0},{id:"thermal2",name:"XPRINTER XP-58 (Thermal)",type:"thermal",status:"ready",default:!1},{id:"laser1",name:"HP LaserJet Pro",type:"laser",status:"ready",default:!1}],this.selectedPrinter=this.printers[0]}getAvailablePrinters(){return this.printers}selectPrinter(e){const t=this.printers.find(t=>t.id===e);return t?(this.selectedPrinter=t,t):null}getSelectedPrinter(){return this.selectedPrinter}connect(){return new Promise(e=>{setTimeout(()=>{this.connected=!0,e(!0)},800)})}disconnect(){return new Promise(e=>{this.connected?setTimeout(()=>{this.connected=!1,e(!0)},500):e(!1)})}print(e={}){return new Promise((t,n)=>{const{content:s,type:i="receipt"}=e;this.connected?this._doPrint(s,i).then(t).catch(n):this.connect().then(()=>this._doPrint(s,i)).then(t).catch(n)})}_doPrint(e,t){return new Promise((t,n)=>{e?setTimeout(()=>{if(Math.random()>.1)t({success:!0,printerId:this.selectedPrinter.id,timestamp:(new Date).toISOString()});else{const e=["Paper jam","Out of paper","Low ink","Connection lost","Printer busy"],t=e[Math.floor(Math.random()*e.length)];n(new Error(`Print failed: ${t}`))}},2e3):n(new Error("No content to print"))})}checkStatus(){return new Promise(e=>{setTimeout(()=>{const t=["ready","ready","ready","ready","low_paper","low_ink","ready"],n=t[Math.floor(Math.random()*t.length)],s={...this.selectedPrinter,status:n};this.selectedPrinter=s,this.printers=this.printers.map(e=>e.id===s.id?s:e),e(s)},500)})}},{Title:Et,Text:Nt}=p,{Step:_t}=B,{Option:Pt}=v,Dt=Object.freeze(Object.defineProperty({__proto__:null,default:({orderData:n,onComplete:s,onCancel:i})=>{const[l]=g.useForm(),[r,a]=e.useState(0),[c,p]=e.useState(!1),[j,y]=e.useState("idle"),[v,T]=e.useState("cash"),[b,C]=e.useState(0),[k,I]=e.useState("idle"),[E,N]=e.useState(null),_=[{value:"cash",label:"Ti·ªÅn m·∫∑t",icon:t.jsx(he,{})},{value:"card",label:"Th·∫ª t√≠n d·ª•ng/ghi n·ª£",icon:t.jsx(ee,{})},{value:"momo",label:"V√≠ MoMo",icon:t.jsx(be,{})},{value:"vnpay",label:"VNPay",icon:t.jsx(re,{})},{value:"zalopay",label:"ZaloPay",icon:t.jsx(be,{})},{value:"bank_transfer",label:"Chuy·ªÉn kho·∫£n",icon:t.jsx(pe,{})}],P=[1e4,2e4,5e4,1e5,2e5,5e5];e.useEffect(()=>{n&&n.netAmount&&(C(n.netAmount),l.setFieldsValue({amount:n.netAmount,paymentMethod:"cash"}))},[n,l]);const D=e=>{C(e);const t=e-(n?.netAmount||0);l.setFieldsValue({changeAmount:t>0?t:0})},O=()=>{const e=n?.netAmount||0;C(e),D(e)},M=async e=>{y("processing"),p(!0);try{await new Promise(e=>setTimeout(e,1500));const t={id:`HD${Date.now().toString().slice(-6)}`,date:(new Date).toLocaleString(),items:n.items,totalAmount:n.totalAmount,totalDiscount:n.totalDiscount,netAmount:n.netAmount,paymentMethod:e.paymentMethod,cashAmount:e.cashAmount,changeAmount:e.changeAmount,customerName:e.customerName||"Kh√°ch l·∫ª",customerPhone:e.customerPhone||"",cashier:"Nguy·ªÖn VƒÉn A"};N(t),y("success"),a(1),f.success("Thanh to√°n th√†nh c√¥ng!")}catch(t){y("error"),f.error("C√≥ l·ªói x·∫£y ra khi x·ª≠ l√Ω thanh to√°n!")}finally{p(!1)}},R=async()=>{if(E){I("printing");try{await wt.connect(),await new Promise(e=>setTimeout(e,1500)),await wt.printReceipt(E),I("success"),f.success("ƒê√£ in h√≥a ƒë∆°n th√†nh c√¥ng!")}catch(e){I("error"),f.error("C√≥ l·ªói x·∫£y ra khi in h√≥a ƒë∆°n!")}}},V=()=>{"function"==typeof s&&s({...E,status:"completed"})},z=()=>{"function"==typeof i&&i()};return t.jsxs("div",{className:"payment-processor",children:[t.jsxs(B,{current:r,style:{marginBottom:24},children:[t.jsx(_t,{title:"Thanh to√°n",description:"Nh·∫≠p th√¥ng tin thanh to√°n"}),t.jsx(_t,{title:"Ho√†n th√†nh",description:"X·ª≠ l√Ω h√≥a ƒë∆°n"})]}),t.jsx("div",{className:"steps-content",children:(()=>{switch(r){case 0:return t.jsxs(g,{form:l,layout:"vertical",onFinish:M,initialValues:{paymentMethod:"cash",amount:n?.netAmount||0},children:[t.jsxs(d,{className:"order-summary",size:"small",style:{marginBottom:16},children:[t.jsxs(F,{title:"Th√¥ng tin ƒë∆°n h√†ng",size:"small",column:2,children:[t.jsx(F.Item,{label:"S·ªë s·∫£n ph·∫©m",children:n?.items?.length||0}),t.jsx(F.Item,{label:"T·ªïng s·ªë l∆∞·ª£ng",children:n?.items?.reduce((e,t)=>e+t.quantity,0)||0}),t.jsx(F.Item,{label:"T·ªïng ti·ªÅn",children:St(n?.totalAmount||0)}),t.jsx(F.Item,{label:"Chi·∫øt kh·∫•u",children:St(n?.totalDiscount||0)})]}),t.jsx(S,{style:{margin:"12px 0"}}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx(Nt,{type:"secondary",children:"Th√†nh ti·ªÅn:"}),t.jsx(Et,{level:3,style:{margin:0},children:St(n?.netAmount||0)})]})]}),t.jsx(d,{title:"Th√¥ng tin kh√°ch h√†ng",size:"small",style:{marginBottom:16},children:t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"customerName",label:"T√™n kh√°ch h√†ng",children:t.jsx(u,{prefix:t.jsx(J,{}),placeholder:"Kh√°ch l·∫ª"})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"customerPhone",label:"S·ªë ƒëi·ªán tho·∫°i",children:t.jsx(u,{prefix:t.jsx(be,{}),placeholder:"S·ªë ƒëi·ªán tho·∫°i"})})})]})}),t.jsxs(d,{title:"Ph∆∞∆°ng th·ª©c thanh to√°n",size:"small",style:{marginBottom:16},children:[t.jsx(g.Item,{name:"paymentMethod",rules:[{required:!0,message:"Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n!"}],children:t.jsx(A.Group,{onChange:e=>{return t=e.target.value,T(t),void("cash"===t?l.setFieldsValue({cashAmount:n?.netAmount||0,cardNumber:void 0,cardHolderName:void 0,cardExpiry:void 0,cardCVC:void 0}):l.setFieldsValue({cashAmount:void 0,changeAmount:void 0}));var t},buttonStyle:"solid",style:{width:"100%"},children:t.jsx(m,{direction:"vertical",style:{width:"100%"},children:_.map(e=>t.jsxs(A.Button,{value:e.value,style:{width:"100%",height:"40px",lineHeight:"32px"},children:[e.icon," ",e.label]},e.value))})})}),t.jsxs("div",{className:"payment-details",children:["cash"===v&&t.jsxs(t.Fragment,{children:[t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(g.Item,{label:"S·ªë ti·ªÅn kh√°ch ƒë∆∞a",name:"cashAmount",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn kh√°ch ƒë∆∞a!"},{validator:(e,t)=>t<(n?.netAmount||0)?Promise.reject("S·ªë ti·ªÅn kh√¥ng ƒë·ªß!"):Promise.resolve()}],children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),min:n?.netAmount||0,step:1e4,value:b,onChange:D})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{label:"Ti·ªÅn th·ª´a",name:"changeAmount",children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),disabled:!0})})})]}),t.jsxs("div",{style:{marginTop:16},children:[t.jsx(Nt,{strong:!0,children:"Ch·ªçn m·ªánh gi√°:"}),t.jsx("div",{style:{marginTop:8},children:t.jsxs(m,{wrap:!0,children:[P.map(e=>t.jsx(x,{onClick:()=>(e=>{const t=(b||0)+e;C(t),D(t)})(e),children:St(e)},e)),t.jsx(x,{type:"primary",ghost:!0,onClick:O,children:"Ti·ªÅn ch·∫µn"})]})})]})]}),"card"===v&&t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:24,children:t.jsx(g.Item,{label:"S·ªë th·∫ª",name:"cardNumber",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p s·ªë th·∫ª!"}],children:t.jsx(u,{placeholder:"S·ªë th·∫ª",maxLength:19})})}),t.jsx(h,{span:24,children:t.jsx(g.Item,{label:"T√™n ch·ªß th·∫ª",name:"cardHolderName",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n ch·ªß th·∫ª!"}],children:t.jsx(u,{placeholder:"T√™n ch·ªß th·∫ª"})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{label:"H·∫°n th·∫ª",name:"cardExpiry",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p h·∫°n th·∫ª!"}],children:t.jsx(u,{placeholder:"MM/YY",maxLength:5})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{label:"CVC/CVV",name:"cardCVC",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ CVC/CVV!"}],children:t.jsx(u,{placeholder:"CVC/CVV",maxLength:4})})})]}),("momo"===v||"vnpay"===v||"zalopay"===v)&&t.jsxs("div",{style:{textAlign:"center",padding:"20px 0"},children:[t.jsx(re,{style:{fontSize:100,marginBottom:16}}),t.jsx(Et,{level:4,children:"Qu√©t m√£ QR ƒë·ªÉ thanh to√°n"}),t.jsxs(Nt,{type:"secondary",children:["S·ªë ti·ªÅn: ",St(n?.netAmount||0)]}),t.jsx("br",{}),t.jsxs(Nt,{type:"secondary",children:["S·ª≠ d·ª•ng ·ª©ng d·ª•ng ","momo"===v?"MoMo":"vnpay"===v?"VNPay":"ZaloPay"," ƒë·ªÉ qu√©t m√£"]}),t.jsx(g.Item,{name:"transactionId",label:"M√£ giao d·ªãch",style:{marginTop:16},children:t.jsx(u,{placeholder:"Nh·∫≠p m√£ giao d·ªãch (n·∫øu c√≥)"})})]}),"bank_transfer"===v&&t.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:t.jsxs(m,{direction:"vertical",children:[t.jsx(Nt,{strong:!0,children:"Th√¥ng tin chuy·ªÉn kho·∫£n"}),t.jsxs(F,{column:1,children:[t.jsx(F.Item,{label:"T√™n t√†i kho·∫£n",children:"CONG TY TNHH TRUONG PHAT"}),t.jsx(F.Item,{label:"S·ªë t√†i kho·∫£n",children:"0123456789"}),t.jsx(F.Item,{label:"Ng√¢n h√†ng",children:"Vietcombank - CN H√≤a B√¨nh"}),t.jsx(F.Item,{label:"S·ªë ti·ªÅn",children:St(n?.netAmount||0)}),t.jsxs(F.Item,{label:"N·ªôi dung",children:["THANHTOAN HD",Date.now().toString().slice(-6)]})]}),t.jsx(re,{style:{fontSize:100,margin:"16px 0"}}),t.jsx(g.Item,{name:"transactionId",label:"M√£ giao d·ªãch",children:t.jsx(u,{placeholder:"Nh·∫≠p m√£ giao d·ªãch ng√¢n h√†ng"})})]})})]})]}),t.jsx(d,{title:"Ghi ch√∫",size:"small",style:{marginBottom:16},children:t.jsx(g.Item,{name:"note",children:t.jsx(u.TextArea,{rows:2,placeholder:"Ghi ch√∫ cho ƒë∆°n h√†ng (n·∫øu c√≥)"})})}),t.jsx(g.Item,{children:t.jsxs(m,{style:{width:"100%",justifyContent:"space-between"},children:[t.jsx(x,{type:"default",onClick:z,icon:t.jsx(Ce,{}),children:"Quay l·∫°i"}),t.jsx(x,{type:"primary",htmlType:"submit",loading:"processing"===j,icon:t.jsx(te,{}),children:"X√°c nh·∫≠n thanh to√°n"})]})})]});case 1:return t.jsx("div",{className:"payment-completion",children:t.jsx(H,{status:"success",title:"Thanh to√°n th√†nh c√¥ng!",subTitle:`M√£ h√≥a ƒë∆°n: ${E?.id||"HD000000"} - ${E?.date||(new Date).toLocaleString()}`,extra:[t.jsx(x,{type:"primary",onClick:R,loading:"printing"===k,icon:t.jsx(ne,{}),children:"In h√≥a ƒë∆°n"},"print"),t.jsx(x,{onClick:V,icon:t.jsx(te,{}),children:"Ho√†n th√†nh"},"complete"),t.jsx(x,{type:"default",icon:t.jsx(de,{}),onClick:V,children:"ƒê∆°n h√†ng m·ªõi"},"new")],children:t.jsx("div",{className:"receipt-summary",children:t.jsxs(d,{title:"Chi ti·∫øt h√≥a ƒë∆°n",style:{marginTop:16},children:[t.jsxs(F,{column:2,children:[t.jsx(F.Item,{label:"Kh√°ch h√†ng",children:E?.customerName||"Kh√°ch l·∫ª"}),t.jsx(F.Item,{label:"S·ªë ƒëi·ªán tho·∫°i",children:E?.customerPhone||"N/A"}),t.jsx(F.Item,{label:"Ph∆∞∆°ng th·ª©c thanh to√°n",children:_.find(e=>e.value===E?.paymentMethod)?.label||"Ti·ªÅn m·∫∑t"}),t.jsx(F.Item,{label:"Thu ng√¢n",children:E?.cashier||"N/A"})]}),t.jsx(S,{style:{margin:"12px 0"}}),t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0"},children:[t.jsx("th",{style:{padding:"8px",textAlign:"left"},children:"S·∫£n ph·∫©m"}),t.jsx("th",{style:{padding:"8px",textAlign:"right"},children:"SL"}),t.jsx("th",{style:{padding:"8px",textAlign:"right"},children:"ƒê∆°n gi√°"}),t.jsx("th",{style:{padding:"8px",textAlign:"right"},children:"Th√†nh ti·ªÅn"})]})}),t.jsx("tbody",{children:E?.items?.map((e,n)=>t.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0"},children:[t.jsx("td",{style:{padding:"8px",textAlign:"left"},children:e.name}),t.jsx("td",{style:{padding:"8px",textAlign:"right"},children:e.quantity}),t.jsx("td",{style:{padding:"8px",textAlign:"right"},children:St(e.price)}),t.jsx("td",{style:{padding:"8px",textAlign:"right"},children:St(e.price*e.quantity)})]},n))})]}),t.jsx(S,{style:{margin:"12px 0"}}),t.jsx(o,{children:t.jsx(h,{span:12,offset:12,children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Nt,{children:"T·ªïng ti·ªÅn:"}),t.jsx(Nt,{children:St(E?.totalAmount||0)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Nt,{children:"Chi·∫øt kh·∫•u:"}),t.jsxs(Nt,{type:"danger",children:["- ",St(E?.totalDiscount||0)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Nt,{strong:!0,children:"Th√†nh ti·ªÅn:"}),t.jsx(Nt,{strong:!0,children:St(E?.netAmount||0)})]}),"cash"===E?.paymentMethod&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Nt,{children:"Ti·ªÅn kh√°ch ƒë∆∞a:"}),t.jsx(Nt,{children:St(E?.cashAmount||0)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx(Nt,{children:"Ti·ªÅn th·ª´a:"}),t.jsx(Nt,{children:St(E?.changeAmount||0)})]})]})]})})})]})})})});default:return null}})()})]})}},Symbol.toStringTag,{value:"Module"})),{Title:Ot,Text:Mt,Paragraph:Rt}=p,{Option:Vt}=v,zt=Object.freeze(Object.defineProperty({__proto__:null,default:({orderData:n,visible:i,onClose:l,customerInfo:r})=>{const[a,p]=e.useState("thermal"),[u,j]=e.useState(!1),[y,T]=e.useState(!1),[b,C]=e.useState(!1),[k,I]=e.useState(!1),[w,E]=e.useState([{label:"M√°y in nhi·ªát EPSON TM-T82",value:"thermal1"},{label:"M√°y in nhi·ªát XPRINTER XP-58",value:"thermal2"},{label:"M√°y in th∆∞·ªùng HP LaserJet Pro",value:"laser1"}]),[N,_]=e.useState("thermal1"),D=e.useRef(),O=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e),M=e=>{const t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},V=()=>n?.items?.reduce((e,t)=>e+t.price*t.quantity,0)||0,z=s.useReactToPrint({content:()=>D.current,onBeforeprint:()=>{T(!0),C(!1),I(!1)},onAfterPrint:()=>{setTimeout(()=>{T(!1),C(!0),u&&n?.customer?.email&&f.success(`ƒê√£ g·ª≠i h√≥a ƒë∆°n ƒëi·ªán t·ª≠ ƒë·∫øn ${n.customer.email}`)},1500)},onError:()=>{T(!1),I(!0)}});e.useEffect(()=>{i||(T(!1),C(!1),I(!1))},[i]);return t.jsx(c,{title:t.jsxs(t.Fragment,{children:[t.jsx(ne,{})," In h√≥a ƒë∆°n"]}),open:i,onCancel:l,width:800,footer:null,destroyOnClose:!0,children:b?t.jsx(H,{status:"success",title:"In h√≥a ƒë∆°n th√†nh c√¥ng!",subTitle:"H√≥a ƒë∆°n ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn m√°y in",extra:[t.jsx(x,{onClick:()=>C(!1),children:"In h√≥a ƒë∆°n kh√°c"},"print-another"),t.jsx(x,{type:"primary",onClick:l,children:"ƒê√≥ng"},"close")]}):k?t.jsx(H,{status:"error",title:"L·ªói khi in h√≥a ƒë∆°n!",subTitle:"Kh√¥ng th·ªÉ k·∫øt n·ªëi v·ªõi m√°y in. Vui l√≤ng ki·ªÉm tra l·∫°i k·∫øt n·ªëi m√°y in.",extra:[t.jsx(x,{onClick:()=>I(!1),children:"Th·ª≠ l·∫°i"},"try-again"),t.jsx(x,{type:"primary",onClick:l,children:"ƒê√≥ng"},"close")]}):y?t.jsxs("div",{style:{textAlign:"center",padding:"50px 0"},children:[t.jsx(R,{size:"large"}),t.jsx("p",{style:{marginTop:20},children:"ƒêang in h√≥a ƒë∆°n..."})]}):t.jsx("div",{style:{padding:"0 20px"},children:t.jsxs(o,{gutter:[24,24],children:[t.jsx(h,{span:8,children:t.jsxs(d,{title:"T√πy ch·ªçn in",size:"small",children:[t.jsxs(g,{layout:"vertical",children:[t.jsx(g.Item,{label:"Lo·∫°i h√≥a ƒë∆°n",children:t.jsx(A.Group,{value:a,onChange:e=>p(e.target.value),style:{width:"100%"},children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsx(A,{value:"thermal",children:t.jsx(Mt,{children:"H√≥a ƒë∆°n nhi·ªát (80mm)"})}),t.jsx(A,{value:"a4",children:t.jsx(Mt,{children:"H√≥a ƒë∆°n A4"})})]})})}),t.jsx(g.Item,{label:"M√°y in",children:t.jsx(v,{value:N,onChange:e=>_(e),style:{width:"100%"},children:w.map(e=>t.jsx(Vt,{value:e.value,children:e.label},e.value))})}),t.jsx(g.Item,{label:"T√πy ch·ªçn kh√°c",children:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(Mt,{children:"G·ª≠i qua email"}),t.jsx(L,{checked:u,onChange:j,disabled:!n?.customer?.email})]}),!n?.customer?.email&&t.jsx(Mt,{type:"secondary",style:{fontSize:"12px"},children:"Kh√°ch h√†ng kh√¥ng c√≥ email"})]})})]}),t.jsx(S,{style:{margin:"12px 0"}}),t.jsx(m,{style:{width:"100%"},children:t.jsx(x,{type:"primary",icon:t.jsx(ne,{}),onClick:z,block:!0,children:"In h√≥a ƒë∆°n"})}),t.jsxs(m,{style:{width:"100%",marginTop:"10px"},children:[t.jsx(P,{title:"L∆∞u d∆∞·ªõi d·∫°ng PDF",children:t.jsx(x,{icon:t.jsx(ke,{}),children:"PDF"})}),t.jsx(P,{title:"G·ª≠i qua email",children:t.jsx(x,{icon:t.jsx(se,{}),disabled:!n?.customer?.email,children:"Email"})}),t.jsx(P,{title:"L∆∞u v·ªÅ m√°y t√≠nh",children:t.jsx(x,{icon:t.jsx(Ie,{}),children:"L∆∞u"})})]})]})}),t.jsx(h,{span:16,children:t.jsx(d,{title:"Xem tr∆∞·ªõc h√≥a ƒë∆°n",size:"small",style:{maxHeight:"600px",overflow:"auto"},children:t.jsx("div",{style:{background:"#f0f2f5",padding:"20px",display:"flex",justifyContent:"center"},children:"thermal"===a?t.jsxs("div",{ref:D,className:"thermal-receipt",style:{width:"80mm",padding:"10mm 5mm",margin:"0 auto",backgroundColor:"white",fontFamily:"monospace",fontSize:"12px",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"10px"},children:[t.jsx("h1",{style:{margin:"0",fontSize:"16px",fontWeight:"bold"},children:"TR∆Ø·ªúNG PH√ÅT COMPUTER"}),t.jsx("p",{style:{margin:"5px 0"},children:"H√≤a B√¨nh, Vi·ªát Nam"}),t.jsx("p",{style:{margin:"5px 0"},children:"Hotline: 0836.768.597"}),t.jsx("p",{style:{margin:"5px 0"},children:"MST: 5400 111 222"})]}),t.jsxs("div",{style:{textAlign:"center",marginBottom:"10px",borderBottom:"1px dashed #000",paddingBottom:"10px"},children:[t.jsx("h2",{style:{margin:"0",fontSize:"14px",fontWeight:"bold"},children:"H√ìA ƒê∆†N B√ÅN H√ÄNG"}),t.jsxs("p",{style:{margin:"5px 0"},children:["S·ªë: ",n?.id||"POS-00001"]}),t.jsxs("p",{style:{margin:"5px 0"},children:["Ng√†y: ",M(n?.date||new Date)]})]}),n?.customer&&t.jsxs("div",{style:{marginBottom:"10px",borderBottom:"1px dashed #000",paddingBottom:"10px"},children:[t.jsxs("p",{style:{margin:"3px 0"},children:[t.jsx("strong",{children:"Kh√°ch h√†ng:"})," ",n.customer.name]}),t.jsxs("p",{style:{margin:"3px 0"},children:[t.jsx("strong",{children:"SƒêT:"})," ",n.customer.phone]}),n.customer.address&&t.jsxs("p",{style:{margin:"3px 0"},children:[t.jsx("strong",{children:"ƒê·ªãa ch·ªâ:"})," ",n.customer.address]})]}),t.jsx("div",{style:{marginBottom:"10px"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"1px dashed #000"},children:[t.jsx("th",{style:{textAlign:"left",paddingBottom:"5px"},children:"M·∫∑t h√†ng"}),t.jsx("th",{style:{textAlign:"right",paddingBottom:"5px"},children:"SL"}),t.jsx("th",{style:{textAlign:"right",paddingBottom:"5px"},children:"ƒê.Gi√°"}),t.jsx("th",{style:{textAlign:"right",paddingBottom:"5px"},children:"T.Ti·ªÅn"})]})}),t.jsx("tbody",{children:n?.items?.map((e,n)=>t.jsxs("tr",{style:{borderBottom:"1px dotted #ccc"},children:[t.jsx("td",{style:{textAlign:"left",paddingTop:"5px",paddingBottom:"5px"},children:e.name}),t.jsx("td",{style:{textAlign:"right",paddingTop:"5px",paddingBottom:"5px"},children:e.quantity}),t.jsx("td",{style:{textAlign:"right",paddingTop:"5px",paddingBottom:"5px"},children:O(e.price)}),t.jsx("td",{style:{textAlign:"right",paddingTop:"5px",paddingBottom:"5px"},children:O(e.price*e.quantity)})]},n))})]})}),t.jsxs("div",{style:{marginBottom:"10px",borderBottom:"1px dashed #000",paddingBottom:"10px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"5px 0"},children:[t.jsx("span",{children:"T·ªïng ti·ªÅn h√†ng:"}),t.jsx("span",{children:O(V())})]}),n?.discount>0&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"5px 0"},children:[t.jsx("span",{children:"Gi·∫£m gi√°:"}),t.jsxs("span",{children:["-",O(n.discount)]})]}),n?.tax>0&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"5px 0"},children:[t.jsx("span",{children:"Thu·∫ø (VAT 10%):"}),t.jsx("span",{children:O(n.tax)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"5px 0",fontWeight:"bold"},children:[t.jsx("span",{children:"Thanh to√°n:"}),t.jsx("span",{children:O(n?.total||0)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"5px 0"},children:[t.jsx("span",{children:"Ti·ªÅn kh√°ch ƒë∆∞a:"}),t.jsx("span",{children:O(n?.amountPaid||0)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"5px 0"},children:[t.jsx("span",{children:"Ti·ªÅn th·ª´a:"}),t.jsx("span",{children:O((n?.amountPaid||0)-(n?.total||0))})]})]}),t.jsxs("div",{style:{marginBottom:"10px",borderBottom:"1px dashed #000",paddingBottom:"10px"},children:[t.jsxs("p",{style:{margin:"3px 0"},children:[t.jsx("strong",{children:"Ph∆∞∆°ng th·ª©c:"})," ",n?.paymentMethod||"Ti·ªÅn m·∫∑t"]}),t.jsxs("p",{style:{margin:"3px 0"},children:[t.jsx("strong",{children:"Thu ng√¢n:"})," ",n?.cashier||"Nguy·ªÖn VƒÉn A"]})]}),t.jsxs("div",{style:{textAlign:"center",marginBottom:"10px"},children:[t.jsx("p",{style:{margin:"5px 0"},children:"C·∫£m ∆°n Qu√Ω kh√°ch ƒë√£ mua h√†ng!"}),t.jsx("p",{style:{margin:"5px 0"},children:"H·∫πn g·∫∑p l·∫°i qu√Ω kh√°ch!"}),n?.id&&t.jsx("div",{style:{margin:"10px auto",width:"100px",height:"100px"},children:t.jsx(Fe,{value:`https://truongphat.com/invoice/${n.id}`,size:100,renderAs:"svg",level:"H"})}),t.jsx("p",{style:{margin:"5px 0",fontSize:"10px"},children:"Truy c·∫≠p website: truongphat.com"}),t.jsx("p",{style:{margin:"5px 0",fontSize:"10px"},children:"Hotline: 0836.768.597"})]})]}):t.jsxs("div",{ref:D,className:"a4-receipt",style:{width:"210mm",padding:"20mm",margin:"0 auto",backgroundColor:"white",fontFamily:"Arial, sans-serif",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[t.jsxs("div",{children:[t.jsx("h1",{style:{margin:"0",fontSize:"24px"},children:"TR∆Ø·ªúNG PH√ÅT COMPUTER"}),t.jsx("p",{style:{margin:"5px 0"},children:"ƒê·ªãa ch·ªâ: H√≤a B√¨nh, Vi·ªát Nam"}),t.jsx("p",{style:{margin:"5px 0"},children:"Hotline: 0836.768.597"}),t.jsx("p",{style:{margin:"5px 0"},children:"Email: contact@truongphat.com"}),t.jsx("p",{style:{margin:"5px 0"},children:"MST: 5400 111 222"})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("h2",{style:{margin:"0",fontSize:"20px",color:"#1890ff"},children:"H√ìA ƒê∆†N"}),t.jsxs("p",{style:{margin:"5px 0"},children:[t.jsx("strong",{children:"S·ªë:"})," ",n?.id||"POS-00001"]}),t.jsxs("p",{style:{margin:"5px 0"},children:[t.jsx("strong",{children:"Ng√†y:"})," ",M(n?.date||new Date)]})]})]}),t.jsx(S,{style:{margin:"10px 0"}}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{margin:"0 0 10px 0"},children:"Th√¥ng tin kh√°ch h√†ng"}),t.jsxs("div",{style:{display:"flex"},children:[t.jsxs("div",{style:{flex:"1"},children:[t.jsxs("p",{style:{margin:"5px 0"},children:[t.jsx("strong",{children:"Kh√°ch h√†ng:"})," ",n?.customer?.name||"Kh√°ch l·∫ª"]}),t.jsxs("p",{style:{margin:"5px 0"},children:[t.jsx("strong",{children:"SƒêT:"})," ",n?.customer?.phone||"N/A"]})]}),t.jsxs("div",{style:{flex:"1"},children:[t.jsxs("p",{style:{margin:"5px 0"},children:[t.jsx("strong",{children:"ƒê·ªãa ch·ªâ:"})," ",n?.customer?.address||"N/A"]}),t.jsxs("p",{style:{margin:"5px 0"},children:[t.jsx("strong",{children:"Email:"})," ",n?.customer?.email||"N/A"]})]})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{margin:"0 0 10px 0"},children:"Chi ti·∫øt ƒë∆°n h√†ng"}),t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[t.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"STT"}),t.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"M·∫∑t h√†ng"}),t.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:"ƒê∆°n gi√°"}),t.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"center"},children:"SL"}),t.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:"Th√†nh ti·ªÅn"})]})}),t.jsx("tbody",{children:n?.items?.map((e,n)=>t.jsxs("tr",{children:[t.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:n+1}),t.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:e.name}),t.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:O(e.price)}),t.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"center"},children:e.quantity}),t.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:O(e.price*e.quantity)})]},n))})]})]}),t.jsxs("div",{style:{marginBottom:"20px",textAlign:"right"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",margin:"5px 0"},children:[t.jsx("span",{style:{width:"150px",textAlign:"left"},children:"T·ªïng ti·ªÅn h√†ng:"}),t.jsx("span",{style:{width:"150px"},children:O(V())})]}),n?.discount>0&&t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",margin:"5px 0"},children:[t.jsx("span",{style:{width:"150px",textAlign:"left"},children:"Gi·∫£m gi√°:"}),t.jsxs("span",{style:{width:"150px"},children:["-",O(n.discount)]})]}),n?.tax>0&&t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",margin:"5px 0"},children:[t.jsx("span",{style:{width:"150px",textAlign:"left"},children:"Thu·∫ø (VAT 10%):"}),t.jsx("span",{style:{width:"150px"},children:O(n.tax)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",margin:"5px 0",fontWeight:"bold",fontSize:"16px"},children:[t.jsx("span",{style:{width:"150px",textAlign:"left"},children:"Thanh to√°n:"}),t.jsx("span",{style:{width:"150px"},children:O(n?.total||0)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",margin:"5px 0"},children:[t.jsx("span",{style:{width:"150px",textAlign:"left"},children:"Ti·ªÅn kh√°ch ƒë∆∞a:"}),t.jsx("span",{style:{width:"150px"},children:O(n?.amountPaid||0)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",margin:"5px 0"},children:[t.jsx("span",{style:{width:"150px",textAlign:"left"},children:"Ti·ªÅn th·ª´a:"}),t.jsx("span",{style:{width:"150px"},children:O((n?.amountPaid||0)-(n?.total||0))})]})]}),t.jsx(S,{style:{margin:"10px 0"}}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"30px"},children:[t.jsxs("div",{style:{textAlign:"center",flex:"1"},children:[t.jsx("p",{style:{fontWeight:"bold"},children:"Ng∆∞·ªùi mua h√†ng"}),t.jsx("p",{style:{fontStyle:"italic",fontSize:"12px"},children:"(K√Ω, ghi r√µ h·ªç t√™n)"}),t.jsx("div",{style:{height:"70px"}}),t.jsx("p",{children:n?.customer?.name||""})]}),t.jsxs("div",{style:{textAlign:"center",flex:"1"},children:[t.jsx("p",{style:{fontWeight:"bold"},children:"Ng∆∞·ªùi b√°n h√†ng"}),t.jsx("p",{style:{fontStyle:"italic",fontSize:"12px"},children:"(K√Ω, ghi r√µ h·ªç t√™n)"}),t.jsx("div",{style:{height:"70px"}}),t.jsx("p",{children:n?.cashier||"Nguy·ªÖn VƒÉn A"})]})]}),t.jsxs("div",{style:{marginTop:"30px",borderTop:"1px dashed #ddd",paddingTop:"10px",textAlign:"center"},children:[t.jsx("p",{style:{margin:"5px 0"},children:"C·∫£m ∆°n Qu√Ω kh√°ch ƒë√£ mua h√†ng t·∫°i Tr∆∞·ªùng Ph√°t Computer!"}),t.jsx("p",{style:{margin:"5px 0"},children:"M·ªçi th·∫Øc m·∫Øc vui l√≤ng li√™n h·ªá: 0836.768.597 | contact@truongphat.com"}),t.jsx("p",{style:{margin:"5px 0"},children:"Website: truongphat.com"}),t.jsx("div",{style:{margin:"10px auto",display:"flex",justifyContent:"center"},children:n?.id&&t.jsx("div",{style:{margin:"0 auto",width:"100px",height:"100px"},children:t.jsx(Fe,{value:`https://truongphat.com/invoice/${n.id}`,size:100,renderAs:"svg",level:"H"})})})]})]})})})})]})})})}},Symbol.toStringTag,{value:"Module"})),{Title:Bt,Text:Ht,Paragraph:Ft}=p,Lt=Object.freeze(Object.defineProperty({__proto__:null,default:({currentCart:n=[],onAddItem:s,customerData:i=null,visible:l=!0,refreshSuggestions:r=()=>{},loading:a=!1})=>{const[c,p]=e.useState([]),[u,j]=e.useState([]),[g,y]=e.useState(!0),[v,f]=e.useState("cart"),T={cart:[{id:101,name:"Chu·ªôt kh√¥ng d√¢y Logitech M185",image:"https://via.placeholder.com/50",price:25e4,originalPrice:29e4,rating:4.5,reason:"Ng∆∞·ªùi mua laptop th∆∞·ªùng mua th√™m",inStock:15},{id:102,name:"B√†n di chu·ªôt size L",image:"https://via.placeholder.com/50",price:9e4,originalPrice:12e4,rating:4.2,reason:"Ph·ª• ki·ªán ƒëi k√®m ph·ªï bi·∫øn",inStock:22},{id:103,name:'T√∫i ƒë·ª±ng laptop 15.6"',image:"https://via.placeholder.com/50",price:35e4,originalPrice:4e5,rating:4.8,reason:"B·∫£o v·ªá laptop c·ªßa b·∫°n",inStock:8},{id:104,name:"ƒê√®n LED USB",image:"https://via.placeholder.com/50",price:7e4,originalPrice:9e4,rating:4,reason:"Ti·ªán d·ª•ng khi l√†m vi·ªác ƒë√™m",inStock:30}],customer:[{id:201,name:"SSD Samsung 250GB",image:"https://via.placeholder.com/50",price:12e5,originalPrice:15e5,rating:4.9,reason:"D·ª±a tr√™n l·ªãch s·ª≠ mua h√†ng",inStock:12},{id:202,name:"B√†n ph√≠m c∆° E-DRA EK387",image:"https://via.placeholder.com/50",price:85e4,originalPrice:95e4,rating:4.7,reason:"Kh√°ch h√†ng quan t√¢m g·∫ßn ƒë√¢y",inStock:5},{id:203,name:"Webcam Logitech C270",image:"https://via.placeholder.com/50",price:55e4,originalPrice:7e5,rating:4.3,reason:"S·∫£n ph·∫©m t∆∞∆°ng t·ª± ƒë√£ mua",inStock:9}],trending:[{id:301,name:"Tai nghe gaming Logitech G Pro X",image:"https://via.placeholder.com/50",price:28e5,originalPrice:32e5,rating:4.8,reason:"B√°n ch·∫°y tu·∫ßn n√†y",inStock:7},{id:302,name:"USB Kingston 64GB",image:"https://via.placeholder.com/50",price:18e4,originalPrice:22e4,rating:4.5,reason:"S·∫£n ph·∫©m ph·ªï bi·∫øn",inStock:42},{id:303,name:"D√¢y c√°p HDMI 2.0",image:"https://via.placeholder.com/50",price:12e4,originalPrice:15e4,rating:4.6,reason:"ƒêang gi·∫£m gi√°",inStock:20}]},b=[{id:"bundle1",name:"B·ªô ph·ª• ki·ªán laptop c∆° b·∫£n",discount:15,items:[{id:101,name:"Chu·ªôt kh√¥ng d√¢y Logitech M185",image:"https://via.placeholder.com/50",price:25e4},{id:102,name:"B√†n di chu·ªôt size L",image:"https://via.placeholder.com/50",price:9e4},{id:103,name:'T√∫i ƒë·ª±ng laptop 15.6"',image:"https://via.placeholder.com/50",price:35e4}],originalPrice:69e4,bundlePrice:586500},{id:"bundle2",name:"B·ªô n√¢ng c·∫•p hi·ªáu su·∫•t",discount:10,items:[{id:201,name:"SSD Samsung 250GB",image:"https://via.placeholder.com/50",price:12e5},{id:501,name:"RAM Kingston 8GB DDR4",image:"https://via.placeholder.com/50",price:85e4}],originalPrice:205e4,bundlePrice:1845e3}],k=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e);e.useEffect(()=>{y(!0),setTimeout(()=>{let e="cart",t=[...T.cart];i?.id?(e="customer",t=[...T.customer,...T.cart.slice(0,2)]):n.length||(e="trending",t=[...T.trending]),p(t),j(b),f(e),y(!1)},800)},[n,i,a]);return l?t.jsx("div",{className:"smart-suggestions",children:t.jsx(q,{loading:g,active:!0,paragraph:{rows:8},title:!0,children:c.length>0||u.length>0?t.jsxs("div",{children:[t.jsxs(d,{title:t.jsxs(m,{children:[(()=>{switch(v){case"customer":return t.jsx(ye,{style:{color:"#722ed1"}});case"cart":default:return t.jsx(_e,{style:{color:"#faad14"}});case"trending":return t.jsx(ge,{style:{color:"#f5222d"}})}})(),t.jsx("span",{children:(()=>{switch(v){case"customer":return"ƒê·ªÅ xu·∫•t ri√™ng cho kh√°ch h√†ng";case"cart":return"Kh√°ch h√†ng th∆∞·ªùng mua c√πng";case"trending":return"S·∫£n ph·∫©m ph·ªï bi·∫øn hi·ªán nay";default:return"ƒê·ªÅ xu·∫•t cho b·∫°n"}})()})]}),extra:t.jsx(x,{type:"text",icon:t.jsx(Ee,{}),onClick:r,size:"small",children:"L√†m m·ªõi"}),size:"small",className:"suggestion-card",children:[t.jsx(N,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:c,renderItem:e=>t.jsx(N.Item,{children:t.jsxs(d,{size:"small",hoverable:!0,cover:t.jsx("div",{style:{padding:"10px",textAlign:"center",background:"#f5f5f5"},children:t.jsx("img",{alt:e.name,src:e.image,style:{maxHeight:"60px",maxWidth:"100%",objectFit:"contain"}})}),actions:[t.jsx(P,{title:"Th√™m v√†o gi·ªè h√†ng",children:t.jsx(x,{type:"primary",size:"small",icon:t.jsx(ie,{}),onClick:()=>s(e),children:"Th√™m"})})],children:[t.jsx("div",{style:{height:"45px",overflow:"hidden"},children:t.jsx(P,{title:e.name,children:t.jsx(Ht,{strong:!0,style:{fontSize:"13px"},ellipsis:{tooltip:e.name},children:e.name})})}),t.jsxs(m,{direction:"vertical",size:0,style:{width:"100%"},children:[t.jsxs(m,{align:"center",children:[t.jsx(Ht,{style:{fontSize:"14px",color:"#f50",fontWeight:"bold"},children:k(e.price)}),e.originalPrice>e.price&&t.jsx(Ht,{delete:!0,style:{fontSize:"12px",color:"#999"},children:k(e.originalPrice)})]}),e.originalPrice>e.price&&t.jsxs(D,{color:"red",style:{marginTop:"4px"},children:["-",Math.round((e.originalPrice-e.price)/e.originalPrice*100),"%"]}),t.jsxs(Ht,{type:"secondary",style:{fontSize:"12px"},children:[t.jsx(Ae,{})," ",e.reason]})]})]})})}),u.length>0&&t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx(S,{orientation:"left",children:t.jsxs(m,{children:[t.jsx(we,{style:{color:"#1890ff"}}),t.jsx("span",{children:"Combo ti·∫øt ki·ªám"})]})}),t.jsx(N,{dataSource:u,renderItem:e=>t.jsx(N.Item,{children:t.jsx(d,{size:"small",title:t.jsxs(m,{children:[t.jsx(Ht,{strong:!0,children:e.name}),t.jsxs(D,{color:"red",children:["Ti·∫øt ki·ªám ",e.discount,"%"]})]}),style:{width:"100%"},children:t.jsxs(o,{gutter:[16,16],align:"middle",children:[t.jsx(h,{xs:24,sm:16,children:t.jsx(N,{dataSource:e.items,renderItem:e=>t.jsx(N.Item,{style:{padding:"8px 0"},children:t.jsx(N.Item.Meta,{avatar:t.jsx(_,{src:e.image,shape:"square"}),title:e.name,description:k(e.price)})})})}),t.jsx(h,{xs:24,sm:8,style:{textAlign:"center"},children:t.jsxs("div",{children:[t.jsx(G,{title:"Gi√° g·ªëc",value:e.originalPrice,formatter:e=>t.jsx(Ht,{delete:!0,children:k(e)})}),t.jsx(G,{title:"Gi√° combo",value:e.bundlePrice,valueStyle:{color:"#cf1322",fontWeight:"bold"},formatter:e=>k(e),suffix:t.jsx(Se,{style:{fontSize:"0.7em"}})}),t.jsx(x,{type:"primary",icon:t.jsx(de,{}),style:{marginTop:"16px"},onClick:()=>e.items.forEach(e=>s(e)),children:"Th√™m t·∫•t c·∫£"})]})})]})})})})]})]}),t.jsx("div",{style:{textAlign:"center",padding:"10px"},children:t.jsxs(Ht,{type:"secondary",style:{fontSize:"12px"},children:[t.jsx(Ne,{})," ƒê·ªÅ xu·∫•t th√¥ng minh b·∫±ng AI d·ª±a tr√™n d·ªØ li·ªáu b√°n h√†ng v√† h√†nh vi kh√°ch h√†ng"]})})]}):t.jsx(C,{description:"Kh√¥ng c√≥ ƒë·ªÅ xu·∫•t n√†o",image:C.PRESENTED_IMAGE_SIMPLE})})}):null}},Symbol.toStringTag,{value:"Module"})),qt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Gt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ut=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Kt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Yt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),{Title:Wt,Text:Xt}=p,{Option:Qt}=v,{Step:Zt}=B,Jt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n]=g.useForm(),s=i(),{user:l}=a(),[r,c]=e.useState(!1),[p,y]=e.useState(0),[T,b]=e.useState(null),[C,k]=e.useState(0),[I,A]=e.useState({5e5:0,2e5:0,1e5:0,5e4:0,2e4:0,1e4:0,5e3:0,2e3:0,1e3:0,coins:0});e.useEffect(()=>{let e=0;Object.entries(I).forEach(([t,n])=>{e+="coins"===t?n:parseInt(t)*n}),k(e),n.setFieldsValue({drawerAmount:e})},[I,n]);const E=(e,t)=>{A(n=>({...n,[e]:t}))},N=()=>{n.validateFields().then(()=>{y(p+1)}).catch(e=>{})},_=()=>{y(p-1)},P=async e=>{c(!0);try{await new Promise(e=>setTimeout(e,1500));const t={shiftId:`SHIFT-${Date.now().toString().slice(-6)}`,cashier:l?.name||"Nh√¢n vi√™n thu ng√¢n",cashierId:l?.id,startTime:(new Date).toISOString(),startAmount:e.drawerAmount,posTerminal:e.posTerminal,register:e.register,note:e.note,status:"active",denominations:I};b(t),y(p+1),f.success("M·ªü ca l√†m vi·ªác th√†nh c√¥ng!")}catch(t){f.error("C√≥ l·ªói x·∫£y ra khi m·ªü ca l√†m vi·ªác!")}finally{c(!1)}},D=()=>{s("/cashier/pos")};return t.jsx("div",{style:{maxWidth:1e3,margin:"0 auto"},children:t.jsxs(d,{children:[t.jsx(Wt,{level:2,style:{textAlign:"center",margin:"0 0 24px 0"},children:"M·ªü ca l√†m vi·ªác"}),t.jsxs(B,{current:p,style:{marginBottom:24},children:[t.jsx(Zt,{title:"Th√¥ng tin ca",description:"Nh·∫≠p th√¥ng tin ca l√†m vi·ªác"}),t.jsx(Zt,{title:"Khai b√°o ti·ªÅn",description:"Khai b√°o ti·ªÅn ƒë·∫ßu ca"}),t.jsx(Zt,{title:"Ho√†n th√†nh",description:"X√°c nh·∫≠n th√¥ng tin"})]}),t.jsx(g,{form:n,layout:"vertical",initialValues:{shiftType:"morning",drawerAmount:0},children:(()=>{switch(p){case 0:return t.jsxs(d,{title:"Th√¥ng tin ca l√†m vi·ªác",children:[t.jsx(g.Item,{name:"posTerminal",label:"M√°y POS",rules:[{required:!0,message:"Vui l√≤ng ch·ªçn m√°y POS!"}],children:t.jsxs(v,{placeholder:"Ch·ªçn m√°y POS",children:[t.jsx(Qt,{value:"POS-01",children:"POS-01 (Qu·∫ßy ch√≠nh)"}),t.jsx(Qt,{value:"POS-02",children:"POS-02 (Qu·∫ßy ph·ª•)"}),t.jsx(Qt,{value:"POS-03",children:"POS-03 (T·∫ßng 2)"})]})}),t.jsx(g.Item,{name:"register",label:"Qu·∫ßy thu ng√¢n",rules:[{required:!0,message:"Vui l√≤ng ch·ªçn qu·∫ßy thu ng√¢n!"}],children:t.jsxs(v,{placeholder:"Ch·ªçn qu·∫ßy thu ng√¢n",children:[t.jsx(Qt,{value:"REGISTER-01",children:"Qu·∫ßy 1"}),t.jsx(Qt,{value:"REGISTER-02",children:"Qu·∫ßy 2"}),t.jsx(Qt,{value:"REGISTER-03",children:"Qu·∫ßy 3"})]})}),t.jsx(g.Item,{name:"shiftType",label:"Lo·∫°i ca",rules:[{required:!0,message:"Vui l√≤ng ch·ªçn lo·∫°i ca!"}],initialValue:"morning",children:t.jsxs(v,{placeholder:"Ch·ªçn lo·∫°i ca",children:[t.jsx(Qt,{value:"morning",children:"Ca s√°ng (8:00 - 14:00)"}),t.jsx(Qt,{value:"afternoon",children:"Ca chi·ªÅu (14:00 - 20:00)"}),t.jsx(Qt,{value:"evening",children:"Ca t·ªëi (20:00 - 23:00)"}),t.jsx(Qt,{value:"full",children:"Ca ƒë·∫ßy ƒë·ªß (8:00 - 20:00)"})]})}),t.jsx(g.Item,{name:"note",label:"Ghi ch√∫",children:t.jsx(u.TextArea,{rows:2,placeholder:"Ghi ch√∫ (n·∫øu c√≥)"})}),t.jsx(g.Item,{children:t.jsx(x,{type:"primary",onClick:N,children:"Ti·∫øp t·ª•c"})})]});case 1:return t.jsxs(d,{title:"Khai b√°o ti·ªÅn ƒë·∫ßu ca",children:[t.jsx(j,{message:"H∆∞·ªõng d·∫´n khai b√°o ti·ªÅn ƒë·∫ßu ca",description:"Vui l√≤ng nh·∫≠p ch√≠nh x√°c s·ªë l∆∞·ª£ng c·ªßa t·ª´ng m·ªánh gi√° ti·ªÅn trong k√©t. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông t√≠nh t·ªïng s·ªë ti·ªÅn.",type:"info",showIcon:!0,style:{marginBottom:16}}),t.jsxs(o,{gutter:[16,16],children:[t.jsx(h,{span:16,children:t.jsx(d,{title:"Chi ti·∫øt m·ªánh gi√°",size:"small",children:t.jsxs(o,{gutter:[16,16],children:[t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"500,000 VND",children:t.jsx(w,{min:0,value:I[5e5],onChange:e=>E("500000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"200,000 VND",children:t.jsx(w,{min:0,value:I[2e5],onChange:e=>E("200000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"100,000 VND",children:t.jsx(w,{min:0,value:I[1e5],onChange:e=>E("100000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"50,000 VND",children:t.jsx(w,{min:0,value:I[5e4],onChange:e=>E("50000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"20,000 VND",children:t.jsx(w,{min:0,value:I[2e4],onChange:e=>E("20000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"10,000 VND",children:t.jsx(w,{min:0,value:I[1e4],onChange:e=>E("10000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"5,000 VND",children:t.jsx(w,{min:0,value:I[5e3],onChange:e=>E("5000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"2,000 VND",children:t.jsx(w,{min:0,value:I[2e3],onChange:e=>E("2000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"1,000 VND",children:t.jsx(w,{min:0,value:I[1e3],onChange:e=>E("1000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"Ti·ªÅn xu (VND)",children:t.jsx(w,{min:0,value:I.coins,onChange:e=>E("coins",e),style:{width:"100%"}})})})]})})}),t.jsx(h,{span:8,children:t.jsxs(d,{title:"T·ªïng ti·ªÅn",size:"small",children:[t.jsx(g.Item,{name:"drawerAmount",label:"T·ªïng ti·ªÅn trong k√©t",children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),disabled:!0})}),t.jsxs("div",{style:{marginTop:"20px",textAlign:"center"},children:[t.jsx(Wt,{level:3,children:St(C)}),t.jsx(Xt,{type:"secondary",children:"T·ªïng ti·ªÅn ƒë·∫ßu ca"})]})]})})]}),t.jsx(S,{}),t.jsx(g.Item,{children:t.jsxs(m,{children:[t.jsx(x,{onClick:_,children:"Quay l·∫°i"}),t.jsx(x,{type:"primary",onClick:P,loading:r,children:"M·ªü ca l√†m vi·ªác"})]})})]});case 2:return t.jsx(d,{children:t.jsx(H,{status:"success",title:"M·ªü ca l√†m vi·ªác th√†nh c√¥ng!",subTitle:`M√£ ca: ${T?.shiftId||"N/A"} - Th·ªùi gian b·∫Øt ƒë·∫ßu: ${He(T?.startTime).format("DD/MM/YYYY HH:mm:ss")}`,extra:[t.jsx(x,{type:"primary",onClick:D,icon:t.jsx(je,{}),children:"B·∫Øt ƒë·∫ßu b√°n h√†ng"},"console")],children:t.jsxs(F,{title:"Th√¥ng tin ca l√†m vi·ªác",children:[t.jsx(F.Item,{label:"Nh√¢n vi√™n",children:T?.cashier}),t.jsx(F.Item,{label:"M√°y POS",children:T?.posTerminal}),t.jsx(F.Item,{label:"Qu·∫ßy thu ng√¢n",children:T?.register}),t.jsx(F.Item,{label:"Ti·ªÅn ƒë·∫ßu ca",children:St(T?.startAmount)}),t.jsx(F.Item,{label:"Tr·∫°ng th√°i",children:t.jsx("span",{style:{color:"#52c41a"},children:"ƒêang ho·∫°t ƒë·ªông"})})]})})});default:return null}})()})]})})}},Symbol.toStringTag,{value:"Module"})),{Title:en,Text:tn,Paragraph:nn}=p,{Step:sn}=B,{Option:ln}=v,rn=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n]=g.useForm(),s=i(),{user:l}=a(),[r,c]=e.useState(!1),[p,y]=e.useState(0),[v,T]=e.useState(null),[b,C]=e.useState(0),[k,I]=e.useState(0),[A,E]=e.useState(0),[N,_]=e.useState({5e5:0,2e5:0,1e5:0,5e4:0,2e4:0,1e4:0,5e3:0,2e3:0,1e3:0,coins:0}),[P,D]=e.useState("idle");e.useEffect(()=>{(async()=>{c(!0);try{await new Promise(e=>setTimeout(e,800));const e={shiftId:"SHIFT-235689",cashier:l?.name||"Nguy·ªÖn VƒÉn A",cashierId:l?.id||"STAFF-001",posTerminal:"POS-01",register:"REGISTER-01",startTime:new Date(Date.now()-288e5).toISOString(),endTime:null,startAmount:5e6,status:"active",sales:{totalOrders:48,totalSales:2385e4,cashPayments:15e6,cardPayments:45e5,momoPayments:25e5,vnpayPayments:185e4,returns:2,returnAmount:45e4,discounts:75e4},transactions:[{id:"TXN-001",type:"sale",amount:85e4,paymentMethod:"cash",time:"09:15",orderId:"ORD-001"},{id:"TXN-002",type:"sale",amount:125e4,paymentMethod:"card",time:"09:45",orderId:"ORD-002"},{id:"TXN-003",type:"sale",amount:75e4,paymentMethod:"momo",time:"10:20",orderId:"ORD-003"},{id:"TXN-004",type:"return",amount:-25e4,paymentMethod:"cash",time:"11:05",orderId:"ORD-004"},{id:"TXN-005",type:"sale",amount:235e4,paymentMethod:"cash",time:"12:30",orderId:"ORD-005"}]};T(e);const t=e.startAmount+e.sales.cashPayments-e.sales.returnAmount;I(t),n.setFieldsValue({shiftId:e.shiftId,posTerminal:e.posTerminal,register:e.register,startTime:He(e.startTime).format("DD/MM/YYYY HH:mm"),startAmount:e.startAmount,expectedDrawerAmount:t})}catch(e){f.error("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu ca l√†m vi·ªác!")}finally{c(!1)}})()},[n,l]),e.useEffect(()=>{let e=0;Object.entries(N).forEach(([t,n])=>{e+="coins"===t?n:parseInt(t)*n}),C(e),E(e-k),n.setFieldsValue({drawerAmount:e,discrepancy:e-k})},[N,k,n]);const O=(e,t)=>{_(n=>({...n,[e]:t}))},M=()=>{n.validateFields().then(()=>{y(p+1)}).catch(e=>{})},V=()=>{y(p-1)},z=async e=>{c(!0);try{await new Promise(e=>setTimeout(e,1500));const t={...v,endTime:(new Date).toISOString(),drawerAmount:e.drawerAmount,expectedDrawerAmount:e.expectedDrawerAmount,discrepancy:e.discrepancy,note:e.note,status:"closed",denominations:N};T(t),y(p+1),f.success("ƒê√≥ng ca l√†m vi·ªác th√†nh c√¥ng!")}catch(t){f.error("C√≥ l·ªói x·∫£y ra khi ƒë√≥ng ca l√†m vi·ªác!")}finally{c(!1)}},L=async()=>{D("printing");try{await new Promise(e=>setTimeout(e,1500)),f.success("ƒê√£ in b√°o c√°o ca l√†m vi·ªác!"),D("success")}catch(e){f.error("C√≥ l·ªói x·∫£y ra khi in b√°o c√°o!"),D("error")}},q=()=>{s("/cashier")};return t.jsx("div",{style:{maxWidth:1e3,margin:"0 auto"},children:t.jsxs(d,{children:[t.jsx(en,{level:2,style:{textAlign:"center",margin:"0 0 24px 0"},children:"ƒê√≥ng ca l√†m vi·ªác"}),t.jsxs(B,{current:p,style:{marginBottom:24},children:[t.jsx(sn,{title:"Th√¥ng tin doanh thu",description:"Th·ªëng k√™ doanh thu"}),t.jsx(sn,{title:"Ki·ªÉm k√™ ti·ªÅn m·∫∑t",description:"ƒê·∫øm ti·ªÅn trong k√©t"}),t.jsx(sn,{title:"Ho√†n th√†nh",description:"X√°c nh·∫≠n th√¥ng tin"})]}),t.jsx(g,{form:n,layout:"vertical",children:(()=>{switch(p){case 0:return t.jsx(d,{title:"Th√¥ng tin ca l√†m vi·ªác",children:r?t.jsxs("div",{style:{textAlign:"center",padding:"30px"},children:[t.jsx(R,{size:"large"}),t.jsx("div",{style:{marginTop:"16px"},children:"ƒêang t·∫£i th√¥ng tin ca l√†m vi·ªác..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs(o,{gutter:[16,16],children:[t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"shiftId",label:"M√£ ca l√†m vi·ªác",children:t.jsx(u,{disabled:!0})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"startTime",label:"Th·ªùi gian b·∫Øt ƒë·∫ßu",children:t.jsx(u,{disabled:!0})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"posTerminal",label:"M√°y POS",children:t.jsx(u,{disabled:!0})})}),t.jsx(h,{span:12,children:t.jsx(g.Item,{name:"register",label:"Qu·∫ßy thu ng√¢n",children:t.jsx(u,{disabled:!0})})})]}),t.jsx(S,{orientation:"left",children:"Th·ªëng k√™ doanh thu"}),t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:6,children:t.jsx(G,{title:"T·ªïng ƒë∆°n h√†ng",value:v?.sales?.totalOrders,prefix:t.jsx(Pe,{})})}),t.jsx(h,{span:6,children:t.jsx(G,{title:"T·ªïng doanh thu",value:St(v?.sales?.totalSales),prefix:t.jsx(he,{}),valueStyle:{color:"#3f8600"}})}),t.jsx(h,{span:6,children:t.jsx(G,{title:"ƒê∆°n ho√†n tr·∫£",value:v?.sales?.returns,prefix:t.jsx(De,{}),valueStyle:{color:"#cf1322"}})}),t.jsx(h,{span:6,children:t.jsx(G,{title:"Ti·ªÅn ho√†n tr·∫£",value:St(v?.sales?.returnAmount),prefix:t.jsx(he,{}),valueStyle:{color:"#cf1322"}})})]}),t.jsx(S,{orientation:"left",children:"Th·ªëng k√™ theo ph∆∞∆°ng th·ª©c thanh to√°n"}),t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:6,children:t.jsx(G,{title:"Ti·ªÅn m·∫∑t",value:St(v?.sales?.cashPayments)})}),t.jsx(h,{span:6,children:t.jsx(G,{title:"Th·∫ª",value:St(v?.sales?.cardPayments)})}),t.jsx(h,{span:6,children:t.jsx(G,{title:"MoMo",value:St(v?.sales?.momoPayments)})}),t.jsx(h,{span:6,children:t.jsx(G,{title:"VNPay",value:St(v?.sales?.vnpayPayments)})})]}),t.jsx(S,{}),t.jsx(g.Item,{children:t.jsx(x,{type:"primary",onClick:M,children:"Ti·∫øp t·ª•c"})})]})});case 1:return t.jsxs(d,{title:"Ki·ªÉm k√™ ti·ªÅn m·∫∑t",children:[t.jsx(j,{message:"H∆∞·ªõng d·∫´n ki·ªÉm k√™ ti·ªÅn",description:"Vui l√≤ng ƒë·∫øm v√† nh·∫≠p ch√≠nh x√°c s·ªë l∆∞·ª£ng c·ªßa t·ª´ng m·ªánh gi√° ti·ªÅn trong k√©t. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông t√≠nh to√°n s·ªë ti·ªÅn ch√™nh l·ªách.",type:"info",showIcon:!0,style:{marginBottom:16}}),t.jsxs(o,{gutter:[16,16],children:[t.jsx(h,{span:16,children:t.jsx(d,{title:"Chi ti·∫øt m·ªánh gi√°",size:"small",children:t.jsxs(o,{gutter:[16,16],children:[t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"500,000 VND",children:t.jsx(w,{min:0,value:N[5e5],onChange:e=>O("500000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"200,000 VND",children:t.jsx(w,{min:0,value:N[2e5],onChange:e=>O("200000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"100,000 VND",children:t.jsx(w,{min:0,value:N[1e5],onChange:e=>O("100000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"50,000 VND",children:t.jsx(w,{min:0,value:N[5e4],onChange:e=>O("50000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"20,000 VND",children:t.jsx(w,{min:0,value:N[2e4],onChange:e=>O("20000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"10,000 VND",children:t.jsx(w,{min:0,value:N[1e4],onChange:e=>O("10000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"5,000 VND",children:t.jsx(w,{min:0,value:N[5e3],onChange:e=>O("5000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"2,000 VND",children:t.jsx(w,{min:0,value:N[2e3],onChange:e=>O("2000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"1,000 VND",children:t.jsx(w,{min:0,value:N[1e3],onChange:e=>O("1000",e),style:{width:"100%"}})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"Ti·ªÅn xu (VND)",children:t.jsx(w,{min:0,value:N.coins,onChange:e=>O("coins",e),style:{width:"100%"}})})})]})})}),t.jsx(h,{span:8,children:t.jsxs(d,{title:"K·∫øt qu·∫£ ki·ªÉm k√™",size:"small",children:[t.jsx(g.Item,{name:"startAmount",label:"Ti·ªÅn ƒë·∫ßu ca",children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),disabled:!0})}),t.jsx(g.Item,{name:"expectedDrawerAmount",label:"Ti·ªÅn m·∫∑t d·ª± ki·∫øn",children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),disabled:!0})}),t.jsx(g.Item,{name:"drawerAmount",label:"Ti·ªÅn m·∫∑t th·ª±c t·∫ø",children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),disabled:!0})}),t.jsx(g.Item,{name:"discrepancy",label:"Ch√™nh l·ªách",children:t.jsx(w,{style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),disabled:!0})}),t.jsx("div",{style:{textAlign:"center",marginTop:16},children:t.jsx(tn,{type:0===A?"success":A>0?"warning":"danger",strong:!0,style:{fontSize:16},children:0===A?"Kh·ªõp ƒë√∫ng":A>0?`Th·ª´a ${St(A)}`:`Thi·∫øu ${St(Math.abs(A))}`})})]})})]}),t.jsx(S,{}),t.jsx(g.Item,{name:"note",label:"Ghi ch√∫",rules:[{required:0!==A,message:"Vui l√≤ng ghi ch√∫ l√Ω do ch√™nh l·ªách!"}],children:t.jsx(u.TextArea,{rows:3,placeholder:0!==A?"Vui l√≤ng gi·∫£i th√≠ch l√Ω do ch√™nh l·ªách...":"Ghi ch√∫ (n·∫øu c√≥)"})}),t.jsx(g.Item,{children:t.jsxs(m,{children:[t.jsx(x,{onClick:V,children:"Quay l·∫°i"}),t.jsx(x,{type:"primary",onClick:z,loading:r,children:"ƒê√≥ng ca l√†m vi·ªác"})]})})]});case 2:return t.jsx(d,{children:t.jsx(H,{status:"success",title:"ƒê√≥ng ca l√†m vi·ªác th√†nh c√¥ng!",subTitle:`M√£ ca: ${v?.shiftId||"N/A"} - Th·ªùi gian k·∫øt th√∫c: ${He().format("DD/MM/YYYY HH:mm:ss")}`,extra:[t.jsx(x,{type:"primary",onClick:L,loading:"printing"===P,icon:t.jsx(ne,{}),children:"In b√°o c√°o"},"print"),t.jsx(x,{onClick:q,icon:t.jsx(je,{}),children:"Ho√†n th√†nh"},"complete")],children:t.jsxs(F,{title:"Th√¥ng tin ca l√†m vi·ªác",column:2,children:[t.jsx(F.Item,{label:"Nh√¢n vi√™n",children:v?.cashier}),t.jsx(F.Item,{label:"M√°y POS",children:v?.posTerminal}),t.jsx(F.Item,{label:"Th·ªùi gian b·∫Øt ƒë·∫ßu",children:He(v?.startTime).format("DD/MM/YYYY HH:mm")}),t.jsx(F.Item,{label:"Th·ªùi gian k·∫øt th√∫c",children:He(v?.endTime).format("DD/MM/YYYY HH:mm")}),t.jsx(F.Item,{label:"Ti·ªÅn ƒë·∫ßu ca",children:St(v?.startAmount)}),t.jsx(F.Item,{label:"Ti·ªÅn cu·ªëi ca",children:St(v?.drawerAmount)}),t.jsx(F.Item,{label:"T·ªïng doanh thu",children:St(v?.sales?.totalSales)}),t.jsx(F.Item,{label:"T·ªïng ƒë∆°n h√†ng",children:v?.sales?.totalOrders}),0!==v?.discrepancy&&t.jsx(F.Item,{label:"Ch√™nh l·ªách",span:2,children:t.jsx(tn,{type:v?.discrepancy>0?"warning":"danger",children:v?.discrepancy>0?`Th·ª´a ${St(v?.discrepancy)}`:`Thi·∫øu ${St(Math.abs(v?.discrepancy))}`})}),v?.note&&t.jsx(F.Item,{label:"Ghi ch√∫",span:2,children:v?.note})]})})});default:return null}})()})]})})}},Symbol.toStringTag,{value:"Module"})),{Title:an,Text:cn,Paragraph:dn}=p,{Option:on}=v,hn=[{value:5e5,label:"500,000‚Ç´",type:"bill"},{value:2e5,label:"200,000‚Ç´",type:"bill"},{value:1e5,label:"100,000‚Ç´",type:"bill"},{value:5e4,label:"50,000‚Ç´",type:"bill"},{value:2e4,label:"20,000‚Ç´",type:"bill"},{value:1e4,label:"10,000‚Ç´",type:"bill"},{value:5e3,label:"5,000‚Ç´",type:"bill"},{value:2e3,label:"2,000‚Ç´",type:"bill"},{value:1e3,label:"1,000‚Ç´",type:"bill"},{value:5e3,label:"5,000‚Ç´",type:"coin"},{value:2e3,label:"2,000‚Ç´",type:"coin"},{value:1e3,label:"1,000‚Ç´",type:"coin"},{value:500,label:"500‚Ç´",type:"coin"},{value:200,label:"200‚Ç´",type:"coin"},{value:100,label:"100‚Ç´",type:"coin"}],xn=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n]=g.useForm(),[s,i]=e.useState({}),[l,r]=e.useState(0),[a,p]=e.useState(0),[y,f]=e.useState(0),[T,b]=e.useState(!1),[C,k]=e.useState(!1),[A,E]=e.useState("shift_start"),[N,_]=e.useState(!1),[P,D]=e.useState(""),[O,M]=e.useState("Nguy·ªÖn VƒÉn A"),[R,V]=e.useState("Ca s√°ng (8:00 - 14:00)");e.useEffect(()=>{let e=0;Object.entries(s).forEach(([t,n])=>{e+=parseInt(t)*(n||0)}),r(e),f(e-a)},[s,a]);const z=()=>{_(!0),setTimeout(()=>{b(!0),_(!1)},1e3)},B=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e),F=hn.map(e=>({key:e.value.toString(),denomination:e.label,type:"bill"===e.type?"Ti·ªÅn gi·∫•y":"Ti·ªÅn xu",count:s[e.value]||0,value:(s[e.value]||0)*e.value})),L=[{title:"M·ªánh gi√°",dataIndex:"denomination",key:"denomination"},{title:"Lo·∫°i",dataIndex:"type",key:"type"},{title:"S·ªë l∆∞·ª£ng",dataIndex:"count",key:"count",render:(e,n)=>t.jsx(w,{min:0,value:s[n.key],onChange:e=>{return t=n.key,s=e,void i(e=>({...e,[t]:s}));var t,s},disabled:T,style:{width:"100%"}})},{title:"Th√†nh ti·ªÅn",dataIndex:"value",key:"value",render:e=>B(e)}];return t.jsx("div",{className:"cash-count",children:t.jsxs(d,{children:[t.jsx(an,{level:2,children:"Ki·ªÉm ƒë·∫øm ti·ªÅn"}),t.jsx(dn,{type:"secondary",children:"Ki·ªÉm ƒë·∫øm ti·ªÅn m·∫∑t trong qu·∫ßy thu ng√¢n ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh ch√≠nh x√°c"}),!T&&t.jsxs(t.Fragment,{children:[t.jsxs(o,{gutter:16,style:{marginBottom:16},children:[t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"Lo·∫°i ki·ªÉm ƒë·∫øm",children:t.jsxs(v,{value:A,onChange:E,disabled:Object.keys(s).length>0,children:[t.jsx(on,{value:"shift_start",children:"ƒê·∫ßu ca"}),t.jsx(on,{value:"shift_end",children:"Cu·ªëi ca"}),t.jsx(on,{value:"mid_day",children:"Gi·ªØa ng√†y"})]})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"Thu ng√¢n",children:t.jsxs(v,{value:O,onChange:M,children:[t.jsx(on,{value:"Nguy·ªÖn VƒÉn A",children:"Nguy·ªÖn VƒÉn A"}),t.jsx(on,{value:"Tr·∫ßn Th·ªã B",children:"Tr·∫ßn Th·ªã B"}),t.jsx(on,{value:"L√™ VƒÉn C",children:"L√™ VƒÉn C"})]})})}),t.jsx(h,{span:8,children:t.jsx(g.Item,{label:"Ca l√†m vi·ªác",children:t.jsxs(v,{value:R,onChange:V,children:[t.jsx(on,{value:"Ca s√°ng (8:00 - 14:00)",children:"Ca s√°ng (8:00 - 14:00)"}),t.jsx(on,{value:"Ca chi·ªÅu (14:00 - 20:00)",children:"Ca chi·ªÅu (14:00 - 20:00)"}),t.jsx(on,{value:"Ca t·ªëi (20:00 - 22:00)",children:"Ca t·ªëi (20:00 - 22:00)"})]})})})]}),"shift_end"===A&&t.jsx(o,{gutter:16,style:{marginBottom:16},children:t.jsx(h,{span:24,children:t.jsx(j,{message:"S·ªë ti·ªÅn d·ª± ki·∫øn trong qu·∫ßy",description:t.jsxs(m,{direction:"vertical",style:{width:"100%"},children:[t.jsx(cn,{children:"Nh·∫≠p s·ªë ti·ªÅn d·ª± ki·∫øn d·ª±a tr√™n b√°o c√°o h·ªá th·ªëng:"}),t.jsx(w,{style:{width:"100%"},min:0,step:1e4,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),onChange:e=>{p(e||0)},addonAfter:"VND",placeholder:"Nh·∫≠p s·ªë ti·ªÅn d·ª± ki·∫øn"})]}),type:"info",showIcon:!0})})}),t.jsx(S,{orientation:"left",children:"Nh·∫≠p s·ªë l∆∞·ª£ng theo m·ªánh gi√°"}),t.jsx(I,{columns:L,dataSource:F,pagination:!1,summary:()=>t.jsxs(I.Summary.Row,{children:[t.jsx(I.Summary.Cell,{index:0,colSpan:2,children:t.jsx(cn,{strong:!0,children:"T·ªïng c·ªông"})}),t.jsx(I.Summary.Cell,{index:2,children:t.jsxs(cn,{strong:!0,children:[Object.values(s).reduce((e,t)=>e+(t||0),0)," t·ªù/ƒë·ªìng"]})}),t.jsx(I.Summary.Cell,{index:3,children:t.jsx(cn,{strong:!0,children:B(l)})})]})}),t.jsx(S,{}),t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(d,{children:t.jsx(G,{title:"T·ªïng ti·ªÅn ƒë·∫øm ƒë∆∞·ª£c",value:l,precision:0,valueStyle:{color:"#3f8600"},prefix:t.jsx(he,{}),suffix:"VND",formatter:e=>B(e)})})}),"shift_end"===A&&t.jsx(h,{span:12,children:t.jsxs(d,{children:[t.jsx(G,{title:"Ch√™nh l·ªách",value:y,precision:0,valueStyle:{color:0===y?"#3f8600":Math.abs(y)<1e4?"#faad14":"#cf1322"},prefix:0===y?t.jsx(te,{}):y>0?t.jsx(Oe,{}):t.jsx(Me,{}),suffix:"VND",formatter:e=>`${e>=0?"+":"-"} ${B(Math.abs(e))}`}),0!==y&&t.jsx("div",{style:{marginTop:8},children:t.jsx(cn,{type:y>0?"success":"danger",children:y>0?"Th·ª´a ti·ªÅn":"Thi·∫øu ti·ªÅn"})})]})})]}),t.jsx("div",{style:{marginTop:16},children:t.jsx(g.Item,{label:"Ghi ch√∫",children:t.jsx(u.TextArea,{rows:4,placeholder:"Nh·∫≠p ghi ch√∫ v·ªÅ vi·ªác ƒë·∫øm ti·ªÅn (n·∫øu c√≥)",value:P,onChange:e=>D(e.target.value)})})}),t.jsx("div",{style:{marginTop:16,textAlign:"right"},children:t.jsxs(m,{children:[t.jsx(x,{icon:t.jsx(Ee,{}),onClick:()=>i({}),children:"ƒê·∫∑t l·∫°i"}),t.jsx(x,{type:"primary",icon:t.jsx(Re,{}),onClick:"shift_end"===A&&0!==y?()=>{k(!0)}:z,loading:N,disabled:0===Object.keys(s).length,children:"Ho√†n t·∫•t ƒë·∫øm ti·ªÅn"})]})})]}),(()=>{if(!T)return null;const e=Math.abs(y)>1e4;return t.jsx(d,{style:{marginTop:16},children:t.jsx(H,{status:e?"warning":"success",title:e?"C√≥ s·ª± ch√™nh l·ªách ƒë√°ng k·ªÉ trong k·∫øt qu·∫£ ƒë·∫øm ti·ªÅn":"ƒê·∫øm ti·ªÅn ho√†n t·∫•t",subTitle:t.jsxs("div",{children:[t.jsx("p",{children:e?`Ch√™nh l·ªách: ${B(y)} (${y>0?"th·ª´a":"thi·∫øu"})`:"K·∫øt qu·∫£ ƒë·∫øm ti·ªÅn ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng"}),t.jsxs("p",{children:["Th·ªùi gian: ",(new Date).toLocaleString()]}),t.jsxs("p",{children:["Thu ng√¢n: ",O]}),t.jsxs("p",{children:["Ca l√†m vi·ªác: ",R]}),P&&t.jsxs("p",{children:["Ghi ch√∫: ",P]})]}),extra:[t.jsx(x,{icon:t.jsx(ne,{}),type:"primary",children:"In b√°o c√°o"},"print"),t.jsx(x,{onClick:()=>window.location.reload(),children:"ƒê·∫øm ti·ªÅn m·ªõi"},"new")]})})})(),t.jsxs(c,{title:"X√°c nh·∫≠n ch√™nh l·ªách",open:C,onOk:()=>{k(!1),z()},onCancel:()=>{k(!1)},okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",children:[t.jsx(j,{message:`Ch√™nh l·ªách: ${B(y)} (${y>0?"th·ª´a":"thi·∫øu"})`,description:"C√≥ s·ª± ch√™nh l·ªách gi·ªØa s·ªë ti·ªÅn ƒë·∫øm ƒë∆∞·ª£c v√† s·ªë ti·ªÅn d·ª± ki·∫øn. Vui l√≤ng ki·ªÉm tra l·∫°i ho·∫∑c ghi ch√∫ l√Ω do ch√™nh l·ªách.",type:Math.abs(y)<1e4?"warning":"error",showIcon:!0,style:{marginBottom:16}}),t.jsx(g,{layout:"vertical",children:t.jsx(g.Item,{label:"L√Ω do ch√™nh l·ªách",children:t.jsx(u.TextArea,{rows:4,placeholder:"Nh·∫≠p l√Ω do ch√™nh l·ªách",value:P,onChange:e=>D(e.target.value)})})})]})]})})}},Symbol.toStringTag,{value:"Module"})),{Title:mn,Text:pn,Paragraph:un}=p,{Option:jn}=v,{RangePicker:gn}=y,{TabPane:yn}=O,{Search:vn}=u,fn={currentSession:{id:"S2023072001",cashier:"Nguy·ªÖn VƒÉn A",startTime:"2023-07-20 08:00:00",endTime:null,startAmount:2e6,currentAmount:585e4,expectedAmount:585e4,difference:0,status:"active",orderCount:18,totalSales:385e4,cashSales:285e4,cardSales:1e6,otherSales:0,refunds:0,discounts:15e4},recentSessions:[{id:"S2023071902",cashier:"Nguy·ªÖn VƒÉn A",startTime:"2023-07-19 14:00:00",endTime:"2023-07-19 20:00:00",startAmount:2e6,endAmount:675e4,expectedAmount:68e5,difference:-5e4,status:"closed",orderCount:25,totalSales:475e4,cashSales:325e4,cardSales:15e5,otherSales:0,refunds:0,discounts:2e5},{id:"S2023071901",cashier:"Tr·∫ßn Th·ªã B",startTime:"2023-07-19 08:00:00",endTime:"2023-07-19 14:00:00",startAmount:2e6,endAmount:52e5,expectedAmount:52e5,difference:0,status:"closed",orderCount:16,totalSales:32e5,cashSales:22e5,cardSales:1e6,otherSales:0,refunds:0,discounts:12e4},{id:"S2023071802",cashier:"Nguy·ªÖn VƒÉn A",startTime:"2023-07-18 14:00:00",endTime:"2023-07-18 20:00:00",startAmount:2e6,endAmount:72e5,expectedAmount:715e4,difference:5e4,status:"closed",orderCount:28,totalSales:52e5,cashSales:37e5,cardSales:15e5,otherSales:0,refunds:0,discounts:25e4}],orders:[{id:"ORD2023072001",time:"2023-07-20 08:45:12",customer:"Kh√°ch l·∫ª",items:3,total:85e4,payment:"cash",status:"completed"},{id:"ORD2023072002",time:"2023-07-20 09:20:35",customer:"L√™ VƒÉn C",items:2,total:12e5,payment:"card",status:"completed"},{id:"ORD2023072003",time:"2023-07-20 10:05:48",customer:"Kh√°ch l·∫ª",items:1,total:35e4,payment:"cash",status:"completed"},{id:"ORD2023072004",time:"2023-07-20 10:30:22",customer:"Ph·∫°m Th·ªã D",items:4,total:145e4,payment:"cash",status:"completed"}],cashMovements:[{id:"CM2023072001",time:"2023-07-20 08:00:00",type:"cash_in",amount:2e6,reason:"Ti·ªÅn ƒë·∫ßu ca",approvedBy:"Ho√†ng VƒÉn E"},{id:"CM2023072002",time:"2023-07-20 08:45:12",type:"cash_in",amount:85e4,reason:"Thanh to√°n ƒë∆°n h√†ng ORD2023072001",approvedBy:null},{id:"CM2023072003",time:"2023-07-20 10:05:48",type:"cash_in",amount:35e4,reason:"Thanh to√°n ƒë∆°n h√†ng ORD2023072003",approvedBy:null},{id:"CM2023072004",time:"2023-07-20 10:30:22",type:"cash_in",amount:145e4,reason:"Thanh to√°n ƒë∆°n h√†ng ORD2023072004",approvedBy:null},{id:"CM2023072005",time:"2023-07-20 11:15:00",type:"cash_out",amount:5e5,reason:"R√∫t ti·ªÅn m·∫∑t",approvedBy:"Ho√†ng VƒÉn E"}]},Sn=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n,s]=e.useState(!0),[i,l]=e.useState(null),[r,a]=e.useState([He().startOf("week"),He()]),[c,p]=e.useState("all"),[u,j]=e.useState("all"),g=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e),y=e=>He(e).format("DD/MM/YYYY HH:mm");e.useEffect(()=>{setTimeout(()=>{l(fn),s(!1)},1e3)},[]);const f=[{title:"M√£ ca",dataIndex:"id",key:"id"},{title:"Thu ng√¢n",dataIndex:"cashier",key:"cashier"},{title:"Th·ªùi gian b·∫Øt ƒë·∫ßu",dataIndex:"startTime",key:"startTime",render:e=>y(e)},{title:"Th·ªùi gian k·∫øt th√∫c",dataIndex:"endTime",key:"endTime",render:e=>e?y(e):"Ch∆∞a k·∫øt th√∫c"},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",render:e=>"active"===e?t.jsx(E,{status:"processing",text:"ƒêang ho·∫°t ƒë·ªông"}):"closed"===e?t.jsx(E,{status:"success",text:"ƒê√£ ƒë√≥ng"}):t.jsx(E,{status:"default",text:e})},{title:"ƒê∆°n h√†ng",dataIndex:"orderCount",key:"orderCount"},{title:"Doanh thu",dataIndex:"totalSales",key:"totalSales",render:e=>g(e)},{title:"Ch√™nh l·ªách",dataIndex:"difference",key:"difference",render:e=>{const n=0===e?"":e>0?"#52c41a":"#f5222d";return t.jsx("span",{style:{color:n},children:0===e?"0":`${e>0?"+":""}${g(e)}`})}},{title:"Thao t√°c",key:"action",render:(e,n)=>t.jsxs(m,{size:"small",children:[t.jsx(x,{size:"small",icon:t.jsx(le,{}),children:"Chi ti·∫øt"}),t.jsx(x,{size:"small",icon:t.jsx(ne,{}),children:"In"})]})}],T=[{title:"M√£ ƒë∆°n",dataIndex:"id",key:"id"},{title:"Th·ªùi gian",dataIndex:"time",key:"time",render:e=>y(e)},{title:"Kh√°ch h√†ng",dataIndex:"customer",key:"customer"},{title:"S·ªë m·∫∑t h√†ng",dataIndex:"items",key:"items"},{title:"T·ªïng ti·ªÅn",dataIndex:"total",key:"total",render:e=>g(e)},{title:"Thanh to√°n",dataIndex:"payment",key:"payment",render:e=>{switch(e){case"cash":return t.jsx(D,{color:"green",children:"Ti·ªÅn m·∫∑t"});case"card":return t.jsx(D,{color:"blue",children:"Th·∫ª"});default:return t.jsx(D,{children:e})}}},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",render:e=>{switch(e){case"completed":return t.jsx(E,{status:"success",text:"Ho√†n th√†nh"});case"refunded":return t.jsx(E,{status:"warning",text:"Ho√†n ti·ªÅn"});case"cancelled":return t.jsx(E,{status:"error",text:"ƒê√£ h·ªßy"});default:return t.jsx(E,{status:"default",text:e})}}}],b=[{title:"M√£ giao d·ªãch",dataIndex:"id",key:"id"},{title:"Th·ªùi gian",dataIndex:"time",key:"time",render:e=>y(e)},{title:"Lo·∫°i",dataIndex:"type",key:"type",render:e=>{switch(e){case"cash_in":return t.jsx(D,{color:"green",children:"Ti·ªÅn v√†o"});case"cash_out":return t.jsx(D,{color:"red",children:"Ti·ªÅn ra"});default:return t.jsx(D,{children:e})}}},{title:"S·ªë ti·ªÅn",dataIndex:"amount",key:"amount",render:(e,n)=>{const s="cash_in"===n.type?"#52c41a":"#f5222d",i="cash_in"===n.type?"+":"-";return t.jsxs("span",{style:{color:s},children:[i," ",g(e)]})}},{title:"L√Ω do",dataIndex:"reason",key:"reason"},{title:"Ng∆∞·ªùi duy·ªát",dataIndex:"approvedBy",key:"approvedBy",render:e=>e||"N/A"}];return t.jsx("div",{className:"session-reports",children:t.jsxs(d,{loading:n,children:[t.jsx(mn,{level:2,children:"B√°o c√°o ca l√†m vi·ªác"}),t.jsx(un,{type:"secondary",children:"Xem th√¥ng tin chi ti·∫øt v·ªÅ ca l√†m vi·ªác, ƒë∆°n h√†ng v√† giao d·ªãch ti·ªÅn m·∫∑t"}),i?.currentSession&&t.jsxs(d,{title:t.jsxs(m,{children:[t.jsx(Ve,{}),t.jsx("span",{children:"Ca l√†m vi·ªác hi·ªán t·∫°i"}),t.jsx(E,{status:"processing",text:i.currentSession.id})]}),style:{marginBottom:16},children:[t.jsxs(o,{gutter:16,children:[t.jsx(h,{xs:24,sm:12,md:6,children:t.jsx(G,{title:"Thu ng√¢n",value:i.currentSession.cashier,prefix:t.jsx(J,{})})}),t.jsx(h,{xs:24,sm:12,md:6,children:t.jsx(G,{title:"Th·ªùi gian b·∫Øt ƒë·∫ßu",value:y(i.currentSession.startTime),prefix:t.jsx(Ve,{})})}),t.jsx(h,{xs:24,sm:12,md:6,children:t.jsx(G,{title:"S·ªë ƒë∆°n h√†ng",value:i.currentSession.orderCount,prefix:t.jsx(de,{})})}),t.jsx(h,{xs:24,sm:12,md:6,children:t.jsx(G,{title:"Doanh thu",value:i.currentSession.totalSales,prefix:t.jsx(he,{}),formatter:e=>g(e)})})]}),t.jsx(S,{}),t.jsxs(o,{gutter:16,children:[t.jsx(h,{xs:24,sm:12,md:8,children:t.jsx(d,{size:"small",title:"Ti·ªÅn m·∫∑t",children:t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(G,{title:"Ti·ªÅn ƒë·∫ßu ca",value:i.currentSession.startAmount,formatter:e=>g(e),valueStyle:{fontSize:"14px"}})}),t.jsx(h,{span:12,children:t.jsx(G,{title:"Ti·ªÅn hi·ªán t·∫°i",value:i.currentSession.currentAmount,formatter:e=>g(e),valueStyle:{fontSize:"14px"}})})]})})}),t.jsx(h,{xs:24,sm:12,md:8,children:t.jsx(d,{size:"small",title:"Doanh thu theo ph∆∞∆°ng th·ª©c",children:t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(G,{title:"Ti·ªÅn m·∫∑t",value:i.currentSession.cashSales,formatter:e=>g(e),valueStyle:{fontSize:"14px"}})}),t.jsx(h,{span:12,children:t.jsx(G,{title:"Th·∫ª",value:i.currentSession.cardSales,formatter:e=>g(e),valueStyle:{fontSize:"14px"}})})]})})}),t.jsx(h,{xs:24,sm:12,md:8,children:t.jsx(d,{size:"small",title:"Kh√°c",children:t.jsxs(o,{gutter:16,children:[t.jsx(h,{span:12,children:t.jsx(G,{title:"Gi·∫£m gi√°",value:i.currentSession.discounts,formatter:e=>g(e),valueStyle:{fontSize:"14px"}})}),t.jsx(h,{span:12,children:t.jsx(G,{title:"Ho√†n ti·ªÅn",value:i.currentSession.refunds,formatter:e=>g(e),valueStyle:{fontSize:"14px"}})})]})})})]})]}),t.jsx(d,{style:{marginBottom:16},children:t.jsxs(o,{gutter:16,align:"middle",children:[t.jsx(h,{xs:24,sm:24,md:8,children:t.jsxs("div",{style:{marginBottom:16},children:[t.jsx(pn,{strong:!0,children:"Th·ªùi gian:"}),t.jsx("div",{children:t.jsx(gn,{style:{width:"100%"},value:r,onChange:e=>{a(e)},format:"DD/MM/YYYY"})})]})}),t.jsx(h,{xs:12,sm:12,md:4,children:t.jsxs("div",{style:{marginBottom:16},children:[t.jsx(pn,{strong:!0,children:"Thu ng√¢n:"}),t.jsx("div",{children:t.jsxs(v,{style:{width:"100%"},value:c,onChange:e=>{p(e)},children:[t.jsx(jn,{value:"all",children:"T·∫•t c·∫£"}),t.jsx(jn,{value:"Nguy·ªÖn VƒÉn A",children:"Nguy·ªÖn VƒÉn A"}),t.jsx(jn,{value:"Tr·∫ßn Th·ªã B",children:"Tr·∫ßn Th·ªã B"}),t.jsx(jn,{value:"L√™ VƒÉn C",children:"L√™ VƒÉn C"})]})})]})}),t.jsx(h,{xs:12,sm:12,md:4,children:t.jsxs("div",{style:{marginBottom:16},children:[t.jsx(pn,{strong:!0,children:"Tr·∫°ng th√°i:"}),t.jsx("div",{children:t.jsxs(v,{style:{width:"100%"},value:u,onChange:e=>{j(e)},children:[t.jsx(jn,{value:"all",children:"T·∫•t c·∫£"}),t.jsx(jn,{value:"active",children:"ƒêang ho·∫°t ƒë·ªông"}),t.jsx(jn,{value:"closed",children:"ƒê√£ ƒë√≥ng"})]})})]})}),t.jsx(h,{xs:24,sm:24,md:8,style:{textAlign:"right"},children:t.jsxs(m,{children:[t.jsx(x,{icon:t.jsx(le,{}),onClick:()=>{s(!0),setTimeout(()=>{l(fn),s(!1)},1e3)},children:"T√¨m ki·∫øm"}),t.jsx(x,{icon:t.jsx(ze,{}),children:"Xu·∫•t Excel"}),t.jsx(x,{icon:t.jsx(ke,{}),children:"Xu·∫•t PDF"}),t.jsx(x,{type:"primary",icon:t.jsx(ne,{}),children:"In b√°o c√°o"})]})})]})}),t.jsxs(O,{defaultActiveKey:"sessions",children:[t.jsx(yn,{tab:t.jsxs("span",{children:[t.jsx(Ve,{})," Ca l√†m vi·ªác"]}),children:t.jsx(I,{columns:f,dataSource:i?.recentSessions||[],rowKey:"id",loading:n,pagination:{pageSize:5}})},"sessions"),t.jsx(yn,{tab:t.jsxs("span",{children:[t.jsx(de,{})," ƒê∆°n h√†ng"]}),children:t.jsx(I,{columns:T,dataSource:i?.orders||[],rowKey:"id",loading:n,pagination:{pageSize:5}})},"orders"),t.jsx(yn,{tab:t.jsxs("span",{children:[t.jsx(he,{})," Giao d·ªãch ti·ªÅn m·∫∑t"]}),children:t.jsx(I,{columns:b,dataSource:i?.cashMovements||[],rowKey:"id",loading:n,pagination:{pageSize:5},summary:e=>{let n=0,s=0;return e.forEach(({type:e,amount:t})=>{"cash_in"===e?n+=t:"cash_out"===e&&(s+=t)}),t.jsxs(I.Summary.Row,{children:[t.jsx(I.Summary.Cell,{index:0,colSpan:3,children:t.jsx(pn,{strong:!0,children:"T·ªïng c·ªông"})}),t.jsx(I.Summary.Cell,{index:3,children:t.jsxs(m,{direction:"vertical",children:[t.jsxs(pn,{type:"success",children:["Ti·ªÅn v√†o: ",g(n)]}),t.jsxs(pn,{type:"danger",children:["Ti·ªÅn ra: ",g(s)]}),t.jsx(S,{style:{margin:"4px 0"}}),t.jsxs(pn,{strong:!0,children:["Ch√™nh l·ªách: ",g(n-s)]})]})}),t.jsx(I.Summary.Cell,{index:4,colSpan:2})]})}})},"cash_movements")]})]})})}},Symbol.toStringTag,{value:"Module"}));export{At as C,Kt as L,Yt as M,qt as O,qe as P,Le as R,Lt as S,Ye as a,dt as b,pt as c,vt as d,Dt as e,zt as f,Gt as g,Ke as h,$t as i,Ut as j,Jt as k,rn as l,xn as m,Sn as n,We as u};
