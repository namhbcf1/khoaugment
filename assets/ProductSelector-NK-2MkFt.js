import{j as e}from"./index-CI5lv9mG.js";import{r as a}from"./vendor-DD54NZMZ.js";import{G as Z,s as m,f as o,e as v,C as c,I as J,x as U,$ as d,B as x,aN as T,b1 as W,T as X,u as b,l as p,S as Y,E as N,b0 as z,H as w,aG as ee,as as se,n as ie,bC as te,am as ne,an as ae,bv as ce}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Text:n,Title:pe}=X,{TabPane:re}=b,{useBreakpoint:oe}=Z,je=({onAddToCart:P,suggestions:le=[]})=>{const[l,L]=a.useState([]),[R,B]=a.useState([]),[I,j]=a.useState(!1),[h,A]=a.useState(""),[g,E]=a.useState("all"),[u,G]=a.useState("name"),[k,S]=a.useState("grid"),[y,de]=a.useState([0,1e6]),[H,C]=a.useState({}),[M,$]=a.useState(new Set);oe();const O=[{id:"all",name:"Tất cả",icon:e.jsx(T,{}),color:"#1890ff"},{id:"food",name:"Thực phẩm",icon:"🍎",color:"#52c41a"},{id:"drinks",name:"Đồ uống",icon:"🥤",color:"#13c2c2"},{id:"snacks",name:"Snacks",icon:"🍿",color:"#faad14"},{id:"personal",name:"Cá nhân",icon:"🧴",color:"#722ed1"},{id:"household",name:"Gia dụng",icon:"🏠",color:"#fa541c"},{id:"electronics",name:"Điện tử",icon:"📱",color:"#2f54eb"},{id:"hot",name:"Bán chạy",icon:e.jsx(z,{}),color:"#f5222d"}],q=[{id:1,name:"Coca Cola 330ml",price:15e3,category:"drinks",image:"/api/placeholder/200/200",barcode:"8934567890123",stock:150,description:"Nước ngọt có ga Coca Cola",tags:["Bán chạy","Mới"],discount:0,rating:4.5,isHot:!0},{id:2,name:"Bánh mì sandwich",price:25e3,category:"food",image:"/api/placeholder/200/200",barcode:"8934567890124",stock:50,description:"Bánh mì sandwich thịt nguội",tags:["Tươi sống"],discount:10,rating:4.2},{id:3,name:"Nước suối Lavie 500ml",price:8e3,category:"drinks",image:"/api/placeholder/200/200",barcode:"8934567890125",stock:200,description:"Nước suối tinh khiết Lavie",tags:[],discount:0,rating:4},{id:4,name:"Snack khoai tây Lays",price:12e3,category:"snacks",image:"/api/placeholder/200/200",barcode:"8934567890126",stock:80,description:"Snack khoai tây chiên vị tự nhiên",tags:["Giòn tan"],discount:5,rating:4.3,isHot:!0},{id:5,name:"Dầu gội Head & Shoulders",price:85e3,category:"personal",image:"/api/placeholder/200/200",barcode:"8934567890127",stock:25,description:"Dầu gội chống gàu 400ml",tags:["Chăm sóc"],discount:15,rating:4.4},{id:6,name:"iPhone Lightning Cable",price:45e4,category:"electronics",image:"/api/placeholder/200/200",barcode:"8934567890128",stock:15,description:"Cáp sạc iPhone Lightning chính hãng",tags:["Chính hãng"],discount:0,rating:4.8}];a.useEffect(()=>{Q(),V()},[]);const Q=async()=>{j(!0);try{setTimeout(()=>{L(q),j(!1)},500)}catch{m.error("Lỗi khi tải sản phẩm"),j(!1)}},V=()=>{B(O)},f=a.useMemo(()=>{let s=l;return g!=="all"&&(g==="hot"?s=s.filter(i=>i.isHot):s=s.filter(i=>i.category===g)),h&&(s=s.filter(i=>i.name.toLowerCase().includes(h.toLowerCase())||i.barcode.includes(h)||i.description.toLowerCase().includes(h.toLowerCase()))),s=s.filter(i=>i.price>=y[0]&&i.price<=y[1]),s.sort((i,t)=>{switch(u){case"name":return i.name.localeCompare(t.name);case"price-low":return i.price-t.price;case"price-high":return t.price-i.price;case"stock":return t.stock-i.stock;case"rating":return(t.rating||0)-(i.rating||0);case"hot":return(t.isHot?1:0)-(i.isHot?1:0);default:return 0}}),s},[l,g,h,y,u]),D=(s,i=1)=>{if(s.stock<i){m.warning("Không đủ tồn kho!");return}P(s,i),C(t=>({...t,[s.id]:1}))},F=(s,i)=>{C(t=>({...t,[s]:i||1}))},K=s=>{$(i=>{const t=new Set(i);return t.has(s)?(t.delete(s),m.info("Đã xóa khỏi yêu thích")):(t.add(s),m.success("Đã thêm vào yêu thích")),t})},_=({product:s})=>{const i=H[s.id]||1,t=s.discount>0?s.price*(1-s.discount/100):s.price;return e.jsx(o,{className:"product-card",hoverable:!0,cover:e.jsxs("div",{className:"product-image-container",children:[e.jsx(te,{src:s.image,alt:s.name,preview:!1,fallback:"/api/placeholder/200/200"}),e.jsxs("div",{className:"product-badges",children:[s.isHot&&e.jsx(ne,{count:e.jsx(z,{style:{color:"#f5222d"}})}),s.discount>0&&e.jsxs(w,{color:"red",className:"discount-tag",children:["-",s.discount,"%"]})]}),e.jsx("div",{className:"product-overlay",children:e.jsxs(p,{children:[e.jsx(x,{type:"primary",ghost:!0,icon:e.jsx(ae,{}),size:"small",onClick:r=>{r.stopPropagation(),m.info("Chi tiết sản phẩm")}}),e.jsx(x,{type:M.has(s.id)?"primary":"default",ghost:!0,icon:e.jsx(ce,{}),size:"small",onClick:r=>{r.stopPropagation(),K(s.id)}})]})})]}),actions:[e.jsx("div",{className:"quantity-selector",children:e.jsx(se,{min:1,max:s.stock,value:i,onChange:r=>F(s.id,r),size:"small",style:{width:60}})},"quantity"),e.jsx(x,{type:"primary",icon:e.jsx(ie,{}),onClick:()=>D(s,i),disabled:s.stock===0,block:!0,children:"Thêm"},"add")],children:e.jsx(o.Meta,{title:e.jsxs("div",{children:[e.jsx(n,{strong:!0,ellipsis:{tooltip:s.name},children:s.name}),s.rating&&e.jsx("div",{style:{marginTop:4},children:e.jsxs(p,{size:"small",children:[e.jsx(ee,{style:{color:"#faad14"}}),e.jsx(n,{type:"secondary",style:{fontSize:"12px"},children:s.rating})]})})]}),description:e.jsxs("div",{children:[e.jsx("div",{className:"product-price",children:s.discount>0?e.jsxs(p,{children:[e.jsxs(n,{strong:!0,style:{color:"#f5222d"},children:[t.toLocaleString("vi-VN")," ₫"]}),e.jsxs(n,{delete:!0,type:"secondary",style:{fontSize:"12px"},children:[s.price.toLocaleString("vi-VN")," ₫"]})]}):e.jsxs(n,{strong:!0,style:{color:"#52c41a"},children:[s.price.toLocaleString("vi-VN")," ₫"]})}),e.jsx("div",{className:"product-stock",children:e.jsxs(n,{type:"secondary",style:{fontSize:"12px"},children:["Tồn: ",s.stock]})}),s.tags.length>0&&e.jsx("div",{className:"product-tags",style:{marginTop:4},children:s.tags.slice(0,2).map(r=>e.jsx(w,{size:"small",color:"blue",children:r},r))})]})})})};return e.jsxs("div",{className:"product-selector",children:[e.jsx(o,{size:"small",className:"product-filters",children:e.jsxs(v,{gutter:[16,16],align:"middle",children:[e.jsx(c,{xs:24,sm:12,md:8,children:e.jsx(J,{placeholder:"Tìm sản phẩm...",prefix:e.jsx(U,{}),value:h,onChange:s=>A(s.target.value),allowClear:!0})}),e.jsx(c,{xs:12,sm:6,md:4,children:e.jsxs(d,{placeholder:"Sắp xếp",value:u,onChange:G,style:{width:"100%"},children:[e.jsx(d.Option,{value:"name",children:"Tên A-Z"}),e.jsx(d.Option,{value:"price-low",children:"Giá thấp"}),e.jsx(d.Option,{value:"price-high",children:"Giá cao"}),e.jsx(d.Option,{value:"stock",children:"Tồn kho"}),e.jsx(d.Option,{value:"rating",children:"Đánh giá"}),e.jsx(d.Option,{value:"hot",children:"Bán chạy"})]})}),e.jsx(c,{xs:12,sm:6,md:4,children:e.jsxs(x.Group,{children:[e.jsx(x,{type:k==="grid"?"primary":"default",icon:e.jsx(T,{}),onClick:()=>S("grid")}),e.jsx(x,{type:k==="list"?"primary":"default",icon:e.jsx(W,{}),onClick:()=>S("list")})]})}),e.jsx(c,{xs:24,md:8,children:e.jsxs(n,{type:"secondary",children:["Hiển thị ",f.length," / ",l.length," sản phẩm"]})})]})}),e.jsx(o,{size:"small",style:{marginTop:16},children:e.jsx("div",{className:"category-tabs",children:e.jsx(b,{activeKey:g,onChange:E,type:"card",size:"small",children:R.map(s=>e.jsx(re,{tab:e.jsxs(p,{children:[typeof s.icon=="string"?e.jsx("span",{style:{fontSize:"16px"},children:s.icon}):s.icon,s.name]})},s.id))})})}),e.jsx("div",{style:{marginTop:16},children:I?e.jsxs("div",{style:{textAlign:"center",padding:"50px 0"},children:[e.jsx(Y,{size:"large"}),e.jsx("div",{style:{marginTop:16},children:e.jsx(n,{children:"Đang tải sản phẩm..."})})]}):f.length===0?e.jsx(N,{description:"Không tìm thấy sản phẩm",image:N.PRESENTED_IMAGE_SIMPLE}):e.jsx(v,{gutter:[16,16],children:f.map(s=>e.jsx(c,{xs:12,sm:8,md:6,lg:6,xl:4,children:e.jsx(_,{product:s})},s.id))})}),e.jsx("div",{className:"product-quick-stats",style:{marginTop:16},children:e.jsxs(v,{gutter:16,children:[e.jsx(c,{span:6,children:e.jsx(o,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(n,{type:"secondary",children:"Tổng sản phẩm"}),e.jsx("div",{children:e.jsx(n,{strong:!0,style:{fontSize:"18px"},children:l.length})})]})})}),e.jsx(c,{span:6,children:e.jsx(o,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(n,{type:"secondary",children:"Bán chạy"}),e.jsx("div",{children:e.jsx(n,{strong:!0,style:{fontSize:"18px",color:"#f5222d"},children:l.filter(s=>s.isHot).length})})]})})}),e.jsx(c,{span:6,children:e.jsx(o,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(n,{type:"secondary",children:"Giảm giá"}),e.jsx("div",{children:e.jsx(n,{strong:!0,style:{fontSize:"18px",color:"#faad14"},children:l.filter(s=>s.discount>0).length})})]})})}),e.jsx(c,{span:6,children:e.jsx(o,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(n,{type:"secondary",children:"Sắp hết"}),e.jsx("div",{children:e.jsx(n,{strong:!0,style:{fontSize:"18px",color:"#ff7875"},children:l.filter(s=>s.stock<10).length})})]})})})]})})]})};export{je as default};
