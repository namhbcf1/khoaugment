import{u as w,j as e}from"./index-DPVYnWcF.js";import{u as I,f as C,r as m,R as T,L}from"./vendor-DD54NZMZ.js";import{F as r,S as F,L as p,e as R,C as S,f as P,T as V,A,I as u,g as B,h as D,i as E,B as i,j as z,k as H,l as N}from"./antd-pmzi8FkM.js";const{Title:q,Text:g,Paragraph:Q}=V,{Content:$}=p,Y=()=>{const[s]=r.useForm(),a=I(),x=C(),{login:j,isAuthenticated:l,loading:f}=w(),[o,c]=m.useState(""),[n,d]=m.useState(!1),h=x.state?.from||"/";T.useEffect(()=>{l&&a(h,{replace:!0})},[l,a,h]);const y=async b=>{d(!0),c("");try{const{username:t,password:k,remember:v}=b;await j(t,k,v)}catch(t){console.error("Login error:",t),c(t.message||"Đăng nhập không thành công. Vui lòng kiểm tra thông tin đăng nhập.")}finally{d(!1)}};return f?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(F,{size:"large",tip:"Đang tải..."})}):e.jsx(p,{style:{minHeight:"100vh",background:"#f0f2f5"},children:e.jsx($,{style:{padding:"50px 0"},children:e.jsx(R,{justify:"center",align:"middle",style:{minHeight:"100%"},children:e.jsx(S,{xs:22,sm:16,md:10,lg:8,xl:6,children:e.jsxs(P,{bordered:!1,style:{boxShadow:"0 4px 12px rgba(0,0,0,0.1)",borderRadius:"8px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx(q,{level:2,style:{marginBottom:0},children:"🖥️ Trường Phát POS"}),e.jsx(Q,{type:"secondary",children:"Đăng nhập để tiếp tục"})]}),o&&e.jsx(A,{message:"Lỗi đăng nhập",description:o,type:"error",showIcon:!0,closable:!0,style:{marginBottom:"24px"}}),e.jsxs(r,{name:"login",form:s,layout:"vertical",onFinish:y,initialValues:{remember:!0},children:[e.jsx(r.Item,{name:"username",rules:[{required:!0,message:"Vui lòng nhập tên đăng nhập!"}],children:e.jsx(u,{prefix:e.jsx(B,{}),size:"large",placeholder:"Tên đăng nhập",disabled:n})}),e.jsx(r.Item,{name:"password",rules:[{required:!0,message:"Vui lòng nhập mật khẩu!"}],children:e.jsx(u.Password,{prefix:e.jsx(D,{}),size:"large",placeholder:"Mật khẩu",disabled:n})}),e.jsx(r.Item,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(r.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(E,{disabled:n,children:"Ghi nhớ đăng nhập"})}),e.jsx(L,{to:"/forgot-password",children:"Quên mật khẩu?"})]})}),e.jsx(r.Item,{children:e.jsx(i,{type:"primary",htmlType:"submit",icon:e.jsx(z,{}),size:"large",block:!0,loading:n,children:"Đăng nhập"})})]}),e.jsx(H,{children:e.jsx(g,{type:"secondary",children:"hoặc đăng nhập với vai trò"})}),e.jsxs(N,{direction:"vertical",style:{width:"100%"},children:[e.jsx(i,{block:!0,onClick:()=>{s.setFieldsValue({username:"admin",password:"admin123"}),s.submit()},disabled:n,children:"Quản trị viên (Demo)"}),e.jsx(i,{block:!0,onClick:()=>{s.setFieldsValue({username:"cashier",password:"cashier123"}),s.submit()},disabled:n,children:"Thu ngân (Demo)"}),e.jsx(i,{block:!0,onClick:()=>{s.setFieldsValue({username:"staff",password:"staff123"}),s.submit()},disabled:n,children:"Nhân viên (Demo)"})]}),e.jsx("div",{style:{textAlign:"center",marginTop:"24px"},children:e.jsxs(g,{type:"secondary",children:["© ",new Date().getFullYear()," Trường Phát Computer Hòa Bình"]})})]})})})})})};export{Y as default};
