import{j as e}from"./index-CI5lv9mG.js";import{u as ce,r as a}from"./vendor-DD54NZMZ.js";import{a as o,O as B,ad as _,ae as F,e as H,C as l,f as j,m as S,ab as ie,V as oe,P as re,q as le,I as de,x as he,$ as D,l as I,B as h,af as ue,ag as me,ah as K,ai as pe,aj as xe,a1 as ge,y as je,z as T,M as V,s as v,a5 as ve,H as ke,ak as X,al as fe,am as k,an as ye,T as Se}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:be,Text:Ne}=Se,{Option:u}=D,Pe=()=>{const f=ce(),[O,E]=a.useState(!0),[i,m]=a.useState([]),[p,R]=a.useState(""),[A,d]=a.useState([]),[n,M]=a.useState([]),[x,$]=a.useState("all"),[y,L]=a.useState("all"),[Ie,Ae]=a.useState("table"),[Ce,we]=a.useState("name"),[Te,De]=a.useState("ascend"),[z,C]=a.useState(!1),[g,b]=a.useState(null),N=[{id:1,name:"Laptop Dell Inspiron 15",sku:"DELL-INS-15",category:"Laptop",price:15e6,stock:25,status:"active",image:"https://via.placeholder.com/150",description:"Laptop Dell Inspiron 15 với cấu hình mạnh mẽ",createdAt:"2023-01-15",updatedAt:"2023-06-20"},{id:2,name:'Màn hình Dell 24"',sku:"DELL-MON-24",category:"Màn hình",price:35e5,stock:42,status:"active",image:"https://via.placeholder.com/150",description:"Màn hình Dell 24 inch độ phân giải Full HD",createdAt:"2023-02-10",updatedAt:"2023-05-15"},{id:3,name:"Chuột không dây Logitech",sku:"LOG-MOUSE-01",category:"Phụ kiện",price:45e4,stock:78,status:"active",image:"https://via.placeholder.com/150",description:"Chuột không dây Logitech với độ chính xác cao",createdAt:"2023-03-05",updatedAt:"2023-04-20"},{id:4,name:"Bàn phím cơ AKKO",sku:"AKKO-KB-01",category:"Phụ kiện",price:12e5,stock:15,status:"active",image:"https://via.placeholder.com/150",description:"Bàn phím cơ AKKO với switch Cherry MX Blue",createdAt:"2023-01-25",updatedAt:"2023-03-10"},{id:5,name:"Laptop Acer Nitro 5",sku:"ACER-NIT-5",category:"Laptop",price:22e6,stock:0,status:"out_of_stock",image:"https://via.placeholder.com/150",description:"Laptop gaming Acer Nitro 5 với card đồ họa NVIDIA",createdAt:"2023-02-05",updatedAt:"2023-04-15"},{id:6,name:"Tai nghe Sony WH-1000XM4",sku:"SONY-WH-1000",category:"Âm thanh",price:55e5,stock:8,status:"low_stock",image:"https://via.placeholder.com/150",description:"Tai nghe chống ồn Sony WH-1000XM4 cao cấp",createdAt:"2023-03-15",updatedAt:"2023-05-20"},{id:7,name:"Máy tính để bàn HP Pavilion",sku:"HP-PAV-01",category:"PC",price:18e6,stock:12,status:"active",image:"https://via.placeholder.com/150",description:"Máy tính để bàn HP Pavilion cấu hình mạnh mẽ",createdAt:"2023-01-10",updatedAt:"2023-03-25"},{id:8,name:"Ổ cứng SSD Samsung 1TB",sku:"SAM-SSD-1TB",category:"Linh kiện",price:28e5,stock:35,status:"active",image:"https://via.placeholder.com/150",description:"Ổ cứng SSD Samsung 1TB tốc độ cao",createdAt:"2023-02-20",updatedAt:"2023-04-05"},{id:9,name:"RAM Kingston 16GB DDR4",sku:"KING-RAM-16",category:"Linh kiện",price:15e5,stock:0,status:"out_of_stock",image:"https://via.placeholder.com/150",description:"Bộ nhớ RAM Kingston 16GB DDR4 3200MHz",createdAt:"2023-03-10",updatedAt:"2023-05-05"},{id:10,name:"Card đồ họa NVIDIA RTX 3060",sku:"NV-RTX-3060",category:"Linh kiện",price:95e5,stock:5,status:"low_stock",image:"https://via.placeholder.com/150",description:"Card đồ họa NVIDIA RTX 3060 12GB GDDR6",createdAt:"2023-01-05",updatedAt:"2023-06-10"}];a.useEffect(()=>{setTimeout(()=>{m(N),d(N),E(!1)},1e3)},[]),a.useEffect(()=>{let t=[...i];p&&(t=t.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())||s.sku.toLowerCase().includes(p.toLowerCase())||s.category.toLowerCase().includes(p.toLowerCase()))),x!=="all"&&(t=t.filter(s=>s.category===x)),y!=="all"&&(t=t.filter(s=>s.status===y)),d(t)},[p,x,y,i]);const P=[...new Set(i.map(t=>t.category))],G={selectedRowKeys:n,onChange:t=>M(t)},Y=t=>{b(t),C(!0)},W=()=>{if(g){const t=i.filter(s=>s.id!==g.id);m(t),d(A.filter(s=>s.id!==g.id)),v.success(`Đã xóa sản phẩm "${g.name}"`)}C(!1),b(null)},q=()=>{V.confirm({title:"Xác nhận xóa hàng loạt",content:`Bạn có chắc chắn muốn xóa ${n.length} sản phẩm đã chọn?`,okText:"Xóa",okType:"danger",cancelText:"Hủy",onOk:()=>{const t=i.filter(s=>!n.includes(s.id));m(t),d(A.filter(s=>!n.includes(s.id))),M([]),v.success(`Đã xóa ${n.length} sản phẩm`)}})},U=t=>{const s=t.status==="active"?"inactive":"active",r=i.map(c=>c.id===t.id?{...c,status:s}:c);m(r),d(r.filter(c=>x==="all"||c.category===x)),v.success(`Đã ${s==="active"?"kích hoạt":"vô hiệu hoá"} sản phẩm ${t.name}`)},J=t=>{switch(t){case"active":return e.jsx(k,{status:"success",text:"Đang bán"});case"out_of_stock":return e.jsx(k,{status:"error",text:"Hết hàng"});case"low_stock":return e.jsx(k,{status:"warning",text:"Sắp hết hàng"});case"inactive":return e.jsx(k,{status:"default",text:"Ngừng bán"});default:return e.jsx(k,{status:"processing",text:t})}},Q=t=>{const s=t.target.value;R(s)},Z=t=>{$(t)},ee=t=>{L(t)},te=()=>{R(""),$("all"),L("all")},se=t=>e.jsxs(o,{children:[e.jsx(o.Item,{icon:e.jsx(ye,{}),onClick:()=>f(`/admin/products/view/${t.id}`),children:"Chi tiết"},"view"),e.jsx(o.Item,{icon:e.jsx(X,{}),onClick:()=>f(`/admin/products/edit/${t.id}`),children:"Chỉnh sửa"},"edit"),e.jsx(o.Divider,{}),e.jsx(o.Item,{icon:t.status==="active"?e.jsx(_,{}):e.jsx(B,{}),onClick:()=>U(t),children:t.status==="active"?"Ngừng bán":"Kích hoạt"},"toggle"),e.jsx(o.Item,{icon:e.jsx(F,{}),danger:!0,onClick:()=>Y(t),children:"Xoá"},"delete")]}),ae=[{title:"Sản phẩm",dataIndex:"name",key:"name",render:(t,s)=>e.jsxs(I,{children:[e.jsx(ve,{shape:"square",size:40,src:s.image,alt:t}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t}),e.jsx("div",{style:{fontSize:"12px",color:"#888"},children:s.sku})]})]}),sorter:(t,s)=>t.name.localeCompare(s.name)},{title:"Danh mục",dataIndex:"category",key:"category",render:t=>e.jsx(ke,{color:"blue",children:t}),filters:P.map(t=>({text:t,value:t})),onFilter:(t,s)=>s.category===t},{title:"Giá",dataIndex:"price",key:"price",render:t=>e.jsx("span",{children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)}),sorter:(t,s)=>t.price-s.price},{title:"Tồn kho",dataIndex:"stock",key:"stock",render:(t,s)=>{let r="green";return t===0?r="red":t<10&&(r="orange"),e.jsx("span",{style:{color:r},children:t})},sorter:(t,s)=>t.stock-s.stock},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>J(t),filters:[{text:"Đang bán",value:"active"},{text:"Hết hàng",value:"out_of_stock"},{text:"Sắp hết hàng",value:"low_stock"},{text:"Ngừng bán",value:"inactive"}],onFilter:(t,s)=>s.status===t},{title:"Cập nhật lần cuối",dataIndex:"updatedAt",key:"updatedAt",render:t=>T(t).format("DD/MM/YYYY"),sorter:(t,s)=>T(t.updatedAt).unix()-T(s.updatedAt).unix(),responsive:["lg"]},{title:"Hành động",key:"action",render:(t,s)=>e.jsxs(I,{size:"small",children:[e.jsx(h,{type:"primary",size:"small",icon:e.jsx(X,{}),onClick:()=>f(`/admin/products/edit/${s.id}`),children:"Sửa"}),e.jsx(K,{overlay:se(s),trigger:["click"],children:e.jsx(h,{size:"small",icon:e.jsx(fe,{})})})]})}],w=t=>{if(n.length===0){v.warning("Vui lòng chọn sản phẩm");return}switch(t){case"delete":q();break;case"active":const s=i.map(c=>n.includes(c.id)?{...c,status:"active"}:c);m(s),d(s),v.success(`Đã kích hoạt ${n.length} sản phẩm`);break;case"inactive":const r=i.map(c=>n.includes(c.id)?{...c,status:"inactive"}:c);m(r),d(r),v.success(`Đã vô hiệu hoá ${n.length} sản phẩm`);break}},ne=e.jsxs(o,{children:[e.jsx(o.Item,{icon:e.jsx(B,{}),onClick:()=>w("active"),children:"Kích hoạt đã chọn"},"active"),e.jsx(o.Item,{icon:e.jsx(_,{}),onClick:()=>w("inactive"),children:"Vô hiệu hoá đã chọn"},"inactive"),e.jsx(o.Divider,{}),e.jsx(o.Item,{icon:e.jsx(F,{}),danger:!0,onClick:()=>w("delete"),children:"Xoá đã chọn"},"delete")]});return e.jsxs("div",{className:"product-management",children:[e.jsxs(H,{gutter:[16,16],style:{marginBottom:16},children:[e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(S,{title:"Tổng sản phẩm",value:i.length,prefix:e.jsx(ie,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(S,{title:"Sản phẩm hết hàng",value:i.filter(t=>t.stock===0).length,prefix:e.jsx(oe,{}),valueStyle:{color:"#ff4d4f"}})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(S,{title:"Sắp hết hàng",value:i.filter(t=>t.stock>0&&t.stock<10).length,prefix:e.jsx(re,{}),valueStyle:{color:"#faad14"}})})}),e.jsx(l,{xs:24,sm:12,md:6,children:e.jsx(j,{children:e.jsx(S,{title:"Tổng giá trị kho",value:i.reduce((t,s)=>t+s.price*s.stock,0),prefix:e.jsx(le,{}),valueStyle:{color:"#52c41a"},formatter:t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(t)})})})]}),e.jsx(j,{style:{marginBottom:16},children:e.jsxs(H,{gutter:[16,16],align:"middle",children:[e.jsx(l,{xs:24,sm:12,md:8,lg:6,children:e.jsx(de,{placeholder:"Tìm kiếm sản phẩm...",value:p,onChange:Q,prefix:e.jsx(he,{}),allowClear:!0})}),e.jsx(l,{xs:24,sm:12,md:8,lg:6,children:e.jsxs(D,{placeholder:"Lọc theo danh mục",style:{width:"100%"},value:x,onChange:Z,children:[e.jsx(u,{value:"all",children:"Tất cả danh mục"}),P.map(t=>e.jsx(u,{value:t,children:t},t))]})}),e.jsx(l,{xs:24,sm:12,md:8,lg:6,children:e.jsxs(D,{placeholder:"Lọc theo trạng thái",style:{width:"100%"},value:y,onChange:ee,children:[e.jsx(u,{value:"all",children:"Tất cả trạng thái"}),e.jsx(u,{value:"active",children:"Đang bán"}),e.jsx(u,{value:"out_of_stock",children:"Hết hàng"}),e.jsx(u,{value:"low_stock",children:"Sắp hết hàng"}),e.jsx(u,{value:"inactive",children:"Ngừng bán"})]})}),e.jsx(l,{xs:24,sm:12,md:24,lg:6,style:{textAlign:"right"},children:e.jsxs(I,{wrap:!0,children:[e.jsx(h,{icon:e.jsx(ue,{}),onClick:te,children:"Xoá bộ lọc"}),e.jsx(h,{type:"primary",icon:e.jsx(me,{}),onClick:()=>f("/admin/products/new"),children:"Thêm sản phẩm mới"})]})})]})}),e.jsxs(j,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs(I,{wrap:!0,children:[e.jsx(K,{overlay:ne,disabled:n.length===0,children:e.jsxs(h,{children:["Thao tác hàng loạt ",e.jsx(pe,{})]})}),e.jsx(h,{icon:e.jsx(xe,{}),children:"Nhập Excel"}),e.jsx(h,{icon:e.jsx(ge,{}),children:"Xuất Excel"})]}),e.jsx("span",{style:{marginLeft:8},children:n.length>0&&e.jsxs("span",{children:["Đã chọn ",n.length," sản phẩm"]})})]}),e.jsx(je,{rowSelection:G,columns:ae,dataSource:A,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:t=>`Tổng ${t} sản phẩm`},loading:O})]}),e.jsx(V,{title:"Xác nhận xoá",visible:z,onOk:W,onCancel:()=>C(!1),okText:"Xoá",cancelText:"Huỷ",okButtonProps:{danger:!0},children:g&&e.jsxs("p",{children:['Bạn có chắc chắn muốn xoá sản phẩm "',g.name,'" không?']})})]})};export{Pe as default};
