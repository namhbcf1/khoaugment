import{g as e,h as n,j as a,k as o}from"./polyfills-BjGv5uaK.js";import{c as t}from"./vendor-classnames-C5kUp1Wf.js";import{K as r,k as l,p as c}from"./vendor-rc-util-BHji-2jX.js";import{R as u,r as i}from"./react-vendor-BmR3b86j.js";function f(e,n){var a=e.disabled,o=e.prefixCls,l=e.character,c=e.characterRender,i=e.index,f=e.count,d=e.value,s=e.allowHalf,v=e.focused,m=e.onHover,p=e.onClick,w=i+1,b=new Set([o]);0===d&&0===i&&v?b.add("".concat(o,"-focused")):s&&d+.5>=w&&d<w?(b.add("".concat(o,"-half")),b.add("".concat(o,"-active")),v&&b.add("".concat(o,"-focused"))):(w<=d?b.add("".concat(o,"-full")):b.add("".concat(o,"-zero")),w===d&&v&&b.add("".concat(o,"-focused")));var y="function"==typeof l?l(e):l,h=u.createElement("li",{className:t(Array.from(b)),ref:n},u.createElement("div",{onClick:a?null:function(e){p(e,i)},onKeyDown:a?null:function(e){e.keyCode===r.ENTER&&p(e,i)},onMouseMove:a?null:function(e){m(e,i)},role:"radio","aria-checked":d>i?"true":"false","aria-posinset":i+1,"aria-setsize":f,tabIndex:a?-1:0},u.createElement("div",{className:"".concat(o,"-first")},y),u.createElement("div",{className:"".concat(o,"-second")},y)));return c&&(h=c(h,e)),h}const d=u.forwardRef(f);var s=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","keyboard","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function v(f,v){var m,p=f.prefixCls,w=void 0===p?"rc-rate":p,b=f.className,y=f.defaultValue,h=f.value,C=f.count,R=void 0===C?5:C,E=f.allowHalf,x=void 0!==E&&E,k=f.allowClear,H=void 0===k||k,g=f.keyboard,D=void 0===g||g,L=f.character,F=void 0===L?"â˜…":L,I=f.characterRender,N=f.disabled,T=f.direction,j=void 0===T?"ltr":T,K=f.tabIndex,M=void 0===K?0:K,B=f.autoFocus,S=f.onHoverChange,V=f.onChange,X=f.onFocus,z=f.onBlur,A=f.onKeyDown,G=f.onMouseLeave,W=e(f,s),O=(m=i.useRef({}),[function(e){return m.current[e]},function(e){return function(n){m.current[e]=n}}]),q=n(O,2),J=q[0],P=q[1],Q=u.useRef(null),U=function(){var e;N||(null===(e=Q.current)||void 0===e||e.focus())};u.useImperativeHandle(v,function(){return{focus:U,blur:function(){var e;N||(null===(e=Q.current)||void 0===e||e.blur())}}});var Y=l(y||0,{value:h}),Z=n(Y,2),$=Z[0],_=Z[1],ee=l(null),ne=n(ee,2),ae=ne[0],oe=ne[1],te=function(e,n){var a,o,t,r,l="rtl"===j,c=e+1;if(x){var u=J(e),i=(o=function(e){var n,a,o=e.ownerDocument,t=o.body,r=o&&o.documentElement,l=e.getBoundingClientRect();return n=l.left,a=l.top,{left:n-=r.clientLeft||t.clientLeft||0,top:a-=r.clientTop||t.clientTop||0}}(a=u),t=a.ownerDocument,r=t.defaultView||t.parentWindow,o.left+=function(e){var n=e.pageXOffset,a="scrollLeft";if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[a])&&(n=o.body[a])}return n}(r),o.left),f=u.clientWidth;(l&&n-i>f/2||!l&&n-i<f/2)&&(c-=.5)}return c},re=function(e){_(e),null==V||V(e)},le=u.useState(!1),ce=n(le,2),ue=ce[0],ie=ce[1],fe=u.useState(null),de=n(fe,2),se=de[0],ve=de[1],me=function(e,n){var a=te(n,e.pageX);a!==ae&&(ve(a),oe(null)),null==S||S(a)},pe=function(e){N||(ve(null),oe(null),null==S||S(void 0)),e&&(null==G||G(e))},we=function(e,n){var a=te(n,e.pageX),o=!1;H&&(o=a===$),pe(),re(o?0:a),oe(o?a:null)};u.useEffect(function(){B&&!N&&U()},[]);var be=new Array(R).fill(0).map(function(e,n){return u.createElement(d,{ref:P(n),index:n,count:R,disabled:N,prefixCls:"".concat(w,"-star"),allowHalf:x,value:null===se?$:se,onClick:we,onHover:me,key:e||n,character:F,characterRender:I,focused:ue})}),ye=t(w,b,a(a({},"".concat(w,"-disabled"),N),"".concat(w,"-rtl"),"rtl"===j));return u.createElement("ul",o({className:ye,onMouseLeave:pe,tabIndex:N?-1:M,onFocus:N?null:function(){ie(!0),null==X||X()},onBlur:N?null:function(){ie(!1),null==z||z()},onKeyDown:N?null:function(e){var n=e.keyCode,a="rtl"===j,o=x?.5:1;D&&(n===r.RIGHT&&$<R&&!a?(re($+o),e.preventDefault()):n===r.LEFT&&$>0&&!a||n===r.RIGHT&&$>0&&a?(re($-o),e.preventDefault()):n===r.LEFT&&$<R&&a&&(re($+o),e.preventDefault())),null==A||A(e)},ref:Q},c(W,{aria:!0,data:!0,attr:!0})),be)}const m=u.forwardRef(v);export{m as R};
