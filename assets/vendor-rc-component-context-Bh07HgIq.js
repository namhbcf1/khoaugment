import{h as e,k as r}from"./polyfills-B4r5O4me.js";import{l as t,e as n,i as u,s as a}from"./vendor-rc-util-Cfhh6bGy.js";import{r as o,e as c}from"./react-vendor-D_ybsntB.js";function f(r){var n=o.createContext(void 0);return{Context:n,Provider:function(r){var u=r.value,a=r.children,f=o.useRef(u);f.current=u;var i=o.useState(function(){return{getValue:function(){return f.current},listeners:new Set}}),l=e(i,1)[0];return t(function(){c.unstable_batchedUpdates(function(){l.listeners.forEach(function(e){e(u)})})},[u]),o.createElement(n.Provider,{value:l},a)},defaultValue:r}}function i(r,a){var c=n("function"==typeof a?a:function(e){if(void 0===a)return e;if(!Array.isArray(a))return e[a];var r={};return a.forEach(function(t){r[t]=e[t]}),r}),f=o.useContext(null==r?void 0:r.Context),i=f||{},l=i.listeners,s=i.getValue,v=o.useRef();v.current=c(f?s():null==r?void 0:r.defaultValue);var m=o.useState({}),d=e(m,2)[1];return t(function(){if(f)return l.add(e),function(){l.delete(e)};function e(e){var r=c(e);u(v.current,r,!0)||d({})}},[f]),v.current}function l(){var e=o.createContext(null);function t(){return o.useContext(e)}return{makeImmutable:function(n,u){var c=a(n),f=function(a,f){var i=c?{ref:f}:{},l=o.useRef(0),s=o.useRef(a);return null!==t()?o.createElement(n,r({},a,i)):(u&&!u(s.current,a)||(l.current+=1),s.current=a,o.createElement(e.Provider,{value:l.current},o.createElement(n,r({},a,i))))};return c?o.forwardRef(f):f},responseImmutable:function(e,n){var u=a(e),c=function(n,a){var c=u?{ref:a}:{};return t(),o.createElement(e,r({},n,c))};return u?o.memo(o.forwardRef(c),n):o.memo(c,n)},useImmutableMark:t}}export{f as a,l as c,i as u};
