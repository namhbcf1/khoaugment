import{g as e,k as n,h as t,f as o,j as a}from"./polyfills-B4r5O4me.js";import{P as r}from"./vendor-rc-component-portal-B-ypBxqm.js";import{h as l,p as s,B as i,K as c,l as u}from"./vendor-rc-util-Cfhh6bGy.js";import{r as d}from"./react-vendor-D_ybsntB.js";import{c as v}from"./vendor-classnames-Bjqz8XQ3.js";import{C as f}from"./vendor-rc-motion-CgrNkiVN.js";var m=d.createContext(null),p=d.createContext({}),h=["prefixCls","className","containerRef"],y=function(t){var o=t.prefixCls,a=t.className,r=t.containerRef,i=e(t,h),c=d.useContext(p).panel,u=l(c,r);return d.createElement("div",n({className:v("".concat(o,"-content"),a),role:"dialog",ref:u},s(t,{aria:!0}),{"aria-modal":"true"},i))};function C(e){return"string"==typeof e&&String(Number(e))===e?(i(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var k={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function E(e,r){var l,i,u,p=e.prefixCls,h=e.open,E=e.placement,b=e.inline,w=e.push,x=e.forceRender,g=e.autoFocus,N=e.keyboard,M=e.classNames,R=e.rootClassName,K=e.rootStyle,S=e.zIndex,D=e.className,O=e.id,j=e.style,I=e.motion,L=e.width,P=e.height,U=e.children,B=e.mask,F=e.maskClosable,z=e.maskMotion,A=e.maskClassName,T=e.maskStyle,X=e.afterOpenChange,Y=e.onClose,G=e.onMouseEnter,H=e.onMouseOver,V=e.onMouseLeave,q=e.onClick,J=e.onKeyDown,Q=e.onKeyUp,W=e.styles,Z=e.drawerRender,$=d.useRef(),_=d.useRef(),ee=d.useRef();d.useImperativeHandle(r,function(){return $.current});d.useEffect(function(){var e;h&&g&&(null===(e=$.current)||void 0===e||e.focus({preventScroll:!0}))},[h]);var ne=d.useState(!1),te=t(ne,2),oe=te[0],ae=te[1],re=d.useContext(m),le=null!==(l=null!==(i=null===(u="boolean"==typeof w?w?{}:{distance:0}:w||{})||void 0===u?void 0:u.distance)&&void 0!==i?i:null==re?void 0:re.pushDistance)&&void 0!==l?l:180,se=d.useMemo(function(){return{pushDistance:le,push:function(){ae(!0)},pull:function(){ae(!1)}}},[le]);d.useEffect(function(){var e,n;h?null==re||null===(e=re.push)||void 0===e||e.call(re):null==re||null===(n=re.pull)||void 0===n||n.call(re)},[h]),d.useEffect(function(){return function(){var e;null==re||null===(e=re.pull)||void 0===e||e.call(re)}},[]);var ie=d.createElement(f,n({key:"mask"},z,{visible:B&&h}),function(e,n){var t=e.className,a=e.style;return d.createElement("div",{className:v("".concat(p,"-mask"),t,null==M?void 0:M.mask,A),style:o(o(o({},a),T),null==W?void 0:W.mask),onClick:F&&h?Y:void 0,ref:n})}),ce="function"==typeof I?I(E):I,ue={};if(oe&&le)switch(E){case"top":ue.transform="translateY(".concat(le,"px)");break;case"bottom":ue.transform="translateY(".concat(-le,"px)");break;case"left":ue.transform="translateX(".concat(le,"px)");break;default:ue.transform="translateX(".concat(-le,"px)")}"left"===E||"right"===E?ue.width=C(L):ue.height=C(P);var de={onMouseEnter:G,onMouseOver:H,onMouseLeave:V,onClick:q,onKeyDown:J,onKeyUp:Q},ve=d.createElement(f,n({key:"panel"},ce,{visible:h,forceRender:x,onVisibleChanged:function(e){null==X||X(e)},removeOnLeave:!1,leavedClassName:"".concat(p,"-content-wrapper-hidden")}),function(t,a){var r=t.className,l=t.style,i=d.createElement(y,n({id:O,containerRef:a,prefixCls:p,className:v(D,null==M?void 0:M.content),style:o(o({},j),null==W?void 0:W.content)},s(e,{aria:!0}),de),U);return d.createElement("div",n({className:v("".concat(p,"-content-wrapper"),null==M?void 0:M.wrapper,r),style:o(o(o({},ue),l),null==W?void 0:W.wrapper)},s(e,{data:!0})),Z?Z(i):i)}),fe=o({},K);return S&&(fe.zIndex=S),d.createElement(m.Provider,{value:se},d.createElement("div",{className:v(p,"".concat(p,"-").concat(E),R,a(a({},"".concat(p,"-open"),h),"".concat(p,"-inline"),b)),style:fe,tabIndex:-1,ref:$,onKeyDown:function(e){var n=e.keyCode,t=e.shiftKey;switch(n){case c.TAB:var o;if(n===c.TAB)if(t||document.activeElement!==ee.current){if(t&&document.activeElement===_.current){var a;null===(a=ee.current)||void 0===a||a.focus({preventScroll:!0})}}else null===(o=_.current)||void 0===o||o.focus({preventScroll:!0});break;case c.ESC:Y&&N&&(e.stopPropagation(),Y(e))}}},ie,d.createElement("div",{tabIndex:0,ref:_,style:k,"aria-hidden":"true","data-sentinel":"start"}),ve,d.createElement("div",{tabIndex:0,ref:ee,style:k,"aria-hidden":"true","data-sentinel":"end"})))}var b=d.forwardRef(E),w=function(e){var n=e.open,a=void 0!==n&&n,l=e.prefixCls,s=void 0===l?"rc-drawer":l,i=e.placement,c=void 0===i?"right":i,v=e.autoFocus,f=void 0===v||v,m=e.keyboard,h=void 0===m||m,y=e.width,C=void 0===y?378:y,k=e.mask,E=void 0===k||k,w=e.maskClosable,x=void 0===w||w,g=e.getContainer,N=e.forceRender,M=e.afterOpenChange,R=e.destroyOnClose,K=e.onMouseEnter,S=e.onMouseOver,D=e.onMouseLeave,O=e.onClick,j=e.onKeyDown,I=e.onKeyUp,L=e.panelRef,P=d.useState(!1),U=t(P,2),B=U[0],F=U[1],z=d.useState(!1),A=t(z,2),T=A[0],X=A[1];u(function(){X(!0)},[]);var Y=!!T&&a,G=d.useRef(),H=d.useRef();u(function(){Y&&(H.current=document.activeElement)},[Y]);var V=d.useMemo(function(){return{panel:L}},[L]);if(!N&&!B&&!Y&&R)return null;var q={onMouseEnter:K,onMouseOver:S,onMouseLeave:D,onClick:O,onKeyDown:j,onKeyUp:I},J=o(o({},e),{},{open:Y,prefixCls:s,placement:c,autoFocus:f,keyboard:h,width:C,mask:E,maskClosable:x,inline:!1===g,afterOpenChange:function(e){var n,t;(F(e),null==M||M(e),e||!H.current||null!==(n=G.current)&&void 0!==n&&n.contains(H.current))||(null===(t=H.current)||void 0===t||t.focus({preventScroll:!0}))},ref:G},q);return d.createElement(p.Provider,{value:V},d.createElement(r,{open:Y||N||B,autoDestroy:!1,getContainer:g,autoLock:E&&(Y||B)},d.createElement(b,J)))};export{w as D};
