import{j as e}from"./index-CI5lv9mG.js";import{u as le,r as c}from"./vendor-DD54NZMZ.js";import{F as a,f as L,T as ie,u as K,l as p,A as u,B as r,N as S,at as ce,au as re,a7 as P,O as B,ad as A,y as I,av as oe,ak as E,M,e as G,C as i,$ as o,as as F,k as he,I as de,s as m,H as y,J as ue}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:pe,Text:ve,Paragraph:me}=ie,{TabPane:b}=K,{Option:s}=o,{Dragger:xe}=ce,{confirm:fe}=M,Se=()=>{const R=le(),[d,D]=c.useState([]),[C,O]=c.useState([]),[V,T]=c.useState(""),[w,x]=c.useState(0),[_,$]=c.useState([]),[H,U]=c.useState(!1),[h,X]=c.useState([]),[v]=a.useForm(),[z,g]=c.useState(!1),[f,j]=c.useState("upload"),q=["Laptop","PC","Màn hình","Linh kiện","Phụ kiện","Âm thanh","Thiết bị mạng","Thiết bị văn phòng","Phần mềm"],J=["Dell","HP","Asus","Acer","Lenovo","Apple","Samsung","LG"],Q=[{key:"1",name:"Laptop Dell Inspiron 15",sku:"DELL-INS-15",category:"Laptop",price:15e6,stock:25,status:"active"},{key:"2",name:'Màn hình Dell 24"',sku:"DELL-MON-24",category:"Màn hình",price:35e5,stock:42,status:"active"},{key:"3",name:"Chuột không dây Logitech",sku:"LOG-MOUSE-01",category:"Phụ kiện",price:45e4,stock:78,status:"active"},{key:"4",name:"Bàn phím cơ AKKO",sku:"AKKO-KB-01",category:"Phụ kiện",price:12e5,stock:15,status:"active"},{key:"5",name:"Laptop Acer Nitro 5",sku:"ACER-NIT-5",category:"Laptop",price:22e6,stock:0,status:"out_of_stock"}],W=t=>{T("uploading"),x(0);const n=setInterval(()=>{x(l=>{if(l>=100){clearInterval(n),T("done"),j("validate");const k=[{name:"Laptop HP Pavilion 15",sku:"HP-PAV-15",category:"Laptop",price:"13500000",stock:"10",status:"active",validationStatus:"success",errors:[]},{name:"Bàn phím Logitech G Pro",sku:"LOG-KB-PRO",category:"Phụ kiện",price:"2300000",stock:"15",status:"active",validationStatus:"success",errors:[]},{name:"Chuột Gaming MSI",sku:"",category:"Phụ kiện",price:"950000",stock:"20",status:"active",validationStatus:"error",errors:["SKU là trường bắt buộc"]},{name:"Màn hình Asus ROG",sku:"ASUS-MON-ROG",category:"Màn hình",price:"không phải số",stock:"8",status:"active",validationStatus:"error",errors:["Giá không hợp lệ"]},{name:"RAM Corsair 16GB",sku:"CORS-RAM-16",category:"Linh kiện",price:"1850000",stock:"-5",status:"active",validationStatus:"error",errors:["Số lượng tồn kho không được âm"]}];return D(k),$(k.filter(ae=>ae.validationStatus==="error")),100}return l+10})},200);return!1},Y=()=>{j("import"),x(0);const t=setInterval(()=>{x(n=>{if(n>=100){clearInterval(t);const l=d.filter(k=>k.validationStatus==="success");return O(l),U(!0),m.success(`Đã nhập thành công ${l.length} sản phẩm`),100}return n+5})},100)},Z=()=>{if(h.length===0){m.warning("Vui lòng chọn ít nhất một sản phẩm để chỉnh sửa hàng loạt");return}g(!0)},ee=t=>{console.log("Bulk edit values:",t),console.log("Selected products:",h),m.success(`Đã cập nhật ${h.length} sản phẩm`),g(!1),v.resetFields()},te=()=>{m.success("Đang tải file mẫu nhập sản phẩm hàng loạt")},se=[{title:"Sản phẩm",dataIndex:"name",key:"name"},{title:"SKU",dataIndex:"sku",key:"sku"},{title:"Danh mục",dataIndex:"category",key:"category",render:t=>e.jsx(y,{color:"blue",children:t})},{title:"Giá",dataIndex:"price",key:"price",render:t=>e.jsx("span",{children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)})},{title:"Tồn kho",dataIndex:"stock",key:"stock"},{title:"Trạng thái",dataIndex:"status",key:"status",render:t=>{let n,l;switch(t){case"active":n="green",l="Đang bán";break;case"out_of_stock":n="red",l="Hết hàng";break;case"inactive":n="default",l="Ngừng bán";break;default:n="default",l=t}return e.jsx(y,{color:n,children:l})}}],N=[{title:"Sản phẩm",dataIndex:"name",key:"name"},{title:"SKU",dataIndex:"sku",key:"sku"},{title:"Danh mục",dataIndex:"category",key:"category"},{title:"Giá",dataIndex:"price",key:"price"},{title:"Tồn kho",dataIndex:"stock",key:"stock"},{title:"Trạng thái",dataIndex:"status",key:"status"},{title:"Kết quả",dataIndex:"validationStatus",key:"validationStatus",render:(t,n)=>t==="success"?e.jsx(y,{icon:e.jsx(B,{}),color:"success",children:"Hợp lệ"}):e.jsx(ue,{title:n.errors.join(", "),children:e.jsx(y,{icon:e.jsx(A,{}),color:"error",children:"Lỗi"})})}],ne={onChange:(t,n)=>{X(n)}};return e.jsx("div",{className:"bulk-operations",children:e.jsxs(L,{children:[e.jsx(pe,{level:2,children:"Thao tác sản phẩm hàng loạt"}),e.jsx(me,{type:"secondary",children:"Quản lý nhiều sản phẩm cùng lúc: nhập khẩu, xuất khẩu, và chỉnh sửa hàng loạt."}),e.jsxs(K,{defaultActiveKey:"import",children:[e.jsx(b,{tab:e.jsxs("span",{children:[e.jsx(oe,{})," Nhập hàng loạt"]}),children:e.jsxs(p,{direction:"vertical",style:{width:"100%"},children:[f==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx(u,{message:"Hướng dẫn nhập sản phẩm hàng loạt",description:e.jsxs("ol",{children:[e.jsx("li",{children:"Tải xuống file mẫu Excel hoặc CSV"}),e.jsx("li",{children:"Điền thông tin sản phẩm theo mẫu"}),e.jsx("li",{children:"Tải lên file đã điền thông tin"}),e.jsx("li",{children:"Kiểm tra và xác nhận nhập dữ liệu"})]}),type:"info",showIcon:!0}),e.jsx(r,{icon:e.jsx(S,{}),onClick:te,style:{marginBottom:16},children:"Tải file mẫu"}),e.jsxs(xe,{name:"file",multiple:!1,beforeUpload:W,showUploadList:!1,accept:".xlsx,.xls,.csv",children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(re,{style:{fontSize:48,color:"#52c41a"}})}),e.jsx("p",{className:"ant-upload-text",children:"Nhấp hoặc kéo file vào khu vực này để tải lên"}),e.jsx("p",{className:"ant-upload-hint",children:"Hỗ trợ file Excel (.xlsx, .xls) hoặc CSV (.csv)"})]}),V==="uploading"&&e.jsx(P,{percent:w,status:"active"})]}),f==="validate"&&e.jsxs(e.Fragment,{children:[e.jsx(u,{message:`Đã tìm thấy ${d.length} sản phẩm trong file`,description:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(B,{style:{color:"#52c41a"}})," Hợp lệ: ",d.filter(t=>t.validationStatus==="success").length," sản phẩm"]}),e.jsxs("p",{children:[e.jsx(A,{style:{color:"#ff4d4f"}})," Lỗi: ",_.length," sản phẩm"]})]}),type:"info",showIcon:!0}),e.jsx(I,{dataSource:d,columns:N,rowKey:"sku",pagination:{pageSize:5},style:{marginTop:16}}),e.jsxs(p,{style:{marginTop:16},children:[e.jsx(r,{onClick:()=>j("upload"),children:"Tải lại file khác"}),e.jsxs(r,{type:"primary",onClick:Y,disabled:d.filter(t=>t.validationStatus==="success").length===0,children:["Nhập ",d.filter(t=>t.validationStatus==="success").length," sản phẩm hợp lệ"]})]})]}),f==="import"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{percent:w,status:"active"}),H&&e.jsxs(e.Fragment,{children:[e.jsx(u,{message:"Nhập dữ liệu thành công",description:`Đã nhập thành công ${C.length} sản phẩm vào hệ thống`,type:"success",showIcon:!0,style:{marginTop:16,marginBottom:16}}),e.jsx(I,{dataSource:C,columns:N.slice(0,-1),rowKey:"sku",pagination:{pageSize:5}}),e.jsxs(p,{style:{marginTop:16},children:[e.jsx(r,{onClick:()=>j("upload"),children:"Nhập file khác"}),e.jsx(r,{type:"primary",onClick:()=>R("/admin/products"),children:"Xem tất cả sản phẩm"})]})]})]})]})},"import"),e.jsxs(b,{tab:e.jsxs("span",{children:[e.jsx(E,{})," Chỉnh sửa hàng loạt"]}),children:[e.jsxs(p,{direction:"vertical",style:{width:"100%"},children:[e.jsx(u,{message:"Chỉnh sửa nhiều sản phẩm cùng lúc",description:"Chọn các sản phẩm bạn muốn chỉnh sửa, sau đó cập nhật thông tin cho tất cả sản phẩm đã chọn.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs(r,{type:"primary",onClick:Z,disabled:h.length===0,icon:e.jsx(E,{}),children:["Chỉnh sửa ",h.length>0?h.length:""," sản phẩm đã chọn"]})}),e.jsx(I,{rowSelection:{type:"checkbox",...ne},dataSource:Q,columns:se,rowKey:"key"})]}),e.jsxs(M,{title:`Chỉnh sửa hàng loạt (${h.length} sản phẩm)`,open:z,onCancel:()=>g(!1),footer:[e.jsx(r,{onClick:()=>g(!1),children:"Hủy"},"back"),e.jsx(r,{type:"primary",onClick:()=>v.submit(),children:"Cập nhật"},"submit")],width:700,children:[e.jsx(u,{message:"Lưu ý",description:"Chỉ các trường được điền thông tin mới được cập nhật cho các sản phẩm đã chọn.",type:"warning",showIcon:!0,style:{marginBottom:16}}),e.jsx(a,{form:v,layout:"vertical",onFinish:ee,children:e.jsxs(G,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"category",label:"Danh mục",children:e.jsx(o,{placeholder:"Chọn danh mục mới",allowClear:!0,children:q.map(t=>e.jsx(s,{value:t,children:t},t))})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"status",label:"Trạng thái",children:e.jsxs(o,{placeholder:"Chọn trạng thái mới",allowClear:!0,children:[e.jsx(s,{value:"active",children:"Đang bán"}),e.jsx(s,{value:"inactive",children:"Ngừng bán"})]})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"supplier",label:"Nhà cung cấp",children:e.jsx(o,{placeholder:"Chọn nhà cung cấp",allowClear:!0,children:J.map(t=>e.jsx(s,{value:t,children:t},t))})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"tax",label:"Thuế (%)",children:e.jsx(F,{style:{width:"100%"},min:0,max:100,placeholder:"Nhập % thuế mới",addonAfter:"%"})})}),e.jsx(he,{}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"priceAdjustmentType",label:"Điều chỉnh giá",children:e.jsxs(o,{placeholder:"Chọn loại điều chỉnh",allowClear:!0,children:[e.jsx(s,{value:"fixed",children:"Giá cố định"}),e.jsx(s,{value:"increase_percentage",children:"Tăng theo %"}),e.jsx(s,{value:"decrease_percentage",children:"Giảm theo %"}),e.jsx(s,{value:"increase_amount",children:"Tăng theo giá trị"}),e.jsx(s,{value:"decrease_amount",children:"Giảm theo giá trị"})]})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{name:"priceAdjustmentValue",label:"Giá trị điều chỉnh",children:e.jsx(F,{style:{width:"100%"},placeholder:"Nhập giá trị"})})}),e.jsx(i,{span:24,children:e.jsx(a.Item,{name:"notes",label:"Ghi chú",children:e.jsx(de.TextArea,{rows:3,placeholder:"Ghi chú về sự thay đổi này"})})})]})})]})]},"bulkEdit"),e.jsx(b,{tab:e.jsxs("span",{children:[e.jsx(S,{})," Xuất dữ liệu"]}),children:e.jsxs(p,{direction:"vertical",style:{width:"100%"},children:[e.jsx(u,{message:"Xuất dữ liệu sản phẩm",description:"Xuất dữ liệu sản phẩm sang Excel hoặc CSV để sử dụng với các phần mềm khác.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx(L,{title:"Tùy chọn xuất dữ liệu",children:e.jsxs(a,{layout:"vertical",children:[e.jsxs(G,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(a.Item,{label:"Định dạng file",name:"exportFormat",initialValue:"excel",children:e.jsxs(o,{children:[e.jsx(s,{value:"excel",children:"Excel (.xlsx)"}),e.jsx(s,{value:"csv",children:"CSV (.csv)"})]})})}),e.jsx(i,{span:12,children:e.jsx(a.Item,{label:"Bao gồm",name:"exportInclude",initialValue:["all"],children:e.jsxs(o,{mode:"multiple",placeholder:"Chọn thông tin để xuất",children:[e.jsx(s,{value:"all",children:"Tất cả thông tin"}),e.jsx(s,{value:"basic",children:"Thông tin cơ bản"}),e.jsx(s,{value:"price",children:"Thông tin giá"}),e.jsx(s,{value:"inventory",children:"Thông tin kho hàng"}),e.jsx(s,{value:"metadata",children:"Metadata"})]})})}),e.jsx(i,{span:24,children:e.jsx(a.Item,{label:"Lọc sản phẩm",name:"exportFilter",children:e.jsxs(o,{allowClear:!0,placeholder:"Xuất tất cả sản phẩm hoặc chọn bộ lọc",children:[e.jsx(s,{value:"all",children:"Tất cả sản phẩm"}),e.jsx(s,{value:"active",children:"Chỉ sản phẩm đang bán"}),e.jsx(s,{value:"out_of_stock",children:"Chỉ sản phẩm hết hàng"}),e.jsx(s,{value:"low_stock",children:"Chỉ sản phẩm sắp hết hàng"})]})})})]}),e.jsx(r,{type:"primary",icon:e.jsx(S,{}),onClick:()=>m.success("Đang xuất dữ liệu sản phẩm"),children:"Xuất dữ liệu"})]})})]})},"export")]})]})})};export{Se as default};
