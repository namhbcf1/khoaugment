const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminLayout-dSOdEPHm.js","assets/vendor-DD54NZMZ.js","assets/styles-C5Pz_kje.js","assets/antd-pmzi8FkM.js","assets/styles-B7E7Bkxc.css","assets/utils-Db1EesZb.js","assets/CashierLayout-ttSyu21G.js","assets/StaffLayout-D6WH0eDZ.js","assets/CustomerLayout-FkZF7nvt.js","assets/Login-CaVgk8UC.js","assets/Dashboard-CaBeUtjF.js","assets/CustomerLookup-D2HBpOrq.js","assets/relativeTime-DFU4YyFN.js","assets/Terms-C53pIepJ.js","assets/QrLookup-BjlFUeWj.js","assets/AnalyticsDashboard-GfsFAezO.js","assets/BarChart-De6rU90y.js","assets/defaultLocale-Baf4yPCw.js","assets/LineChart-DSvfKguU.js","assets/PieChart-BnuDruS8.js","assets/RevenueOverview-aoZ7WZcc.js","assets/index-HZU7_8u2.js","assets/PerformanceMetrics-CddT4ozh.js","assets/ComposedChart-HjhqlpuW.js","assets/ProductManagement-_r6S6n5g.js","assets/ProductForm-BwN_xdMr.js","assets/BulkOperations-CaF8CSZ4.js","assets/PriceOptimization-D-HklG5n.js","assets/InventoryDashboard-qfmc4SLP.js","assets/index-BAR-SsWl.js","assets/OrderManagement-B1C9_E71.js","assets/OrderAnalytics-DBWleO6W.js","assets/ReturnProcessing-DG70G_-n.js","assets/ReportCenter-WCjkeOtJ.js","assets/CustomReports-DXTiaV8O.js","assets/OmnichannelAnalytics-CEwWnP4b.js","assets/BusinessIntelligence-DRylRsv1.js","assets/StaffManagement-9QoGZclY.js","assets/PerformanceTracking-MGh5DbyT.js","assets/GamificationConfig-Dlb4Q3ZY.js","assets/CommissionSettings-BlLoO0Kg.js","assets/CustomerManagement-RIwd3efJ.js","assets/LoyaltyPrograms-DJDsA8LO.js","assets/CustomerSegmentation-CY9a8n9s.js","assets/PersonalizationEngine-DJlvesir.js","assets/EcommerceChannels-Byb9n8jo.js","assets/PaymentGateways-bNcfeBPA.js","assets/ThirdPartyApps-D6gMFifY.js","assets/APIManagement-CFCu9Xqb.js","assets/SystemSettings-B5y3KgPd.js","assets/UserRoles-z191OHZh.js","assets/SecuritySettings-BoBCp8I-.js","assets/CompanyProfile-lmcuuCIb.js","assets/POSTerminal-DwFidwd7.js","assets/POSTerminal-BkY0tuzb.css","assets/ProductSelector-NK-2MkFt.js","assets/ProductSelector-BTFzXmxo.css","assets/CartManager-9rh2BBiz.js","assets/formatters-zHPZYAEt.js","assets/PaymentProcessor-D7eM_KpR.js","assets/ReceiptPrinter-D8IbvuQr.js","assets/SmartSuggestions-Dss1TVe4.js","assets/ShiftStart-mskEoJtl.js","assets/ShiftEnd-dsUZPBdP.js","assets/CashCount-zZsI_XLE.js","assets/SessionReports-StqOtLVQ.js","assets/PersonalDashboard-jVg1HRnb.js","assets/PerformanceOverview-CHvZefiN.js","assets/Leaderboard-DL_48x-Z.js","assets/AchievementCenter-D9iYdYRY.js","assets/BadgeCollection-BHTqrJuR.js","assets/ChallengeHub-CTHecFAQ.js"])))=>i.map(i=>d[i]);
import{r as a,c as it,g as de,f as lt,N as I,i as ct,j as l,B as ut}from"./vendor-DD54NZMZ.js";import{a as pt}from"./utils-Db1EesZb.js";import{s as k,S as Ae,W as dt,B as ve,c1 as mt}from"./antd-pmzi8FkM.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();var Ie={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _t=a,ht=Symbol.for("react.element"),ft=Symbol.for("react.fragment"),yt=Object.prototype.hasOwnProperty,gt=_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vt={key:!0,ref:!0,__self:!0,__source:!0};function Re(e,t,o){var n,s={},i=null,u=null;o!==void 0&&(i=""+o),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)yt.call(t,n)&&!vt.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:ht,type:e,key:i,ref:u,props:s,_owner:gt.current}}q.Fragment=ft;q.jsx=Re;q.jsxs=Re;Ie.exports=q;var r=Ie.exports,ce={},Ee=it;ce.createRoot=Ee.createRoot,ce.hydrateRoot=Ee.hydrateRoot;var G={},ke={exports:{}};(function(e){function t(o){return o&&o.__esModule?o:{default:o}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(ke);var H=ke.exports,W={};Object.defineProperty(W,"__esModule",{value:!0});W.default=void 0;var Et={items_per_page:"/ trang",jump_to:"Đến",jump_to_confirm:"xác nhận",page:"Trang",prev_page:"Trang Trước",next_page:"Trang Kế",prev_5:"Về 5 Trang Trước",next_5:"Đến 5 Trang Kế",prev_3:"Về 3 Trang Trước",next_3:"Đến 3 Trang Kế",page_size:"kích thước trang"};W.default=Et;var X={},$={},Q={},we={exports:{}},Le={exports:{}},Ce={exports:{}},De={exports:{}};(function(e){function t(o){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(o)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(De);var $e=De.exports,Ve={exports:{}};(function(e){var t=$e.default;function o(n,s){if(t(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var u=i.call(n,s||"default");if(t(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(n)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports})(Ve);var xt=Ve.exports;(function(e){var t=$e.default,o=xt;function n(s){var i=o(s,"string");return t(i)=="symbol"?i:i+""}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Ce);var Pt=Ce.exports;(function(e){var t=Pt;function o(n,s,i){return(s=t(s))in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports})(Le);var jt=Le.exports;(function(e){var t=jt;function o(s,i){var u=Object.keys(s);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(s);i&&(p=p.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),u.push.apply(u,p)}return u}function n(s){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?o(Object(u),!0).forEach(function(p){t(s,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):o(Object(u)).forEach(function(p){Object.defineProperty(s,p,Object.getOwnPropertyDescriptor(u,p))})}return s}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(we);var Me=we.exports;const wn=de(Me);var J={};Object.defineProperty(J,"__esModule",{value:!0});J.commonLocale=void 0;J.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0};var St=H.default;Object.defineProperty(Q,"__esModule",{value:!0});Q.default=void 0;var xe=St(Me),bt=J,Tt=(0,xe.default)((0,xe.default)({},bt.commonLocale),{},{locale:"vi_VN",today:"Hôm nay",now:"Bây giờ",backToToday:"Trở về hôm nay",ok:"OK",clear:"Xóa",week:"Tuần",month:"Tháng",year:"Năm",timeSelect:"Chọn thời gian",dateSelect:"Chọn ngày",weekSelect:"Chọn tuần",monthSelect:"Chọn tháng",yearSelect:"Chọn năm",decadeSelect:"Chọn thập kỷ",dateFormat:"D/M/YYYY",dateTimeFormat:"D/M/YYYY HH:mm:ss",previousMonth:"Tháng trước (PageUp)",nextMonth:"Tháng sau (PageDown)",previousYear:"Năm trước (Control + left)",nextYear:"Năm sau (Control + right)",previousDecade:"Thập kỷ trước",nextDecade:"Thập kỷ sau",previousCentury:"Thế kỷ trước",nextCentury:"Thế kỷ sau"});Q.default=Tt;var V={};Object.defineProperty(V,"__esModule",{value:!0});V.default=void 0;const Ot={placeholder:"Chọn thời gian",rangePlaceholder:["Bắt đầu","Kết thúc"]};V.default=Ot;var ze=H.default;Object.defineProperty($,"__esModule",{value:!0});$.default=void 0;var At=ze(Q),It=ze(V);const Rt={lang:Object.assign({placeholder:"Chọn thời điểm",yearPlaceholder:"Chọn năm",quarterPlaceholder:"Chọn quý",monthPlaceholder:"Chọn tháng",weekPlaceholder:"Chọn tuần",rangePlaceholder:["Ngày bắt đầu","Ngày kết thúc"],rangeYearPlaceholder:["Năm bắt đầu","Năm kết thúc"],rangeQuarterPlaceholder:["Quý bắt đầu","Quý kết thúc"],rangeMonthPlaceholder:["Tháng bắt đầu","Tháng kết thúc"],rangeWeekPlaceholder:["Tuần bắt đầu","Tuần kết thúc"]},At.default),timePickerLocale:Object.assign({},It.default)};$.default=Rt;var kt=H.default;Object.defineProperty(X,"__esModule",{value:!0});X.default=void 0;var wt=kt($);X.default=wt.default;var Z=H.default;Object.defineProperty(G,"__esModule",{value:!0});G.default=void 0;var Lt=Z(W),Ct=Z(X),Dt=Z($),$t=Z(V);const b="${label} không phải kiểu ${type} hợp lệ",Vt={locale:"vi",Pagination:Lt.default,DatePicker:Dt.default,TimePicker:$t.default,Calendar:Ct.default,global:{placeholder:"Vui lòng chọn",close:"Đóng"},Table:{filterTitle:"Bộ lọc",filterConfirm:"Đồng ý",filterReset:"Bỏ lọc",filterEmptyText:"Không có bộ lọc",filterCheckAll:"Chọn tất cả",filterSearchPlaceholder:"Tìm kiếm bộ lọc",emptyText:"Trống",selectAll:"Chọn tất cả",selectInvert:"Chọn ngược lại",selectNone:"Bỏ chọn tất cả",selectionAll:"Chọn tất cả",sortTitle:"Sắp xếp",expand:"Mở rộng dòng",collapse:"Thu gọn dòng",triggerDesc:"Nhấp để sắp xếp giảm dần",triggerAsc:"Nhấp để sắp xếp tăng dần",cancelSort:"Nhấp để hủy sắp xếp"},Tour:{Next:"Tiếp",Previous:"Trước",Finish:"Hoàn thành"},Modal:{okText:"Đồng ý",cancelText:"Hủy",justOkText:"OK"},Popconfirm:{okText:"Đồng ý",cancelText:"Hủy"},Transfer:{titles:["",""],searchPlaceholder:"Tìm ở đây",itemUnit:"mục",itemsUnit:"mục",remove:"Gỡ bỏ",selectCurrent:"Chọn trang hiện tại",removeCurrent:"Gỡ bỏ trang hiện tại",selectAll:"Chọn tất cả",removeAll:"Gỡ bỏ tất cả",selectInvert:"Đảo ngược trang hiện tại"},Upload:{uploading:"Đang tải lên...",removeFile:"Gỡ bỏ tập tin",uploadError:"Lỗi tải lên",previewFile:"Xem trước tập tin",downloadFile:"Tải tập tin"},Empty:{description:"Trống"},Icon:{icon:"icon"},Text:{edit:"Chỉnh sửa",copy:"Sao chép",copied:"Đã sao chép",expand:"Mở rộng"},Form:{optional:"(Tùy chọn)",defaultValidateMessages:{default:"${label} không đáp ứng điều kiện quy định",required:"Hãy nhập thông tin cho trường ${label}",enum:"${label} phải có giá trị nằm trong tập [${enum}]",whitespace:"${label} không được chứa khoảng trắng",date:{format:"${label} sai định dạng ngày tháng",parse:"Không thể chuyển ${label} sang kiểu Ngày tháng",invalid:"${label} không phải giá trị Ngày tháng hợp lệ"},types:{string:b,method:b,array:b,object:b,number:b,date:b,boolean:b,integer:b,float:b,regexp:b,email:b,url:b,hex:b},string:{len:"${label} phải dài đúng ${len} ký tự",min:"Độ dài tối thiểu trường ${label} là ${min} ký tự",max:"Độ dài tối đa trường ${label} là ${max} ký tự",range:"Độ dài trường ${label} phải từ ${min} đến ${max} ký tự"},number:{len:"${label} phải bằng ${len}",min:"${label} phải lớn hơn hoặc bằng ${min}",max:"${label} phải nhỏ hơn hoặc bằng ${max}",range:"${label} phải nằm trong khoảng ${min}-${max}"},array:{len:"Mảng ${label} phải có ${len} phần tử ",min:"Mảng ${label} phải chứa tối thiểu ${min} phần tử ",max:"Mảng ${label} phải chứa tối đa ${max} phần tử ",range:"Mảng ${label} phải chứa từ ${min}-${max} phần tử"},pattern:{mismatch:"${label} không thỏa mãn mẫu kiểm tra ${pattern}"}}},Image:{preview:"Xem trước"},QRCode:{expired:"Mã QR hết hạn",refresh:"Làm mới"}};G.default=Vt;var Mt=G;const zt=de(Mt),te=[{id:1,email:"admin@pos.com",password:"admin123",name:"Admin User",role:"admin",avatar_url:null,permissions:["all"],total_points:1500,current_level:5,department:"Management"},{id:2,email:"cashier@pos.com",password:"cashier123",name:"Cashier User",role:"cashier",avatar_url:null,permissions:["pos","customers"],total_points:800,current_level:3,department:"Sales"},{id:3,email:"staff@pos.com",password:"staff123",name:"Staff User",role:"staff",avatar_url:null,permissions:["inventory","products"],total_points:600,current_level:2,department:"Warehouse"}],z=[{id:1,name:"iPhone 15 Pro",sku:"IP15P-128",barcode:"1234567890123",price:2999e4,cost_price:25e6,stock_quantity:15,category_id:1,category_name:"Điện thoại",description:"iPhone 15 Pro 128GB",image_url:null,is_active:!0},{id:2,name:"Samsung Galaxy S24",sku:"SGS24-256",barcode:"1234567890124",price:2299e4,cost_price:19e6,stock_quantity:8,category_id:1,category_name:"Điện thoại",description:"Samsung Galaxy S24 256GB",image_url:null,is_active:!0},{id:3,name:"MacBook Air M3",sku:"MBA-M3-512",barcode:"1234567890125",price:3499e4,cost_price:3e7,stock_quantity:5,category_id:2,category_name:"Laptop",description:"MacBook Air M3 512GB",image_url:null,is_active:!0}],w=[{id:1,order_number:"ORD-001",customer_id:1,customer_name:"Nguyễn Văn A",total_amount:2999e4,status:"completed",payment_method:"cash",created_at:new Date().toISOString(),items:[{id:1,product_id:1,product_name:"iPhone 15 Pro",quantity:1,unit_price:2999e4,total_price:2999e4}]}],A=(e=500)=>new Promise(t=>setTimeout(t,e)),re={async login(e,t){console.log("🎭 MockAPI: Login attempt",{email:e,password:t}),console.log("🎭 MockAPI: Available users",te.map(p=>({email:p.email,password:p.password}))),await A();const o=te.find(p=>p.email===e&&p.password===t);if(console.log("🎭 MockAPI: User found?",!!o),!o)throw console.error("🎭 MockAPI: Invalid credentials"),new Error("Invalid credentials");const n=`mock-jwt-token-${o.id}`,{password:s,...i}=o,u={success:!0,data:{user:i,token:n,refresh_token:`mock-refresh-token-${o.id}`}};return console.log("🎭 MockAPI: Login successful",u),u},async logout(){return await A(200),{success:!0}},async getProfile(){await A();const e=localStorage.getItem("access_token");if(!e||!e.startsWith("mock-jwt-token-"))throw new Error("Unauthorized");const t=parseInt(e.split("-").pop()),o=te.find(i=>i.id===t);if(!o)throw new Error("User not found");const{password:n,...s}=o;return{success:!0,data:{user:s}}},async getProducts(e={}){await A();let t=[...z];return e.search&&(t=t.filter(o=>o.name.toLowerCase().includes(e.search.toLowerCase())||o.sku.toLowerCase().includes(e.search.toLowerCase()))),e.category_id&&(t=t.filter(o=>o.category_id===parseInt(e.category_id))),{success:!0,data:t,pagination:{total:t.length,page:1,limit:20}}},async getProduct(e){await A();const t=z.find(o=>o.id===parseInt(e));if(!t)throw new Error("Product not found");return{success:!0,data:t}},async getOrders(e={}){return await A(),{success:!0,data:w,pagination:{total:w.length,page:1,limit:20}}},async createOrder(e){await A();const t={id:w.length+1,order_number:`ORD-${String(w.length+1).padStart(3,"0")}`,...e,status:"completed",created_at:new Date().toISOString()};return w.push(t),{success:!0,data:t}},async getDashboardStats(){return await A(),{success:!0,data:{today_sales:5299e4,today_orders:3,total_products:z.length,low_stock_products:2,monthly_revenue:125e7,monthly_growth:15.5,top_products:z.slice(0,3),recent_orders:w.slice(0,5)}}},async getCategories(){return await A(),{success:!0,data:[{id:1,name:"Điện thoại",description:"Smartphone và phụ kiện"},{id:2,name:"Laptop",description:"Máy tính xách tay"},{id:3,name:"Phụ kiện",description:"Phụ kiện điện tử"}]}}},oe=()=>{const t="http://127.0.0.1:8787/api".includes("localhost:8787"),o=!navigator.onLine,n=!0,s=!0;return console.log("🎭 MockAPI: shouldUseMockApi check",{VITE_USE_MOCK_API:"true",VITE_ENABLE_MOCK_DATA:"true",VITE_API_URL:"http://127.0.0.1:8787/api",useMock:!0,isLocalhost:t,isOffline:o,enableMockData:n,result:s}),s},Nt="http://127.0.0.1:8787/api",N=pt.create({baseURL:Nt,headers:{"Content-Type":"application/json"}}),Pe={LOGIN:"/auth/login",LOGOUT:"/auth/logout",VERIFY:"/auth/verify"},C={login:async e=>{if(console.log("🔑 AuthService: Login attempt",{email:e.email}),console.log("🔑 AuthService: Should use mock API?",oe()),oe()){console.log("🔑 AuthService: Using mock API");try{const t=await re.login(e.email,e.password);return console.log("🔑 AuthService: Mock API response",t),{success:!0,user:t.data.user,token:t.data.token}}catch(t){return console.error("🔑 AuthService: Mock API error",t),{success:!1,message:t.message||"Email hoặc mật khẩu không đúng!"}}}console.log("🔑 AuthService: Trying real API");try{const t=await N.post(Pe.LOGIN,e);return console.log("🔑 AuthService: Real API response",t.data),t.data}catch(t){console.error("🔑 AuthService: Real API error",t);try{console.log("🔑 AuthService: Falling back to mock API...");const o=await re.login(e.email,e.password);return console.log("🔑 AuthService: Mock API fallback response",o),{success:!0,user:o.data.user,token:o.data.token}}catch(o){return console.error("🔑 AuthService: Mock API fallback error",o),t.response?{success:!1,message:t.response.data.message||"Đăng nhập thất bại"}:{success:!1,message:"Email hoặc mật khẩu không đúng!"}}}},logout:async()=>{if(oe())return await re.logout()},verifyToken:async e=>{try{return(await N.post(Pe.VERIFY,{token:e})).data}catch(t){return console.error("Token verification error:",t),{success:!1,message:"Token không hợp lệ hoặc đã hết hạn"}}},setAuthToken:e=>{e?N.defaults.headers.common.Authorization=`Bearer ${e}`:delete N.defaults.headers.common.Authorization}},Ne={user:null,token:null,loading:!0,isAuthenticated:!1,permissions:[],role:null,lastActivity:null,expiresAt:null},x={LOGIN_START:"LOGIN_START",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",LOGOUT:"LOGOUT",SET_LOADING:"SET_LOADING",UPDATE_USER:"UPDATE_USER",SET_PERMISSIONS:"SET_PERMISSIONS",UPDATE_LAST_ACTIVITY:"UPDATE_LAST_ACTIVITY",SESSION_EXPIRED:"SESSION_EXPIRED"},j={TIMEOUT_DURATION:30*60*1e3,STORAGE_PREFIX:"khochuan_",TOKEN_KEY:"khochuan_token",USER_KEY:"khochuan_user",EXPIRES_KEY:"khochuan_expires",ACTIVITY_KEY:"khochuan_last_activity"},Ut=(e,t)=>{switch(t.type){case x.LOGIN_START:return{...e,loading:!0};case x.LOGIN_SUCCESS:return{...e,user:t.payload.user,token:t.payload.token,role:t.payload.user.role,permissions:t.payload.permissions||[],isAuthenticated:!0,loading:!1,lastActivity:t.payload.lastActivity||Date.now(),expiresAt:t.payload.expiresAt||null};case x.LOGIN_FAILURE:return{...e,user:null,token:null,role:null,permissions:[],isAuthenticated:!1,loading:!1,lastActivity:null,expiresAt:null};case x.LOGOUT:case x.SESSION_EXPIRED:return{...Ne,loading:!1};case x.SET_LOADING:return{...e,loading:t.payload};case x.UPDATE_USER:return{...e,user:{...e.user,...t.payload}};case x.SET_PERMISSIONS:return{...e,permissions:t.payload};case x.UPDATE_LAST_ACTIVITY:return{...e,lastActivity:t.payload};default:return e}},Ue=a.createContext(),Yt=({children:e})=>{const[t,o]=a.useReducer(Ut,Ne),n=a.useCallback(()=>t.expiresAt&&Date.now()>t.expiresAt?(k.warning("Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại."),p(!0),!0):!1,[t.expiresAt]),s=a.useCallback(()=>t.lastActivity&&Date.now()-t.lastActivity>j.TIMEOUT_DURATION?(k.warning("Phiên làm việc đã hết hạn do không hoạt động. Vui lòng đăng nhập lại."),p(!0),!0):!1,[t.lastActivity]),i=a.useCallback(()=>{if(t.isAuthenticated){const h=Date.now();o({type:x.UPDATE_LAST_ACTIVITY,payload:h}),localStorage.setItem(j.ACTIVITY_KEY,h.toString())}},[t.isAuthenticated]);a.useEffect(()=>{if(!t.isAuthenticated)return;const h=["mousedown","keydown","touchstart","scroll"],E=()=>i();h.forEach(y=>{window.addEventListener(y,E)});const _=setInterval(()=>{n()||s()},6e4);return()=>{h.forEach(y=>{window.removeEventListener(y,E)}),clearInterval(_)}},[t.isAuthenticated,i,n,s]),a.useEffect(()=>{const h=localStorage.getItem(j.TOKEN_KEY),E=localStorage.getItem(j.USER_KEY),_=localStorage.getItem(j.EXPIRES_KEY),y=localStorage.getItem(j.ACTIVITY_KEY);if(h&&E)try{const T=JSON.parse(E),P=_?parseInt(_,10):null,at=y?parseInt(y,10):Date.now();P&&Date.now()>P?p(!0):(C.setAuthToken(h),o({type:x.LOGIN_SUCCESS,payload:{user:T,token:h,permissions:T.permissions||[],expiresAt:P,lastActivity:at}}))}catch(T){console.error("Error parsing user data:",T),u()}o({type:x.SET_LOADING,payload:!1})},[]);const u=()=>{localStorage.removeItem(j.TOKEN_KEY),localStorage.removeItem(j.USER_KEY),localStorage.removeItem(j.EXPIRES_KEY),localStorage.removeItem(j.ACTIVITY_KEY),C.setAuthToken(null)},p=async(h=!1)=>{h||await C.logout(),u(),o({type:h?x.SESSION_EXPIRED:x.LOGOUT}),h||k.success("Đăng xuất thành công!")},R={...t,login:async h=>{console.log("🔐 AuthContext: Starting login process",{email:h.email}),o({type:x.LOGIN_START});try{console.log("🔐 AuthContext: Calling authService.login");const E=await C.login(h);if(console.log("🔐 AuthContext: Login response received",E),E.success){const{user:_,token:y}=E;console.log("🔐 AuthContext: Login successful",{user:_.email,role:_.role}),C.setAuthToken(y);const T=Date.now()+24*60*60*1e3,P=Date.now();return localStorage.setItem(j.TOKEN_KEY,y),localStorage.setItem(j.USER_KEY,JSON.stringify(_)),localStorage.setItem(j.EXPIRES_KEY,T.toString()),localStorage.setItem(j.ACTIVITY_KEY,P.toString()),o({type:x.LOGIN_SUCCESS,payload:{user:_,token:y,permissions:Bt(_.role),expiresAt:T,lastActivity:P}}),k.success("Đăng nhập thành công!"),console.log("🔐 AuthContext: Login process completed successfully"),{success:!0,user:_}}else return console.error("🔐 AuthContext: Login failed",E.message),o({type:x.LOGIN_FAILURE}),k.error(E.message||"Email hoặc mật khẩu không đúng!"),{success:!1,error:E.message}}catch(E){return console.error("🔐 AuthContext: Login error caught",E),o({type:x.LOGIN_FAILURE}),k.error("Đăng nhập thất bại!"),{success:!1,error:E.message}}},logout:()=>p(),updateUser:h=>{if(o({type:x.UPDATE_USER,payload:h}),t.user){const E={...t.user,...h};localStorage.setItem(j.USER_KEY,JSON.stringify(E))}},hasPermission:h=>t.permissions.includes(h),hasRole:h=>Array.isArray(h)?h.includes(t.role):t.role===h,updateLastActivity:i};return r.jsx(Ue.Provider,{value:R,children:e})},Ye=()=>{const e=a.useContext(Ue);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Bt=e=>({admin:["dashboard.view","products.view","products.create","products.update","products.delete","inventory.view","inventory.update","orders.view","orders.create","orders.update","orders.delete","customers.view","customers.create","customers.update","customers.delete","staff.view","staff.create","staff.update","staff.delete","reports.view","reports.create","settings.view","settings.update","pos.use"],cashier:["pos.use","orders.view","orders.create","customers.view","customers.create","customers.update","products.view","inventory.view"],staff:["dashboard.view","sales.view","gamification.view","training.view","profile.view","profile.update"]})[e]||[],Be=a.createContext(),Kt=({children:e})=>{const[t,o]=a.useState([]),[n,s]=a.useState({type:"percent",value:0}),i=t.reduce((_,y)=>_+y.quantity,0),u=t.reduce((_,y)=>_+y.price*y.quantity,0),p=n.type==="percent"?u*(n.value/100):n.value,d=Math.max(0,u-p);a.useEffect(()=>{try{const _=localStorage.getItem("cart"),y=localStorage.getItem("cartDiscount");_&&o(JSON.parse(_)),y&&s(JSON.parse(y))}catch(_){console.error("Failed to load cart from localStorage:",_)}},[]),a.useEffect(()=>{try{localStorage.setItem("cart",JSON.stringify(t)),localStorage.setItem("cartDiscount",JSON.stringify(n))}catch(_){console.error("Failed to save cart to localStorage:",_)}},[t,n]);const E={items:t,totalItems:i,totalAmount:u,totalDiscount:p,netAmount:d,discount:n,addItem:_=>{o(y=>y.find(P=>P.id===_.id)?y.map(P=>P.id===_.id?{...P,quantity:Math.min(P.quantity+_.quantity,P.maxQuantity||9999)}:P):[...y,{..._}])},removeItem:_=>{o(y=>y.filter(T=>T.id!==_))},updateQuantity:(_,y)=>{o(T=>T.map(P=>P.id===_?{...P,quantity:y}:P))},applyDiscount:_=>{s(_)},clearCart:()=>{o([]),s({type:"percent",value:0})}};return r.jsx(Be.Provider,{value:E,children:e})},Ln=()=>{const e=a.useContext(Be);if(e===void 0)throw new Error("useCartContext must be used within a CartProvider");return e},Ft="modulepreload",qt=function(e){return"/"+e},je={},c=function(t,o,n){let s=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),p=u?.nonce||u?.getAttribute("nonce");s=Promise.allSettled(o.map(d=>{if(d=qt(d),d in je)return;je[d]=!0;const f=d.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":Ft,f||(v.as="script"),v.crossOrigin="",v.href=d,p&&v.setAttribute("nonce",p),document.head.appendChild(v),f)return new Promise((R,h)=>{v.addEventListener("load",R),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return s.then(u=>{for(const p of u||[])p.status==="rejected"&&i(p.reason);return t().catch(i)})},ne=({children:e,requiredRoles:t=[],requiredPermissions:o=[],redirectTo:n="/login"})=>{const s=lt(),{isAuthenticated:i,user:u,loading:p,hasRole:d,hasPermission:f}=Ye();return p?r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:r.jsx(Ae,{size:"large",tip:"Đang xác thực..."})}):i?t.length>0&&!t.some(v=>d(v))?r.jsx(I,{to:"/403",replace:!0}):o.length>0&&!o.every(v=>f(v))?r.jsx(I,{to:"/403",replace:!0}):e:r.jsx(I,{to:n,state:{from:s.pathname},replace:!0})},se=({children:e,allowedRoles:t=[],requiredPermissions:o=[],redirectPath:n="/login"})=>{const{role:s,isAuthenticated:i,hasRole:u,hasPermission:p}=Ye();if(!i)return r.jsx(I,{to:n,replace:!0});const d=t.length===0||u(t),f=o.length===0||o.every(g=>p(g));if(!d||!f){let g="/";return s==="admin"?g="/admin/dashboard":s==="cashier"?g="/cashier/pos":s==="staff"&&(g="/staff/dashboard"),r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f0f2f5"},children:r.jsx(dt,{status:"403",title:"Không có quyền truy cập",subTitle:r.jsxs("div",{children:[r.jsx("p",{children:"Xin lỗi, bạn không có quyền truy cập trang này."}),r.jsx("p",{children:"Hãy liên hệ với quản trị viên nếu bạn cần quyền này."})]}),extra:[r.jsx(ve,{type:"primary",onClick:()=>window.location.href=g,children:"Về trang chính"},"home"),r.jsx(ve,{onClick:()=>window.history.back(),children:"Quay lại"},"back")]})})}return e},Gt=a.lazy(()=>c(()=>import("./AdminLayout-dSOdEPHm.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ht=a.lazy(()=>c(()=>import("./CashierLayout-ttSyu21G.js"),__vite__mapDeps([6,1,2,3,4,5]))),Wt=a.lazy(()=>c(()=>import("./StaffLayout-D6WH0eDZ.js"),__vite__mapDeps([7,1,2,3,4,5]))),Xt=a.lazy(()=>c(()=>import("./CustomerLayout-FkZF7nvt.js"),__vite__mapDeps([8,1,3,5]))),Qt=a.lazy(()=>c(()=>import("./Login-CaVgk8UC.js"),__vite__mapDeps([9,1,3,5]))),Jt=a.lazy(()=>c(()=>import("./Dashboard-CaBeUtjF.js"),__vite__mapDeps([10,1,3,5]))),Zt=a.lazy(()=>c(()=>import("./CustomerLookup-D2HBpOrq.js"),__vite__mapDeps([11,1,12,5,3]))),er=a.lazy(()=>c(()=>import("./Terms-C53pIepJ.js"),__vite__mapDeps([13,1,3,5]))),tr=a.lazy(()=>c(()=>import("./QrLookup-BjlFUeWj.js"),__vite__mapDeps([14,1,12,5,3]))),rr=a.lazy(()=>c(()=>import("./AnalyticsDashboard-GfsFAezO.js"),__vite__mapDeps([15,1,3,16,17,18,19,5]))),or=a.lazy(()=>c(()=>import("./RevenueOverview-aoZ7WZcc.js"),__vite__mapDeps([20,1,3,21,5,17]))),nr=a.lazy(()=>c(()=>import("./PerformanceMetrics-CddT4ozh.js"),__vite__mapDeps([22,1,3,16,17,23,5]))),sr=a.lazy(()=>c(()=>import("./ProductManagement-_r6S6n5g.js"),__vite__mapDeps([24,1,3,5]))),Se=a.lazy(()=>c(()=>import("./ProductForm-BwN_xdMr.js"),__vite__mapDeps([25,1,3,5]))),ar=a.lazy(()=>c(()=>import("./BulkOperations-CaF8CSZ4.js"),__vite__mapDeps([26,1,3,5]))),ir=a.lazy(()=>c(()=>import("./PriceOptimization-D-HklG5n.js"),__vite__mapDeps([27,1,3,5]))),lr=a.lazy(()=>c(()=>import("./InventoryDashboard-qfmc4SLP.js"),__vite__mapDeps([28,1,3,29,21,5,17]))),cr=a.lazy(()=>c(()=>Promise.resolve().then(()=>on),void 0)),ur=a.lazy(()=>c(()=>Promise.resolve().then(()=>nn),void 0)),pr=a.lazy(()=>c(()=>Promise.resolve().then(()=>sn),void 0)),dr=a.lazy(()=>c(()=>import("./OrderManagement-B1C9_E71.js"),__vite__mapDeps([30,1,3,5]))),mr=a.lazy(()=>c(()=>import("./OrderAnalytics-DBWleO6W.js"),__vite__mapDeps([31,1,3,21,5,17,29]))),_r=a.lazy(()=>c(()=>import("./ReturnProcessing-DG70G_-n.js"),__vite__mapDeps([32,1,3,5]))),hr=a.lazy(()=>c(()=>import("./ReportCenter-WCjkeOtJ.js"),__vite__mapDeps([33,1,3,5]))),fr=a.lazy(()=>c(()=>import("./CustomReports-DXTiaV8O.js"),__vite__mapDeps([34,1,3,5]))),yr=a.lazy(()=>c(()=>import("./OmnichannelAnalytics-CEwWnP4b.js"),__vite__mapDeps([35,1,3,16,17,18,23,19,5]))),gr=a.lazy(()=>c(()=>import("./BusinessIntelligence-DRylRsv1.js"),__vite__mapDeps([36,1,3,16,17,18,19,5]))),vr=a.lazy(()=>c(()=>import("./StaffManagement-9QoGZclY.js"),__vite__mapDeps([37,1,3,5]))),Er=a.lazy(()=>c(()=>import("./PerformanceTracking-MGh5DbyT.js"),__vite__mapDeps([38,1,3,5]))),xr=a.lazy(()=>c(()=>import("./GamificationConfig-Dlb4Q3ZY.js"),__vite__mapDeps([39,1,3,5]))),Pr=a.lazy(()=>c(()=>import("./CommissionSettings-BlLoO0Kg.js"),__vite__mapDeps([40,1,3,5]))),jr=a.lazy(()=>c(()=>import("./CustomerManagement-RIwd3efJ.js"),__vite__mapDeps([41,1,3,5]))),Sr=a.lazy(()=>c(()=>import("./LoyaltyPrograms-DJDsA8LO.js"),__vite__mapDeps([42,1,3,5]))),br=a.lazy(()=>c(()=>import("./CustomerSegmentation-CY9a8n9s.js"),__vite__mapDeps([43,1,3,21,5,17,29]))),Tr=a.lazy(()=>c(()=>import("./PersonalizationEngine-DJlvesir.js"),__vite__mapDeps([44,1,3,5]))),Or=a.lazy(()=>c(()=>import("./EcommerceChannels-Byb9n8jo.js"),__vite__mapDeps([45,1,3,5]))),Ar=a.lazy(()=>c(()=>import("./PaymentGateways-bNcfeBPA.js"),__vite__mapDeps([46,1,3,5]))),Ir=a.lazy(()=>c(()=>import("./ThirdPartyApps-D6gMFifY.js"),__vite__mapDeps([47,1,3,5]))),Rr=a.lazy(()=>c(()=>import("./APIManagement-CFCu9Xqb.js"),__vite__mapDeps([48,1,3,16,17,18,5]))),kr=a.lazy(()=>c(()=>import("./SystemSettings-B5y3KgPd.js"),__vite__mapDeps([49,1,3,5]))),wr=a.lazy(()=>c(()=>import("./UserRoles-z191OHZh.js"),__vite__mapDeps([50,1,3,5]))),Lr=a.lazy(()=>c(()=>import("./SecuritySettings-BoBCp8I-.js"),__vite__mapDeps([51,1,3,5]))),Cr=a.lazy(()=>c(()=>import("./CompanyProfile-lmcuuCIb.js"),__vite__mapDeps([52,1,3,5]))),Dr=a.lazy(()=>c(()=>import("./POSTerminal-DwFidwd7.js"),__vite__mapDeps([53,1,3,5,54]))),$r=a.lazy(()=>c(()=>import("./ProductSelector-NK-2MkFt.js"),__vite__mapDeps([55,1,3,5,56]))),Vr=a.lazy(()=>c(()=>import("./CartManager-9rh2BBiz.js"),__vite__mapDeps([57,1,58,3,5]))),Mr=a.lazy(()=>c(()=>import("./PaymentProcessor-D7eM_KpR.js"),__vite__mapDeps([59,1,58,3,5]))),zr=a.lazy(()=>c(()=>import("./ReceiptPrinter-D8IbvuQr.js"),__vite__mapDeps([60,1,3,5]))),Nr=a.lazy(()=>c(()=>import("./SmartSuggestions-Dss1TVe4.js"),__vite__mapDeps([61,1,3,5]))),Ur=a.lazy(()=>c(()=>Promise.resolve().then(()=>an),void 0)),Yr=a.lazy(()=>c(()=>Promise.resolve().then(()=>ln),void 0)),Br=a.lazy(()=>c(()=>Promise.resolve().then(()=>cn),void 0)),Kr=a.lazy(()=>c(()=>Promise.resolve().then(()=>un),void 0)),Fr=a.lazy(()=>c(()=>Promise.resolve().then(()=>pn),void 0)),qr=a.lazy(()=>c(()=>Promise.resolve().then(()=>dn),void 0)),Gr=a.lazy(()=>c(()=>import("./ShiftStart-mskEoJtl.js"),__vite__mapDeps([62,1,58,3,5]))),Hr=a.lazy(()=>c(()=>import("./ShiftEnd-dsUZPBdP.js"),__vite__mapDeps([63,1,58,3,5]))),Wr=a.lazy(()=>c(()=>import("./CashCount-zZsI_XLE.js"),__vite__mapDeps([64,1,3,5]))),Xr=a.lazy(()=>c(()=>import("./SessionReports-StqOtLVQ.js"),__vite__mapDeps([65,1,3,5]))),Qr=a.lazy(()=>c(()=>import("./PersonalDashboard-jVg1HRnb.js"),__vite__mapDeps([66,1,3,5]))),Jr=a.lazy(()=>c(()=>import("./PerformanceOverview-CHvZefiN.js"),__vite__mapDeps([67,1,3,5]))),Zr=a.lazy(()=>c(()=>Promise.resolve().then(()=>mn),void 0)),eo=a.lazy(()=>c(()=>Promise.resolve().then(()=>_n),void 0)),to=a.lazy(()=>c(()=>import("./Leaderboard-DL_48x-Z.js"),__vite__mapDeps([68,1,3,5]))),ro=a.lazy(()=>c(()=>import("./AchievementCenter-D9iYdYRY.js"),__vite__mapDeps([69,1,3,5]))),oo=a.lazy(()=>c(()=>import("./BadgeCollection-BHTqrJuR.js"),__vite__mapDeps([70,1,3,5]))),no=a.lazy(()=>c(()=>import("./ChallengeHub-CTHecFAQ.js"),__vite__mapDeps([71,1,3,5]))),so=a.lazy(()=>c(()=>Promise.resolve().then(()=>hn),void 0)),ao=a.lazy(()=>c(()=>Promise.resolve().then(()=>fn),void 0)),io=a.lazy(()=>c(()=>Promise.resolve().then(()=>yn),void 0)),lo=a.lazy(()=>c(()=>Promise.resolve().then(()=>gn),void 0)),co=a.lazy(()=>c(()=>Promise.resolve().then(()=>vn),void 0)),uo=a.lazy(()=>c(()=>Promise.resolve().then(()=>En),void 0)),po=a.lazy(()=>c(()=>Promise.resolve().then(()=>xn),void 0)),mo=a.lazy(()=>c(()=>Promise.resolve().then(()=>Pn),void 0)),_o=a.lazy(()=>c(()=>Promise.resolve().then(()=>jn),void 0)),ho=a.lazy(()=>c(()=>Promise.resolve().then(()=>Sn),void 0)),fo=a.lazy(()=>c(()=>Promise.resolve().then(()=>bn),void 0)),yo=a.lazy(()=>c(()=>Promise.resolve().then(()=>Tn),void 0)),go=a.lazy(()=>c(()=>Promise.resolve().then(()=>On),void 0)),vo=a.lazy(()=>c(()=>Promise.resolve().then(()=>An),void 0)),Eo=()=>r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:r.jsx(Ae,{size:"large"})}),xo=()=>r.jsx(a.Suspense,{fallback:r.jsx(Eo,{}),children:r.jsxs(ct,{children:[r.jsx(l,{path:"/login",element:r.jsx(Qt,{})}),r.jsx(l,{path:"/",element:r.jsx(Jt,{})}),r.jsxs(l,{path:"/",element:r.jsx(Xt,{}),children:[r.jsx(l,{path:"customer-lookup",element:r.jsx(Zt,{})}),r.jsx(l,{path:"terms",element:r.jsx(er,{})}),r.jsx(l,{path:"qr/:id",element:r.jsx(tr,{})})]}),r.jsxs(l,{path:"/admin",element:r.jsx(ne,{children:r.jsx(se,{allowedRoles:["admin"],children:r.jsx(Gt,{})})}),children:[r.jsx(l,{index:!0,element:r.jsx(I,{to:"/admin/dashboard",replace:!0})}),r.jsx(l,{path:"dashboard",element:r.jsx(rr,{})}),r.jsx(l,{path:"dashboard/revenue",element:r.jsx(or,{})}),r.jsx(l,{path:"dashboard/performance",element:r.jsx(nr,{})}),r.jsx(l,{path:"products",element:r.jsx(sr,{})}),r.jsx(l,{path:"products/new",element:r.jsx(Se,{})}),r.jsx(l,{path:"products/edit/:id",element:r.jsx(Se,{})}),r.jsx(l,{path:"products/bulk",element:r.jsx(ar,{})}),r.jsx(l,{path:"products/price-optimization",element:r.jsx(ir,{})}),r.jsx(l,{path:"inventory",element:r.jsx(lr,{})}),r.jsx(l,{path:"inventory/movements",element:r.jsx(cr,{})}),r.jsx(l,{path:"inventory/forecasting",element:r.jsx(ur,{})}),r.jsx(l,{path:"inventory/warehouse",element:r.jsx(pr,{})}),r.jsx(l,{path:"orders",element:r.jsx(dr,{})}),r.jsx(l,{path:"orders/analytics",element:r.jsx(mr,{})}),r.jsx(l,{path:"orders/returns",element:r.jsx(_r,{})}),r.jsx(l,{path:"reports",element:r.jsx(hr,{})}),r.jsx(l,{path:"reports/custom",element:r.jsx(fr,{})}),r.jsx(l,{path:"reports/omnichannel",element:r.jsx(yr,{})}),r.jsx(l,{path:"reports/business-intelligence",element:r.jsx(gr,{})}),r.jsx(l,{path:"staff",element:r.jsx(vr,{})}),r.jsx(l,{path:"staff/performance",element:r.jsx(Er,{})}),r.jsx(l,{path:"staff/gamification",element:r.jsx(xr,{})}),r.jsx(l,{path:"staff/commissions",element:r.jsx(Pr,{})}),r.jsx(l,{path:"customers",element:r.jsx(jr,{})}),r.jsx(l,{path:"customers/loyalty",element:r.jsx(Sr,{})}),r.jsx(l,{path:"customers/segmentation",element:r.jsx(br,{})}),r.jsx(l,{path:"customers/personalization",element:r.jsx(Tr,{})}),r.jsx(l,{path:"integrations",element:r.jsx(Or,{})}),r.jsx(l,{path:"integrations/payments",element:r.jsx(Ar,{})}),r.jsx(l,{path:"integrations/apps",element:r.jsx(Ir,{})}),r.jsx(l,{path:"integrations/api",element:r.jsx(Rr,{})}),r.jsx(l,{path:"settings",element:r.jsx(kr,{})}),r.jsx(l,{path:"settings/roles",element:r.jsx(wr,{})}),r.jsx(l,{path:"settings/security",element:r.jsx(Lr,{})}),r.jsx(l,{path:"settings/company",element:r.jsx(Cr,{})})]}),r.jsxs(l,{path:"/cashier",element:r.jsx(ne,{children:r.jsx(se,{allowedRoles:["admin","cashier"],children:r.jsx(Ht,{})})}),children:[r.jsx(l,{index:!0,element:r.jsx(I,{to:"/cashier/pos",replace:!0})}),r.jsx(l,{path:"pos",element:r.jsx(Dr,{})}),r.jsx(l,{path:"pos/products",element:r.jsx($r,{})}),r.jsx(l,{path:"pos/cart",element:r.jsx(Vr,{})}),r.jsx(l,{path:"pos/payment",element:r.jsx(Mr,{})}),r.jsx(l,{path:"pos/receipt",element:r.jsx(zr,{})}),r.jsx(l,{path:"pos/suggestions",element:r.jsx(Nr,{})}),r.jsx(l,{path:"orders",element:r.jsx(Ur,{})}),r.jsx(l,{path:"orders/returns",element:r.jsx(Yr,{})}),r.jsx(l,{path:"orders/tracking",element:r.jsx(Br,{})}),r.jsx(l,{path:"customers",element:r.jsx(Kr,{})}),r.jsx(l,{path:"customers/loyalty",element:r.jsx(Fr,{})}),r.jsx(l,{path:"customers/membership",element:r.jsx(qr,{})}),r.jsx(l,{path:"session/start",element:r.jsx(Gr,{})}),r.jsx(l,{path:"session/end",element:r.jsx(Hr,{})}),r.jsx(l,{path:"session/cash",element:r.jsx(Wr,{})}),r.jsx(l,{path:"session/reports",element:r.jsx(Xr,{})})]}),r.jsxs(l,{path:"/staff",element:r.jsx(ne,{children:r.jsx(se,{allowedRoles:["admin","staff"],children:r.jsx(Wt,{})})}),children:[r.jsx(l,{index:!0,element:r.jsx(I,{to:"/staff/dashboard",replace:!0})}),r.jsx(l,{path:"dashboard",element:r.jsx(Qr,{})}),r.jsx(l,{path:"dashboard/performance",element:r.jsx(Jr,{})}),r.jsx(l,{path:"dashboard/commission",element:r.jsx(Zr,{})}),r.jsx(l,{path:"dashboard/goals",element:r.jsx(eo,{})}),r.jsx(l,{path:"leaderboard",element:r.jsx(to,{})}),r.jsx(l,{path:"achievements",element:r.jsx(ro,{})}),r.jsx(l,{path:"badges",element:r.jsx(oo,{})}),r.jsx(l,{path:"challenges",element:r.jsx(no,{})}),r.jsx(l,{path:"rewards",element:r.jsx(so,{})}),r.jsx(l,{path:"competitions",element:r.jsx(ao,{})}),r.jsx(l,{path:"sales",element:r.jsx(io,{})}),r.jsx(l,{path:"sales/targets",element:r.jsx(lo,{})}),r.jsx(l,{path:"sales/recommendations",element:r.jsx(co,{})}),r.jsx(l,{path:"sales/customers",element:r.jsx(uo,{})}),r.jsx(l,{path:"training",element:r.jsx(po,{})}),r.jsx(l,{path:"training/products",element:r.jsx(mo,{})}),r.jsx(l,{path:"training/skills",element:r.jsx(_o,{})}),r.jsx(l,{path:"training/certifications",element:r.jsx(ho,{})}),r.jsx(l,{path:"profile",element:r.jsx(fo,{})}),r.jsx(l,{path:"profile/performance",element:r.jsx(yo,{})}),r.jsx(l,{path:"profile/commission",element:r.jsx(go,{})}),r.jsx(l,{path:"profile/preferences",element:r.jsx(vo,{})})]}),r.jsx(l,{path:"*",element:r.jsx(I,{to:"/",replace:!0})})]})}),Po=()=>r.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"16px",flexDirection:"column"},children:[r.jsx("div",{style:{marginBottom:"20px",fontSize:"24px"},children:"🚀"}),r.jsx("div",{children:"Đang tải Smart POS..."})]}),jo={token:{colorPrimary:"#1890ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#f5222d",fontSize:14,borderRadius:8,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},components:{Layout:{bodyBg:"#f0f2f5",headerBg:"#001529",siderBg:"#001529"},Menu:{darkItemBg:"#001529",darkItemSelectedBg:"#1890ff"},Button:{fontWeight:500},Table:{headerBg:"#fafafa"},Card:{borderRadius:12}}};function So(){return r.jsx(mt,{locale:zt,theme:jo,children:r.jsx(Yt,{children:r.jsx(Kt,{children:r.jsx(ut,{children:r.jsx("div",{className:"app",children:r.jsx(a.Suspense,{fallback:r.jsx(Po,{}),children:r.jsx(xo,{})})})})})})})}var Ke={exports:{}},m={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M=Symbol.for("react.element"),bo=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),Oo=Symbol.for("react.strict_mode"),Ao=Symbol.for("react.profiler"),Io=Symbol.for("react.provider"),Ro=Symbol.for("react.context"),ko=Symbol.for("react.forward_ref"),wo=Symbol.for("react.suspense"),Lo=Symbol.for("react.memo"),Co=Symbol.for("react.lazy"),be=Symbol.iterator;function Do(e){return e===null||typeof e!="object"?null:(e=be&&e[be]||e["@@iterator"],typeof e=="function"?e:null)}var Fe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qe=Object.assign,Ge={};function L(e,t,o){this.props=e,this.context=t,this.refs=Ge,this.updater=o||Fe}L.prototype.isReactComponent={};L.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};L.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function He(){}He.prototype=L.prototype;function me(e,t,o){this.props=e,this.context=t,this.refs=Ge,this.updater=o||Fe}var _e=me.prototype=new He;_e.constructor=me;qe(_e,L.prototype);_e.isPureReactComponent=!0;var Te=Array.isArray,We=Object.prototype.hasOwnProperty,he={current:null},Xe={key:!0,ref:!0,__self:!0,__source:!0};function Qe(e,t,o){var n,s={},i=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(i=""+t.key),t)We.call(t,n)&&!Xe.hasOwnProperty(n)&&(s[n]=t[n]);var p=arguments.length-2;if(p===1)s.children=o;else if(1<p){for(var d=Array(p),f=0;f<p;f++)d[f]=arguments[f+2];s.children=d}if(e&&e.defaultProps)for(n in p=e.defaultProps,p)s[n]===void 0&&(s[n]=p[n]);return{$$typeof:M,type:e,key:i,ref:u,props:s,_owner:he.current}}function $o(e,t){return{$$typeof:M,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fe(e){return typeof e=="object"&&e!==null&&e.$$typeof===M}function Vo(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var Oe=/\/+/g;function ae(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Vo(""+e.key):t.toString(36)}function B(e,t,o,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case M:case bo:u=!0}}if(u)return u=e,s=s(u),e=n===""?"."+ae(u,0):n,Te(s)?(o="",e!=null&&(o=e.replace(Oe,"$&/")+"/"),B(s,t,o,"",function(f){return f})):s!=null&&(fe(s)&&(s=$o(s,o+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(Oe,"$&/")+"/")+e)),t.push(s)),1;if(u=0,n=n===""?".":n+":",Te(e))for(var p=0;p<e.length;p++){i=e[p];var d=n+ae(i,p);u+=B(i,t,o,d,s)}else if(d=Do(e),typeof d=="function")for(e=d.call(e),p=0;!(i=e.next()).done;)i=i.value,d=n+ae(i,p++),u+=B(i,t,o,d,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function U(e,t,o){if(e==null)return e;var n=[],s=0;return B(e,n,"","",function(i){return t.call(o,i,s++)}),n}function Mo(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var S={current:null},K={transition:null},zo={ReactCurrentDispatcher:S,ReactCurrentBatchConfig:K,ReactCurrentOwner:he};function Je(){throw Error("act(...) is not supported in production builds of React.")}m.Children={map:U,forEach:function(e,t,o){U(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return U(e,function(){t++}),t},toArray:function(e){return U(e,function(t){return t})||[]},only:function(e){if(!fe(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};m.Component=L;m.Fragment=To;m.Profiler=Ao;m.PureComponent=me;m.StrictMode=Oo;m.Suspense=wo;m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zo;m.act=Je;m.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=qe({},e.props),s=e.key,i=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,u=he.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(d in t)We.call(t,d)&&!Xe.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&p!==void 0?p[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=o;else if(1<d){p=Array(d);for(var f=0;f<d;f++)p[f]=arguments[f+2];n.children=p}return{$$typeof:M,type:e.type,key:s,ref:i,props:n,_owner:u}};m.createContext=function(e){return e={$$typeof:Ro,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Io,_context:e},e.Consumer=e};m.createElement=Qe;m.createFactory=function(e){var t=Qe.bind(null,e);return t.type=e,t};m.createRef=function(){return{current:null}};m.forwardRef=function(e){return{$$typeof:ko,render:e}};m.isValidElement=fe;m.lazy=function(e){return{$$typeof:Co,_payload:{_status:-1,_result:e},_init:Mo}};m.memo=function(e,t){return{$$typeof:Lo,type:e,compare:t===void 0?null:t}};m.startTransition=function(e){var t=K.transition;K.transition={};try{e()}finally{K.transition=t}};m.unstable_act=Je;m.useCallback=function(e,t){return S.current.useCallback(e,t)};m.useContext=function(e){return S.current.useContext(e)};m.useDebugValue=function(){};m.useDeferredValue=function(e){return S.current.useDeferredValue(e)};m.useEffect=function(e,t){return S.current.useEffect(e,t)};m.useId=function(){return S.current.useId()};m.useImperativeHandle=function(e,t,o){return S.current.useImperativeHandle(e,t,o)};m.useInsertionEffect=function(e,t){return S.current.useInsertionEffect(e,t)};m.useLayoutEffect=function(e,t){return S.current.useLayoutEffect(e,t)};m.useMemo=function(e,t){return S.current.useMemo(e,t)};m.useReducer=function(e,t,o){return S.current.useReducer(e,t,o)};m.useRef=function(e){return S.current.useRef(e)};m.useState=function(e){return S.current.useState(e)};m.useSyncExternalStore=function(e,t,o){return S.current.useSyncExternalStore(e,t,o)};m.useTransition=function(){return S.current.useTransition()};m.version="18.3.1";Ke.exports=m;var Ze=Ke.exports;const ee=de(Ze);var et=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(et||{}),ie={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}};Object.values(et);var ye={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"};Object.entries(ye).reduce((e,[t,o])=>(e[o]=t,e),{});var D="data-rh",No=e=>Array.isArray(e)?e.join(""):e,Uo=(e,t)=>{const o=Object.keys(e);for(let n=0;n<o.length;n+=1)if(t[o[n]]&&t[o[n]].includes(e[o[n]]))return!0;return!1},le=(e,t)=>Array.isArray(e)?e.reduce((o,n)=>(Uo(n,t)?o.priority.push(n):o.default.push(n),o),{priority:[],default:[]}):{default:e,priority:[]},Yo=["noscript","script","style"],ue=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),tt=e=>Object.keys(e).reduce((t,o)=>{const n=typeof e[o]<"u"?`${o}="${e[o]}"`:`${o}`;return t?`${t} ${n}`:n},""),Bo=(e,t,o,n)=>{const s=tt(o),i=No(t);return s?`<${e} ${D}="true" ${s}>${ue(i,n)}</${e}>`:`<${e} ${D}="true">${ue(i,n)}</${e}>`},Ko=(e,t,o=!0)=>t.reduce((n,s)=>{const i=s,u=Object.keys(i).filter(f=>!(f==="innerHTML"||f==="cssText")).reduce((f,g)=>{const v=typeof i[g]>"u"?g:`${g}="${ue(i[g],o)}"`;return f?`${f} ${v}`:v},""),p=i.innerHTML||i.cssText||"",d=Yo.indexOf(e)===-1;return`${n}<${e} ${D}="true" ${u}${d?"/>":`>${p}</${e}>`}`},""),rt=(e,t={})=>Object.keys(e).reduce((o,n)=>{const s=ye[n];return o[s||n]=e[n],o},t),Fo=(e,t,o)=>{const n={key:t,[D]:!0},s=rt(o,n);return[ee.createElement("title",s,t)]},F=(e,t)=>t.map((o,n)=>{const s={key:n,[D]:!0};return Object.keys(o).forEach(i=>{const p=ye[i]||i;if(p==="innerHTML"||p==="cssText"){const d=o.innerHTML||o.cssText;s.dangerouslySetInnerHTML={__html:d}}else s[p]=o[i]}),ee.createElement(e,s)}),O=(e,t,o=!0)=>{switch(e){case"title":return{toComponent:()=>Fo(e,t.title,t.titleAttributes),toString:()=>Bo(e,t.title,t.titleAttributes,o)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>rt(t),toString:()=>tt(t)};default:return{toComponent:()=>F(e,t),toString:()=>Ko(e,t,o)}}},qo=({metaTags:e,linkTags:t,scriptTags:o,encode:n})=>{const s=le(e,ie.meta),i=le(t,ie.link),u=le(o,ie.script);return{priorityMethods:{toComponent:()=>[...F("meta",s.priority),...F("link",i.priority),...F("script",u.priority)],toString:()=>`${O("meta",s.priority,n)} ${O("link",i.priority,n)} ${O("script",u.priority,n)}`},metaTags:s.default,linkTags:i.default,scriptTags:u.default}},Go=e=>{const{baseTag:t,bodyAttributes:o,encode:n=!0,htmlAttributes:s,noscriptTags:i,styleTags:u,title:p="",titleAttributes:d,prioritizeSeoTags:f}=e;let{linkTags:g,metaTags:v,scriptTags:R}=e,h={toComponent:()=>{},toString:()=>""};return f&&({priorityMethods:h,linkTags:g,metaTags:v,scriptTags:R}=qo(e)),{priority:h,base:O("base",t,n),bodyAttributes:O("bodyAttributes",o,n),htmlAttributes:O("htmlAttributes",s,n),link:O("link",g,n),meta:O("meta",v,n),noscript:O("noscript",i,n),script:O("script",R,n),style:O("style",u,n),title:O("title",{title:p,titleAttributes:d},n)}},Ho=Go,Y=[],ot=!!(typeof window<"u"&&window.document&&window.document.createElement),Wo=class{instances=[];canUseDOM=ot;context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Y:this.instances,add:e=>{(this.canUseDOM?Y:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Y:this.instances).indexOf(e);(this.canUseDOM?Y:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Ho({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Xo={},Qo=ee.createContext(Xo),Jo=class nt extends Ze.Component{static canUseDOM=ot;helmetData;constructor(t){super(t),this.helmetData=new Wo(this.props.context||{},nt.canUseDOM)}render(){return ee.createElement(Qo.Provider,{value:this.helmetData.value},this.props.children)}};window.addEventListener("error",e=>{console.error("Global error:",e.error)});window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason)});function Zo(){const e=localStorage.getItem("pos-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=e||t;return document.documentElement.setAttribute("data-theme",o),document.documentElement.className=o,o}Zo();window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("pos-theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),document.documentElement.className=t}});function ge(){const e=navigator.onLine;document.documentElement.setAttribute("data-online",e.toString()),console.log(e?"App is back online":"App is now offline")}window.addEventListener("online",ge);window.addEventListener("offline",ge);ge();function st(){const e=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${e}px`)}window.addEventListener("resize",st);st();document.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=new CustomEvent("global-escape",{bubbles:!0});e.target.dispatchEvent(t)}if((e.ctrlKey||e.metaKey)&&e.key==="k"){e.preventDefault();const t=new CustomEvent("global-search",{bubbles:!0});document.dispatchEvent(t)}if(e.key==="F1"){e.preventDefault();const t=new CustomEvent("global-help",{bubbles:!0});document.dispatchEvent(t)}});window.addEventListener("beforeprint",()=>{document.documentElement.setAttribute("data-print","true")});window.addEventListener("afterprint",()=>{document.documentElement.removeAttribute("data-print")});"BarcodeDetector"in window?console.log("Barcode detection supported"):console.log("Barcode detection not supported, will use camera fallback");navigator.mediaDevices?.getUserMedia({video:!0}).then(e=>{e.getTracks().forEach(t=>t.stop()),console.log("Camera access available")}).catch(()=>{console.log("Camera access not available")});async function en(){if("Notification"in window){const e=await Notification.requestPermission();return console.log("Notification permission:",e),e==="granted"}return!1}document.addEventListener("click",()=>{en()},{once:!0});let pe;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),pe=e;const t=new CustomEvent("app-install-available",{detail:{prompt:pe}});window.dispatchEvent(t)});window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),pe=null});console.log("🖥️ Trường Phát Computer - Production Mode");console.log(`
🖥️ Trường Phát Computer
Version: 1.0.0
Environment: production
Build: production

🚀 Powered by Cloudflare Edge
⚡ React 18 + Vite + Ant Design
📱 PWA Ready + Offline Support
🎮 Staff Gamification + AI Features
`);const tn=document.getElementById("root"),rn=ce.createRoot(tn);rn.render(r.jsx(Jo,{children:r.jsx(So,{})}));document.documentElement.style.setProperty("--app-version",'"1.0.0"');console.log(`
🏪 Enterprise POS System
Version: 1.0.0
Environment: production
Build: development

🚀 Powered by Cloudflare Edge
⚡ React 18 + Vite + Ant Design
📱 PWA Ready + Offline Support
🎮 Staff Gamification + AI Features
`);if("PerformanceObserver"in window)try{new PerformanceObserver(t=>{for(const o of t.getEntries());}).observe({entryTypes:["measure","navigation"]})}catch(e){console.warn("Performance Observer not fully supported:",e)}const on=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),nn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),sn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),an=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ln=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),cn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),un=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),pn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),dn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),mn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),_n=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),hn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),fn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),yn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),gn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),vn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),En=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),xn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Pn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),jn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Sn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),bn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Tn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),On=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),An=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{c as _,Ln as a,wn as b,r as j,re as m,oe as s,Ye as u};
