import{g as e,h as o,k as t,j as n}from"./polyfills-B4r5O4me.js";import{T as r}from"./vendor-rc-component-trigger-B5dN-W7a.js";import{c as i}from"./vendor-classnames-Bjqz8XQ3.js";import{w as a,K as s,b as l,g as c,s as f}from"./vendor-rc-util-Cfhh6bGy.js";import{r as u,R as p}from"./react-vendor-D_ybsntB.js";var v=s.ESC,m=s.TAB;var d=u.forwardRef(function(e,o){var t=e.overlay,n=e.arrow,r=e.prefixCls,i=u.useMemo(function(){return"function"==typeof t?t():t},[t]),a=l(o,c(i));return p.createElement(p.Fragment,null,n&&p.createElement("div",{className:"".concat(r,"-arrow")}),p.cloneElement(i,{ref:f(i)?a:void 0}))}),g={adjustX:1,adjustY:1},w=[0,0],h={topLeft:{points:["bl","tl"],overflow:g,offset:[0,-4],targetOffset:w},top:{points:["bc","tc"],overflow:g,offset:[0,-4],targetOffset:w},topRight:{points:["br","tr"],overflow:g,offset:[0,-4],targetOffset:w},bottomLeft:{points:["tl","bl"],overflow:g,offset:[0,4],targetOffset:w},bottom:{points:["tc","bc"],overflow:g,offset:[0,4],targetOffset:w},bottomRight:{points:["tr","br"],overflow:g,offset:[0,4],targetOffset:w}},b=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function y(s,g){var w,y=s.arrow,C=void 0!==y&&y,R=s.prefixCls,E=void 0===R?"rc-dropdown":R,N=s.transitionName,O=s.animation,x=s.align,A=s.placement,j=void 0===A?"bottomLeft":A,k=s.placements,P=void 0===k?h:k,V=s.getPopupContainer,F=s.showAction,L=s.hideAction,M=s.overlayClassName,S=s.overlayStyle,T=s.visible,D=s.trigger,W=void 0===D?["hover"]:D,B=s.autoFocus,H=s.overlay,I=s.children,K=s.onVisibleChange,X=e(s,b),Y=p.useState(),q=o(Y,2),z=q[0],G=q[1],J="visible"in s?T:z,Q=p.useRef(null),U=p.useRef(null),Z=p.useRef(null);p.useImperativeHandle(g,function(){return Q.current});var $=function(e){G(e),null==K||K(e)};!function(e){var o=e.visible,t=e.triggerRef,n=e.onVisibleChange,r=e.autoFocus,i=e.overlayRef,s=u.useRef(!1),l=function(){var e,r;o&&(null===(e=t.current)||void 0===e||null===(r=e.focus)||void 0===r||r.call(e),null==n||n(!1))},c=function(){var e;return!(null===(e=i.current)||void 0===e||!e.focus||(i.current.focus(),s.current=!0,0))},f=function(e){switch(e.keyCode){case v:l();break;case m:var o=!1;s.current||(o=c()),o?e.preventDefault():l()}};u.useEffect(function(){return o?(window.addEventListener("keydown",f),r&&a(c,3),function(){window.removeEventListener("keydown",f),s.current=!1}):function(){s.current=!1}},[o])}({visible:J,triggerRef:Z,onVisibleChange:$,autoFocus:B,overlayRef:U});var _,ee,oe,te=function(){return p.createElement(d,{ref:U,overlay:H,prefixCls:E,arrow:C})},ne=p.cloneElement(I,{className:i(null===(w=I.props)||void 0===w?void 0:w.className,J&&(_=s.openClassName,void 0!==_?_:"".concat(E,"-open"))),ref:f(I)?l(Z,c(I)):void 0}),re=L;return re||-1===W.indexOf("contextMenu")||(re=["click"]),p.createElement(r,t({builtinPlacements:P},X,{prefixCls:E,ref:Q,popupClassName:i(M,n({},"".concat(E,"-show-arrow"),C)),popupStyle:S,action:W,showAction:F,hideAction:re,popupPlacement:j,popupAlign:x,popupTransitionName:N,popupAnimation:O,popupVisible:J,stretch:(ee=s.minOverlayWidthMatchTrigger,oe=s.alignPoint,("minOverlayWidthMatchTrigger"in s?ee:!oe)?"minWidth":""),popup:"function"==typeof H?te:te(),onPopupVisibleChange:$,onPopupClick:function(e){var o=s.onOverlayClick;G(!1),o&&o(e)},getPopupContainer:V}),ne)}const C=p.forwardRef(y);export{C as D};
