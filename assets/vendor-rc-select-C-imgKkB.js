import{r as e,R as n}from"./react-vendor-D_ybsntB.js";import{K as t,C as o,T as r,b as a,p as u,B as l,H as i,h as c,l as s,k as d,a as p,o as f,c as v,t as m}from"./vendor-rc-util-Cfhh6bGy.js";import{c as h}from"./vendor-classnames-Bjqz8XQ3.js";import{F as g}from"./vendor-rc-overflow-Dz8RHsDo.js";import"./vendor-rc-resize-observer-DnkXipSO.js";import"./vendor-rc-motion-CgrNkiVN.js";import{e as b,h as w,g as y,f as C,j as E,k as S,w as x,d as I}from"./polyfills-B4r5O4me.js";import{T as N}from"./vendor-rc-component-trigger-B5dN-W7a.js";import{L as R}from"./vendor-rc-virtual-list-1kJCu580.js";var D=function(n){var t=n.className,o=n.customizeIcon,r=n.customizeIconProps,a=n.children,u=n.onMouseDown,l=n.onClick,i="function"==typeof o?o(r):o;return e.createElement("span",{className:t,onMouseDown:function(e){e.preventDefault(),null==u||u(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},void 0!==i?i:e.createElement("span",{className:h(t.split(/\s+/).map(function(e){return"".concat(e,"-icon")}))},a))},M=e.createContext(null);function P(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=e.useRef(null),o=e.useRef(null);return e.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]),[function(){return t.current},function(e){(e||null===t.current)&&(t.current=e),window.clearTimeout(o.current),o.current=window.setTimeout(function(){t.current=null},n)}]}var T=["prefixCls","id","inputElement","autoFocus","autoComplete","editable","activeDescendantId","value","open","attrs"],O=function(n,t){var u=n.prefixCls,l=n.id,i=n.inputElement,c=n.autoFocus,s=n.autoComplete,d=n.editable,p=n.activeDescendantId,f=n.value,v=n.open,m=n.attrs,g=y(n,T),b=i||e.createElement("input",null),w=b,E=w.ref,S=w.props;return o(!("maxLength"in b.props)),b=e.cloneElement(b,C(C(C({type:"search"},r(g,S)),{},{id:l,ref:a(t,E),autoComplete:s||"off",autoFocus:c,className:h("".concat(u,"-selection-search-input"),null==S?void 0:S.className),role:"combobox","aria-expanded":v||!1,"aria-haspopup":"listbox","aria-owns":"".concat(l,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(l,"_list"),"aria-activedescendant":v?p:void 0},m),{},{value:d?f:"",readOnly:!d,unselectable:d?null:"on",style:C(C({},S.style),{},{opacity:d?null:0})}))},V=e.forwardRef(O);function k(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}var A="undefined"!=typeof window&&window.document&&window.document.documentElement;function F(e){return["string","number"].includes(b(e))}function L(e){var n=void 0;return e&&(F(e.title)?n=e.title.toString():F(e.label)&&(n=e.label.toString())),n}function K(e){var n;return null!==(n=e.key)&&void 0!==n?n:e.value}var _=function(e){e.preventDefault(),e.stopPropagation()},j=function(n){var t,o,r=n.id,a=n.prefixCls,l=n.values,i=n.open,c=n.searchValue,s=n.autoClearSearchValue,d=n.inputRef,p=n.placeholder,f=n.disabled,v=n.mode,m=n.showSearch,b=n.autoFocus,y=n.autoComplete,C=n.activeDescendantId,S=n.tabIndex,x=n.removeIcon,I=n.maxTagCount,N=n.maxTagTextLength,R=n.maxTagPlaceholder,M=void 0===R?function(e){return"+ ".concat(e.length," ...")}:R,P=n.tagRender,T=n.onToggleOpen,O=n.onRemove,k=n.onInputChange,F=n.onInputPaste,j=n.onInputKeyDown,W=n.onInputMouseDown,z=n.onInputCompositionStart,H=n.onInputCompositionEnd,B=n.onInputBlur,U=e.useRef(null),G=e.useState(0),Y=w(G,2),X=Y[0],J=Y[1],Q=e.useState(!1),$=w(Q,2),q=$[0],Z=$[1],ee="".concat(a,"-selection"),ne=i||"multiple"===v&&!1===s||"tags"===v?c:"",te="tags"===v||"multiple"===v&&!1===s||m&&(i||q);t=function(){J(U.current.scrollWidth)},o=[ne],A?e.useLayoutEffect(t,o):e.useEffect(t,o);var oe=function(n,t,o,r,a){return e.createElement("span",{title:L(n),className:h("".concat(ee,"-item"),E({},"".concat(ee,"-item-disabled"),o))},e.createElement("span",{className:"".concat(ee,"-item-content")},t),r&&e.createElement(D,{className:"".concat(ee,"-item-remove"),onMouseDown:_,onClick:a,customizeIcon:x},"×"))},re=function(n,t,o,r,a,u){return e.createElement("span",{onMouseDown:function(e){_(e),T(!i)}},P({label:t,value:n,disabled:o,closable:r,onClose:a,isMaxTag:!!u}))},ae=e.createElement("div",{className:"".concat(ee,"-search"),style:{width:X},onFocus:function(){Z(!0)},onBlur:function(){Z(!1)}},e.createElement(V,{ref:d,open:i,prefixCls:a,id:r,inputElement:null,disabled:f,autoFocus:b,autoComplete:y,editable:te,activeDescendantId:C,value:ne,onKeyDown:j,onMouseDown:W,onChange:k,onPaste:F,onCompositionStart:z,onCompositionEnd:H,onBlur:B,tabIndex:S,attrs:u(n,!0)}),e.createElement("span",{ref:U,className:"".concat(ee,"-search-mirror"),"aria-hidden":!0},ne," ")),ue=e.createElement(g,{prefixCls:"".concat(ee,"-overflow"),data:l,renderItem:function(e){var n=e.disabled,t=e.label,o=e.value,r=!f&&!n,a=t;if("number"==typeof N&&("string"==typeof t||"number"==typeof t)){var u=String(a);u.length>N&&(a="".concat(u.slice(0,N),"..."))}var l=function(n){n&&n.stopPropagation(),O(e)};return"function"==typeof P?re(o,a,n,r,l):oe(e,a,n,r,l)},renderRest:function(e){if(!l.length)return null;var n="function"==typeof M?M(e):M;return"function"==typeof P?re(void 0,n,!1,!1,void 0,!0):oe({title:n},n,!1)},suffix:ae,itemKey:K,maxCount:I});return e.createElement("span",{className:"".concat(ee,"-wrap")},ue,!l.length&&!ne&&e.createElement("span",{className:"".concat(ee,"-placeholder")},p))},W=function(n){var t=n.inputElement,o=n.prefixCls,r=n.id,a=n.inputRef,l=n.disabled,i=n.autoFocus,c=n.autoComplete,s=n.activeDescendantId,d=n.mode,p=n.open,f=n.values,v=n.placeholder,m=n.tabIndex,h=n.showSearch,g=n.searchValue,b=n.activeValue,y=n.maxLength,C=n.onInputKeyDown,E=n.onInputMouseDown,S=n.onInputChange,x=n.onInputPaste,I=n.onInputCompositionStart,N=n.onInputCompositionEnd,R=n.onInputBlur,D=n.title,M=e.useState(!1),P=w(M,2),T=P[0],O=P[1],k="combobox"===d,A=k||h,F=f[0],K=g||"";k&&b&&!T&&(K=b),e.useEffect(function(){k&&O(!1)},[k,b]);var _=!("combobox"!==d&&!p&&!h)&&!!K,j=void 0===D?L(F):D,W=e.useMemo(function(){return F?null:e.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:_?{visibility:"hidden"}:void 0},v)},[F,_,v,o]);return e.createElement("span",{className:"".concat(o,"-selection-wrap")},e.createElement("span",{className:"".concat(o,"-selection-search")},e.createElement(V,{ref:a,prefixCls:o,id:r,open:p,inputElement:t,disabled:l,autoFocus:i,autoComplete:c,editable:A,activeDescendantId:s,value:K,onKeyDown:C,onMouseDown:E,onChange:function(e){O(!0),S(e)},onPaste:x,onCompositionStart:I,onCompositionEnd:N,onBlur:R,tabIndex:m,attrs:u(n,!0),maxLength:k?y:void 0})),!k&&F?e.createElement("span",{className:"".concat(o,"-selection-item"),title:j,style:_?{visibility:"hidden"}:void 0},F.label):null,W)},z=function(n,o){var r=e.useRef(null),a=e.useRef(!1),u=n.prefixCls,l=n.open,i=n.mode,c=n.showSearch,s=n.tokenWithEnter,d=n.disabled,p=n.prefix,f=n.autoClearSearchValue,v=n.onSearch,m=n.onSearchSubmit,h=n.onToggleOpen,g=n.onInputKeyDown,b=n.onInputBlur,y=n.domRef;e.useImperativeHandle(o,function(){return{focus:function(e){r.current.focus(e)},blur:function(){r.current.blur()}}});var C=P(0),E=w(C,2),x=E[0],I=E[1],N=e.useRef(null),R=function(e){!1!==v(e,!0,a.current)&&h(!0)},D={inputRef:r,onInputKeyDown:function(e){var n,o=e.which,u=r.current instanceof HTMLTextAreaElement;(u||!l||o!==t.UP&&o!==t.DOWN||e.preventDefault(),g&&g(e),o!==t.ENTER||"tags"!==i||a.current||l||null==m||m(e.target.value),u&&!l&&~[t.UP,t.DOWN,t.LEFT,t.RIGHT].indexOf(o))||(n=o)&&![t.ESC,t.SHIFT,t.BACKSPACE,t.TAB,t.WIN_KEY,t.ALT,t.META,t.WIN_KEY_RIGHT,t.CTRL,t.SEMICOLON,t.EQUALS,t.CAPS_LOCK,t.CONTEXT_MENU,t.F1,t.F2,t.F3,t.F4,t.F5,t.F6,t.F7,t.F8,t.F9,t.F10,t.F11,t.F12].includes(n)&&h(!0)},onInputMouseDown:function(){I(!0)},onInputChange:function(e){var n=e.target.value;if(s&&N.current&&/[\r\n]/.test(N.current)){var t=N.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");n=n.replace(t,N.current)}N.current=null,R(n)},onInputPaste:function(e){var n=e.clipboardData,t=null==n?void 0:n.getData("text");N.current=t||""},onInputCompositionStart:function(){a.current=!0},onInputCompositionEnd:function(e){a.current=!1,"combobox"!==i&&R(e.target.value)},onInputBlur:b},M="multiple"===i||"tags"===i?e.createElement(j,S({},n,D)):e.createElement(W,S({},n,D));return e.createElement("div",{ref:y,className:"".concat(u,"-selector"),onClick:function(e){e.target!==r.current&&(void 0!==document.body.style.msTouchAction?setTimeout(function(){r.current.focus()}):r.current.focus())},onMouseDown:function(e){var n=x();e.target===r.current||n||"combobox"===i&&d||e.preventDefault(),("combobox"===i||c&&n)&&l||(l&&!1!==f&&v("",!0,!1),h())}},p&&e.createElement("div",{className:"".concat(u,"-prefix")},p),M)},H=e.forwardRef(z),B=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],U=function(n,t){var o=n.prefixCls;n.disabled;var r=n.visible,a=n.children,u=n.popupElement,l=n.animation,i=n.transitionName,c=n.dropdownStyle,s=n.dropdownClassName,d=n.direction,p=void 0===d?"ltr":d,f=n.placement,v=n.builtinPlacements,m=n.dropdownMatchSelectWidth,g=n.dropdownRender,b=n.dropdownAlign,w=n.getPopupContainer,x=n.empty,I=n.getTriggerDOMNode,R=n.onPopupVisibleChange,D=n.onPopupMouseEnter,M=y(n,B),P="".concat(o,"-dropdown"),T=u;g&&(T=g(u));var O=e.useMemo(function(){return v||function(e){var n=!0===e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}}(m)},[v,m]),V=l?"".concat(P,"-").concat(l):i,k="number"==typeof m,A=e.useMemo(function(){return k?null:!1===m?"minWidth":"width"},[m,k]),F=c;k&&(F=C(C({},F),{},{width:m}));var L=e.useRef(null);return e.useImperativeHandle(t,function(){return{getPopupElement:function(){var e;return null===(e=L.current)||void 0===e?void 0:e.popupElement}}}),e.createElement(N,S({},M,{showAction:R?["click"]:[],hideAction:R?["click"]:[],popupPlacement:f||("rtl"===p?"bottomRight":"bottomLeft"),builtinPlacements:O,prefixCls:P,popupTransitionName:V,popup:e.createElement("div",{onMouseEnter:D},T),ref:L,stretch:A,popupAlign:b,popupVisible:r,getPopupContainer:w,popupClassName:h(s,E({},"".concat(P,"-empty"),x)),popupStyle:F,getTriggerDOMNode:I,onPopupVisibleChange:R}),a)},G=e.forwardRef(U);function Y(e,n){var t,o=e.key;return"value"in e&&(t=e.value),null!=o?o:void 0!==t?t:"rc-index-key-".concat(n)}function X(e){return void 0!==e&&!Number.isNaN(e)}function J(e,n){var t=e||{},o=t.label||(n?"children":"label");return{label:o,value:t.value||"value",options:t.options||"options",groupLabel:t.groupLabel||o}}function Q(e){var n=C({},e);return"props"in n||Object.defineProperty(n,"props",{get:function(){return l(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),n}}),n}var $=e.createContext(null);function q(n){var t=n.visible,o=n.values;if(!t)return null;return e.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,50).map(function(e){var n=e.label,t=e.value;return["number","string"].includes(b(n))?n:t}).join(", ")),o.length>50?", ...":null)}var Z=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],ee=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],ne=function(e){return"tags"===e||"multiple"===e},te=e.forwardRef(function(t,o){var r,a=t.id,u=t.prefixCls,l=t.className,p=t.showSearch,f=t.tagRender,v=t.direction,m=t.omitDomProps,g=t.displayValues,N=t.onDisplayValuesChange,R=t.emptyOptions,T=t.notFoundContent,O=void 0===T?"Not Found":T,V=t.onClear,k=t.mode,A=t.disabled,F=t.loading,L=t.getInputElement,K=t.getRawInputElement,_=t.open,j=t.defaultOpen,W=t.onDropdownVisibleChange,z=t.activeValue,B=t.onActiveValueChange,U=t.activeDescendantId,Y=t.searchValue,J=t.autoClearSearchValue,Q=t.onSearch,te=t.onSearchSplit,oe=t.tokenSeparators,re=t.allowClear,ae=t.prefix,ue=t.suffixIcon,le=t.clearIcon,ie=t.OptionList,ce=t.animation,se=t.transitionName,de=t.dropdownStyle,pe=t.dropdownClassName,fe=t.dropdownMatchSelectWidth,ve=t.dropdownRender,me=t.dropdownAlign,he=t.placement,ge=t.builtinPlacements,be=t.getPopupContainer,we=t.showAction,ye=void 0===we?[]:we,Ce=t.onFocus,Ee=t.onBlur,Se=t.onKeyUp,xe=t.onKeyDown,Ie=t.onMouseDown,Ne=y(t,Z),Re=ne(k),De=(void 0!==p?p:Re)||"combobox"===k,Me=C({},Ne);ee.forEach(function(e){delete Me[e]}),null==m||m.forEach(function(e){delete Me[e]});var Pe=e.useState(!1),Te=w(Pe,2),Oe=Te[0],Ve=Te[1];e.useEffect(function(){Ve(i())},[]);var ke=e.useRef(null),Ae=e.useRef(null),Fe=e.useRef(null),Le=e.useRef(null),Ke=e.useRef(null),_e=e.useRef(!1),je=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=e.useState(!1),o=w(t,2),r=o[0],a=o[1],u=e.useRef(null),l=function(){window.clearTimeout(u.current)};return e.useEffect(function(){return l},[]),[r,function(e,t){l(),u.current=window.setTimeout(function(){a(e),t&&t()},n)},l]}(),We=w(je,3),ze=We[0],He=We[1],Be=We[2];e.useImperativeHandle(o,function(){var e,n;return{focus:null===(e=Le.current)||void 0===e?void 0:e.focus,blur:null===(n=Le.current)||void 0===n?void 0:n.blur,scrollTo:function(e){var n;return null===(n=Ke.current)||void 0===n?void 0:n.scrollTo(e)},nativeElement:ke.current||Ae.current}});var Ue=e.useMemo(function(){var e;if("combobox"!==k)return Y;var n=null===(e=g[0])||void 0===e?void 0:e.value;return"string"==typeof n||"number"==typeof n?String(n):""},[Y,k,g]),Ge="combobox"===k&&"function"==typeof L&&L()||null,Ye="function"==typeof K&&K(),Xe=c(Ae,null==Ye||null===(r=Ye.props)||void 0===r?void 0:r.ref),Je=e.useState(!1),Qe=w(Je,2),$e=Qe[0],qe=Qe[1];s(function(){qe(!0)},[]);var Ze=d(!1,{defaultValue:j,value:_}),en=w(Ze,2),nn=en[0],tn=en[1],on=!!$e&&nn,rn=!O&&R;(A||rn&&on&&"combobox"===k)&&(on=!1);var an=!rn&&on,un=e.useCallback(function(e){var n=void 0!==e?e:!on;A||(tn(n),on!==n&&(null==W||W(n)))},[A,on,tn,W]),ln=e.useMemo(function(){return(oe||[]).some(function(e){return["\n","\r\n"].includes(e)})},[oe]),cn=e.useContext($)||{},sn=cn.maxCount,dn=cn.rawValues,pn=function(e,n,t){if(!(Re&&X(sn)&&(null==dn?void 0:dn.size)>=sn)){var o=!0,r=e;null==B||B(null);var a=function(e,n,t){if(!n||!n.length)return null;var o=!1,r=function e(n,t){var r=x(t),a=r[0],u=r.slice(1);if(!a)return[n];var l=n.split(a);return o=o||l.length>1,l.reduce(function(n,t){return[].concat(I(n),I(e(t,u)))},[]).filter(Boolean)}(e,n);return o?void 0!==t?r.slice(0,t):r:null}(e,oe,X(sn)?sn-dn.size:void 0),u=t?null:a;return"combobox"!==k&&u&&(r="",null==te||te(u),un(!1),o=!1),Q&&Ue!==r&&Q(r,{source:n?"typing":"effect"}),o}};e.useEffect(function(){on||Re||"combobox"===k||pn("",!1,!1)},[on]),e.useEffect(function(){nn&&A&&tn(!1),A&&!_e.current&&He(!1)},[A]);var fn=P(),vn=w(fn,2),mn=vn[0],hn=vn[1],gn=e.useRef(!1),bn=e.useRef(!1),wn=[];e.useEffect(function(){return function(){wn.forEach(function(e){return clearTimeout(e)}),wn.splice(0,wn.length)}},[]);var yn,Cn=e.useState({}),En=w(Cn,2)[1];Ye&&(yn=function(e){un(e)}),function(n,t,o,r){var a=e.useRef(null);a.current={open:t,triggerOpen:o,customizedTrigger:r},e.useEffect(function(){function e(e){var t;if(null===(t=a.current)||void 0===t||!t.customizedTrigger){var o=e.target;o.shadowRoot&&e.composed&&(o=e.composedPath()[0]||o),a.current.open&&n().filter(function(e){return e}).every(function(e){return!e.contains(o)&&e!==o})&&a.current.triggerOpen(!1)}}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}},[])}(function(){var e;return[ke.current,null===(e=Fe.current)||void 0===e?void 0:e.getPopupElement()]},an,un,!!Ye);var Sn,xn=e.useMemo(function(){return C(C({},t),{},{notFoundContent:O,open:on,triggerOpen:an,id:a,showSearch:De,multiple:Re,toggleOpen:un})},[t,O,an,on,a,De,Re,un]),In=!!ue||F;In&&(Sn=e.createElement(D,{className:h("".concat(u,"-arrow"),E({},"".concat(u,"-arrow-loading"),F)),customizeIcon:ue,customizeIconProps:{loading:F,searchValue:Ue,open:on,focused:ze,showSearch:De}}));var Nn,Rn=function(e,t,o,r,a){var u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0,i=arguments.length>7?arguments[7]:void 0,c=n.useMemo(function(){return"object"===b(r)?r.clearIcon:a||void 0},[r,a]);return{allowClear:n.useMemo(function(){return!(u||!r||!o.length&&!l||"combobox"===i&&""===l)},[r,u,o.length,l,i]),clearIcon:n.createElement(D,{className:"".concat(e,"-clear"),onMouseDown:t,customizeIcon:c},"×")}}(u,function(){var e;null==V||V(),null===(e=Le.current)||void 0===e||e.focus(),N([],{type:"clear",values:g}),pn("",!1,!1)},g,re,le,A,Ue,k),Dn=Rn.allowClear,Mn=Rn.clearIcon,Pn=e.createElement(ie,{ref:Ke}),Tn=h(u,l,E(E(E(E(E(E(E(E(E(E({},"".concat(u,"-focused"),ze),"".concat(u,"-multiple"),Re),"".concat(u,"-single"),!Re),"".concat(u,"-allow-clear"),re),"".concat(u,"-show-arrow"),In),"".concat(u,"-disabled"),A),"".concat(u,"-loading"),F),"".concat(u,"-open"),on),"".concat(u,"-customize-input"),Ge),"".concat(u,"-show-search"),De)),On=e.createElement(G,{ref:Fe,disabled:A,prefixCls:u,visible:an,popupElement:Pn,animation:ce,transitionName:se,dropdownStyle:de,dropdownClassName:pe,direction:v,dropdownMatchSelectWidth:fe,dropdownRender:ve,dropdownAlign:me,placement:he,builtinPlacements:ge,getPopupContainer:be,empty:R,getTriggerDOMNode:function(e){return Ae.current||e},onPopupVisibleChange:yn,onPopupMouseEnter:function(){En({})}},Ye?e.cloneElement(Ye,{ref:Xe}):e.createElement(H,S({},t,{domRef:Ae,prefixCls:u,inputElement:Ge,ref:Le,id:a,prefix:ae,showSearch:De,autoClearSearchValue:J,mode:k,activeDescendantId:U,tagRender:f,values:g,open:on,onToggleOpen:un,activeValue:z,searchValue:Ue,onSearch:pn,onSearchSubmit:function(e){e&&e.trim()&&Q(e,{source:"submit"})},onRemove:function(e){var n=g.filter(function(n){return n!==e});N(n,{type:"remove",values:[e]})},tokenWithEnter:ln,onInputBlur:function(){gn.current=!1}})));return Nn=Ye?On:e.createElement("div",S({className:Tn},Me,{ref:ke,onMouseDown:function(e){var n,t=e.target,o=null===(n=Fe.current)||void 0===n?void 0:n.getPopupElement();if(o&&o.contains(t)){var r=setTimeout(function(){var e,n=wn.indexOf(r);-1!==n&&wn.splice(n,1),Be(),Oe||o.contains(document.activeElement)||null===(e=Le.current)||void 0===e||e.focus()});wn.push(r)}for(var a=arguments.length,u=new Array(a>1?a-1:0),l=1;l<a;l++)u[l-1]=arguments[l];null==Ie||Ie.apply(void 0,[e].concat(u))},onKeyDown:function(e){var n,t=mn(),o=e.key,r="Enter"===o;if(r&&("combobox"!==k&&e.preventDefault(),on||un(!0)),hn(!!Ue),"Backspace"===o&&!t&&Re&&!Ue&&g.length){for(var a=I(g),u=null,l=a.length-1;l>=0;l-=1){var i=a[l];if(!i.disabled){a.splice(l,1),u=i;break}}u&&N(a,{type:"remove",values:[u]})}for(var c=arguments.length,s=new Array(c>1?c-1:0),d=1;d<c;d++)s[d-1]=arguments[d];!on||r&&gn.current||(r&&(gn.current=!0),null===(n=Ke.current)||void 0===n||n.onKeyDown.apply(n,[e].concat(s))),null==xe||xe.apply(void 0,[e].concat(s))},onKeyUp:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var r;on&&(null===(r=Ke.current)||void 0===r||r.onKeyUp.apply(r,[e].concat(t))),"Enter"===e.key&&(gn.current=!1),null==Se||Se.apply(void 0,[e].concat(t))},onFocus:function(){He(!0),A||(Ce&&!bn.current&&Ce.apply(void 0,arguments),ye.includes("focus")&&un(!0)),bn.current=!0},onBlur:function(){_e.current=!0,He(!1,function(){bn.current=!1,_e.current=!1,un(!1)}),A||(Ue&&("tags"===k?Q(Ue,{source:"submit"}):"multiple"===k&&Q("",{source:"blur"})),Ee&&Ee.apply(void 0,arguments))}}),e.createElement(q,{visible:ze&&!on,values:g}),On,Sn,Dn&&Mn),e.createElement(M.Provider,{value:xn},Nn)}),oe=function(){return null};oe.isSelectOptGroup=!0;var re=function(){return null};re.isSelectOption=!0;var ae=["disabled","title","children","style","className"];function ue(e){return"string"==typeof e||"number"==typeof e}var le=function(n,o){var r=e.useContext(M),a=r.prefixCls,l=r.id,i=r.open,c=r.multiple,s=r.mode,d=r.searchValue,v=r.toggleOpen,m=r.notFoundContent,g=r.onPopupScroll,b=e.useContext($),C=b.maxCount,x=b.flattenOptions,N=b.onActiveValue,P=b.defaultActiveFirstOption,T=b.onSelect,O=b.menuItemSelectedIcon,V=b.rawValues,k=b.fieldNames,A=b.virtual,F=b.direction,L=b.listHeight,K=b.listItemHeight,_=b.optionRender,j="".concat(a,"-item"),W=p(function(){return x},[i,x],function(e,n){return n[0]&&e[1]!==n[1]}),z=e.useRef(null),H=e.useMemo(function(){return c&&X(C)&&(null==V?void 0:V.size)>=C},[c,C,null==V?void 0:V.size]),B=function(e){e.preventDefault()},U=function(e){var n;null===(n=z.current)||void 0===n||n.scrollTo("number"==typeof e?{index:e}:e)},G=e.useCallback(function(e){return"combobox"!==s&&V.has(e)},[s,I(V).toString(),V.size]),Y=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=W.length,o=0;o<t;o+=1){var r=(e+o*n+t)%t,a=W[r]||{},u=a.group,l=a.data;if(!u&&(null==l||!l.disabled)&&(G(l.value)||!H))return r}return-1},J=e.useState(function(){return Y(0)}),Q=w(J,2),q=Q[0],Z=Q[1],ee=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Z(e);var t={source:n?"keyboard":"mouse"},o=W[e];o?N(o.value,e,t):N(null,-1,t)};e.useEffect(function(){ee(!1!==P?Y(0):-1)},[W.length,d]);var ne=e.useCallback(function(e){return"combobox"===s?String(e).toLowerCase()===d.toLowerCase():V.has(e)},[s,d,I(V).toString(),V.size]);e.useEffect(function(){var e,n=setTimeout(function(){if(!c&&i&&1===V.size){var e=Array.from(V)[0],n=W.findIndex(function(n){var t=n.data;return d?String(t.value).startsWith(d):t.value===e});-1!==n&&(ee(n),U(n))}});i&&(null===(e=z.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(n)}},[i,d]);var te=function(e){void 0!==e&&T(e,{selected:!V.has(e)}),c||v(!1)};if(e.useImperativeHandle(o,function(){return{onKeyDown:function(e){var n=e.which,o=e.ctrlKey;switch(n){case t.N:case t.P:case t.UP:case t.DOWN:var r=0;if(n===t.UP?r=-1:n===t.DOWN?r=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&o&&(n===t.N?r=1:n===t.P&&(r=-1)),0!==r){var a=Y(q+r,r);U(a),ee(a,!0)}break;case t.TAB:case t.ENTER:var u,l=W[q];!l||null!=l&&null!==(u=l.data)&&void 0!==u&&u.disabled||H?te(void 0):te(l.value),i&&e.preventDefault();break;case t.ESC:v(!1),i&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){U(e)}}}),0===W.length)return e.createElement("div",{role:"listbox",id:"".concat(l,"_list"),className:"".concat(j,"-empty"),onMouseDown:B},m);var oe=Object.keys(k).map(function(e){return k[e]}),re=function(e){return e.label};function le(e,n){return{role:e.group?"presentation":"option",id:"".concat(l,"_list_").concat(n)}}var ie=function(n){var t=W[n];if(!t)return null;var o=t.data||{},r=o.value,a=t.group,l=u(o,!0),i=re(t);return t?e.createElement("div",S({"aria-label":"string"!=typeof i||a?null:i},l,{key:n},le(t,n),{"aria-selected":ne(r)}),r):null},ce={role:"listbox",id:"".concat(l,"_list")};return e.createElement(e.Fragment,null,A&&e.createElement("div",S({},ce,{style:{height:0,width:0,overflow:"hidden"}}),ie(q-1),ie(q),ie(q+1)),e.createElement(R,{itemKey:"key",ref:z,data:W,height:L,itemHeight:K,fullHeight:!1,onMouseDown:B,onScroll:g,virtual:A,direction:F,innerProps:A?null:ce},function(n,t){var o=n.group,r=n.groupOption,a=n.data,l=n.label,i=n.value,c=a.key;if(o){var s,d=null!==(s=a.title)&&void 0!==s?s:ue(l)?l.toString():void 0;return e.createElement("div",{className:h(j,"".concat(j,"-group"),a.className),title:d},void 0!==l?l:c)}var p=a.disabled,v=a.title;a.children;var m=a.style,g=a.className,b=y(a,ae),w=f(b,oe),C=G(i),x=p||!C&&H,I="".concat(j,"-option"),N=h(j,I,g,E(E(E(E({},"".concat(I,"-grouped"),r),"".concat(I,"-active"),q===t&&!x),"".concat(I,"-disabled"),x),"".concat(I,"-selected"),C)),R=re(n),M=!O||"function"==typeof O||C,P="number"==typeof R?R:R||i,T=ue(P)?P.toString():void 0;return void 0!==v&&(T=v),e.createElement("div",S({},u(w),A?{}:le(n,t),{"aria-selected":ne(i),className:N,title:T,onMouseMove:function(){q===t||x||ee(t)},onClick:function(){x||te(i)},style:m}),e.createElement("div",{className:"".concat(I,"-content")},"function"==typeof _?_(n,{index:t}):P),e.isValidElement(O)||C,M&&e.createElement(D,{className:"".concat(j,"-option-state"),customizeIcon:O,customizeIconProps:{value:i,disabled:x,isSelected:C}},C?"✓":null))}))},ie=e.forwardRef(le);function ce(e,n){return k(e).join("").toUpperCase().includes(n)}var se=0,de=v();function pe(n){var t=e.useState(),o=w(t,2),r=o[0],a=o[1];return e.useEffect(function(){var e;a("rc_select_".concat((de?(e=se,se+=1):e="TEST_OR_SSR",e)))},[]),n||r}var fe=["children","value"],ve=["children"];function me(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m(n).map(function(n,o){if(!e.isValidElement(n)||!n.type)return null;var r=n,a=r.type.isSelectOptGroup,u=r.key,l=r.props,i=l.children,c=y(l,ve);return t||!a?function(e){var n=e,t=n.key,o=n.props,r=o.children,a=o.value,u=y(o,fe);return C({key:t,value:void 0!==a?a:t,children:r},u)}(n):C(C({key:"__RC_SELECT_GRP__".concat(null===u?o:u,"__"),label:u},c),{},{options:me(i)})}).filter(function(e){return e})}function he(n){var t=e.useRef();t.current=n;var o=e.useCallback(function(){return t.current.apply(t,arguments)},[]);return o}var ge=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],be=["inputValue"];var we=e.forwardRef(function(n,t){var o=n.id,r=n.mode,a=n.prefixCls,u=void 0===a?"rc-select":a,l=n.backfill,i=n.fieldNames,c=n.inputValue,s=n.searchValue,p=n.onSearch,f=n.autoClearSearchValue,v=void 0===f||f,m=n.onSelect,h=n.onDeselect,g=n.dropdownMatchSelectWidth,x=void 0===g||g,N=n.filterOption,R=n.filterSort,D=n.optionFilterProp,M=n.optionLabelProp,P=n.options,T=n.optionRender,O=n.children,V=n.defaultActiveFirstOption,A=n.menuItemSelectedIcon,F=n.virtual,L=n.direction,K=n.listHeight,_=void 0===K?200:K,j=n.listItemHeight,W=void 0===j?20:j,z=n.labelRender,H=n.value,B=n.defaultValue,U=n.labelInValue,G=n.onChange,X=n.maxCount,q=y(n,ge),Z=pe(o),ee=ne(r),oe=!(P||!O),re=e.useMemo(function(){return(void 0!==N||"combobox"!==r)&&N},[N,r]),ae=e.useMemo(function(){return J(i,oe)},[JSON.stringify(i),oe]),ue=d("",{value:void 0!==s?s:c,postState:function(e){return e||""}}),le=w(ue,2),se=le[0],de=le[1],fe=function(n,t,o,r,a){return e.useMemo(function(){var e=n;!n&&(e=me(t));var u=new Map,l=new Map,i=function(e,n,t){t&&"string"==typeof t&&e.set(n[t],n)};return function e(n){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=0;c<n.length;c+=1){var s=n[c];!s[o.options]||t?(u.set(s[o.value],s),i(l,s,o.label),i(l,s,r),i(l,s,a)):e(s[o.options],!0)}}(e),{options:e,valueOptions:u,labelOptions:l}},[n,t,o,r,a])}(P,O,ae,D,M),ve=fe.valueOptions,we=fe.labelOptions,ye=fe.options,Ce=e.useCallback(function(e){return k(e).map(function(e){var n,t,o,r,a,u;(function(e){return!e||"object"!==b(e)})(e)?n=e:(o=e.key,t=e.label,n=null!==(u=e.value)&&void 0!==u?u:o);var l,i=ve.get(n);i&&(void 0===t&&(t=null==i?void 0:i[M||ae.label]),void 0===o&&(o=null!==(l=null==i?void 0:i.key)&&void 0!==l?l:n),r=null==i?void 0:i.disabled,a=null==i?void 0:i.title);return{label:t,value:n,key:o,disabled:r,title:a}})},[ae,M,ve]),Ee=d(B,{value:H}),Se=w(Ee,2),xe=Se[0],Ie=Se[1],Ne=e.useMemo(function(){var e,n=Ce(ee&&null===xe?[]:xe);return"combobox"===r&&function(e){return!e&&0!==e}(null===(e=n[0])||void 0===e?void 0:e.value)?[]:n},[xe,Ce,r,ee]),Re=function(n,t){var o=e.useRef({values:new Map,options:new Map});return[e.useMemo(function(){var e=o.current,r=e.values,a=e.options,u=n.map(function(e){var n;return void 0===e.label?C(C({},e),{},{label:null===(n=r.get(e.value))||void 0===n?void 0:n.label}):e}),l=new Map,i=new Map;return u.forEach(function(e){l.set(e.value,e),i.set(e.value,t.get(e.value)||a.get(e.value))}),o.current.values=l,o.current.options=i,u},[n,t]),e.useCallback(function(e){return t.get(e)||o.current.options.get(e)},[t])]}(Ne,ve),De=w(Re,2),Me=De[0],Pe=De[1],Te=e.useMemo(function(){if(!r&&1===Me.length){var e=Me[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return Me.map(function(e){var n;return C(C({},e),{},{label:null!==(n="function"==typeof z?z(e):e.label)&&void 0!==n?n:e.value})})},[r,Me,z]),Oe=e.useMemo(function(){return new Set(Me.map(function(e){return e.value}))},[Me]);e.useEffect(function(){if("combobox"===r){var e,n=null===(e=Me[0])||void 0===e?void 0:e.value;de(function(e){return null!=e}(n)?String(n):"")}},[Me]);var Ve=he(function(e,n){var t=null!=n?n:e;return E(E({},ae.value,e),ae.label,t)}),ke=function(n,t,o,r,a){return e.useMemo(function(){if(!o||!1===r)return n;var e=t.options,u=t.label,l=t.value,i=[],c="function"==typeof r,s=o.toUpperCase(),d=c?r:function(n,t){return a?ce(t[a],s):t[e]?ce(t["children"!==u?u:"label"],s):ce(t[l],s)},p=c?function(e){return Q(e)}:function(e){return e};return n.forEach(function(n){if(n[e])if(d(o,p(n)))i.push(n);else{var t=n[e].filter(function(e){return d(o,p(e))});t.length&&i.push(C(C({},n),{},E({},e,t)))}else d(o,p(n))&&i.push(n)}),i},[n,r,a,o,t])}(e.useMemo(function(){if("tags"!==r)return ye;var e=I(ye);return I(Me).sort(function(e,n){return e.value<n.value?-1:1}).forEach(function(n){var t=n.value;(function(e){return ve.has(e)})(t)||e.push(Ve(t,n.label))}),e},[Ve,ye,ve,Me,r]),ae,se,re,D),Ae=e.useMemo(function(){return"tags"!==r||!se||ke.some(function(e){return e[D||"value"]===se})||ke.some(function(e){return e[ae.value]===se})?ke:[Ve(se)].concat(I(ke))},[Ve,D,r,ke,se,ae]),Fe=function e(n){return I(n).sort(function(e,n){return R(e,n,{searchValue:se})}).map(function(n){return Array.isArray(n.options)?C(C({},n),{},{options:n.options.length>0?e(n.options):n.options}):n})},Le=e.useMemo(function(){return R?Fe(Ae):Ae},[Ae,R,se]),Ke=e.useMemo(function(){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.fieldNames,o=n.childrenAsData,r=[],a=J(t,!1),u=a.label,l=a.value,i=a.options,c=a.groupLabel;return function e(n,t){Array.isArray(n)&&n.forEach(function(n){if(t||!(i in n)){var a=n[l];r.push({key:Y(n,r.length),groupOption:t,data:n,label:n[u],value:a})}else{var s=n[c];void 0===s&&o&&(s=n.label),r.push({key:Y(n,r.length),group:!0,data:n,label:s}),e(n[i],!0)}})}(e,!1),r}(Le,{fieldNames:ae,childrenAsData:oe})},[Le,ae,oe]),_e=function(e){var n=Ce(e);if(Ie(n),G&&(n.length!==Me.length||n.some(function(e,n){var t;return(null===(t=Me[n])||void 0===t?void 0:t.value)!==(null==e?void 0:e.value)}))){var t=U?n:n.map(function(e){return e.value}),o=n.map(function(e){return Q(Pe(e.value))});G(ee?t:t[0],ee?o:o[0])}},je=e.useState(null),We=w(je,2),ze=We[0],He=We[1],Be=e.useState(0),Ue=w(Be,2),Ge=Ue[0],Ye=Ue[1],Xe=void 0!==V?V:"combobox"!==r,Je=e.useCallback(function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,o=void 0===t?"keyboard":t;Ye(n),l&&"combobox"===r&&null!==e&&"keyboard"===o&&He(String(e))},[l,r]),Qe=function(e,n,t){var o=function(){var n,t=Pe(e);return[U?{label:null==t?void 0:t[ae.label],value:e,key:null!==(n=null==t?void 0:t.key)&&void 0!==n?n:e}:e,Q(t)]};if(n&&m){var r=o(),a=w(r,2),u=a[0],l=a[1];m(u,l)}else if(!n&&h&&"clear"!==t){var i=o(),c=w(i,2),s=c[0],d=c[1];h(s,d)}},$e=he(function(e,n){var t,o=!ee||n.selected;t=o?ee?[].concat(I(Me),[e]):[e]:Me.filter(function(n){return n.value!==e}),_e(t),Qe(e,o),"combobox"===r?He(""):ne&&!v||(de(""),He(""))}),qe=e.useMemo(function(){var e=!1!==F&&!1!==x;return C(C({},fe),{},{flattenOptions:Ke,onActiveValue:Je,defaultActiveFirstOption:Xe,onSelect:$e,menuItemSelectedIcon:A,rawValues:Oe,fieldNames:ae,virtual:e,direction:L,listHeight:_,listItemHeight:W,childrenAsData:oe,maxCount:X,optionRender:T})},[X,fe,Ke,Je,Xe,$e,A,Oe,ae,F,x,L,_,W,oe,T]);return e.createElement($.Provider,{value:qe},e.createElement(te,S({},q,{id:Z,prefixCls:u,ref:t,omitDomProps:be,mode:r,displayValues:Te,onDisplayValuesChange:function(e,n){_e(e);var t=n.type,o=n.values;"remove"!==t&&"clear"!==t||o.forEach(function(e){Qe(e.value,!1,t)})},direction:L,searchValue:se,onSearch:function(e,n){if(de(e),He(null),"submit"!==n.source)"blur"!==n.source&&("combobox"===r&&_e(e),null==p||p(e));else{var t=(e||"").trim();if(t){var o=Array.from(new Set([].concat(I(Oe),[t])));_e(o),Qe(t,!0),de("")}}},autoClearSearchValue:v,onSearchSplit:function(e){var n=e;"tags"!==r&&(n=e.map(function(e){var n=we.get(e);return null==n?void 0:n.value}).filter(function(e){return void 0!==e}));var t=Array.from(new Set([].concat(I(Oe),I(n))));_e(t),t.forEach(function(e){Qe(e,!0)})},dropdownMatchSelectWidth:x,OptionList:ie,emptyOptions:!Ke.length,activeValue:ze,activeDescendantId:"".concat(Z,"_list_").concat(Ge)})))});we.Option=re,we.OptGroup=oe;export{re as O,we as T,oe as a};
