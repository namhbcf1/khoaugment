import{j as e}from"./index-CI5lv9mG.js";import{r as a}from"./vendor-DD54NZMZ.js";import{br as $,f as g,a4 as n,J as f,T as G,l as c,H as y,d as w,B as d,ag as M,k as A,a$ as N,e as K,C as S,a5 as W,m as v,ac as F,n as H,ay as q,bd as U,E as k,b7 as P,b0 as V,aG as _}from"./antd-pmzi8FkM.js";import"./utils-Db1EesZb.js";const{Title:Y,Text:r,Paragraph:Z}=G,ee=({currentCart:h=[],onAddItem:m,customerData:p=null,visible:I=!0,refreshSuggestions:b=()=>{},loading:T=!1})=>{const[x,R]=a.useState([]),[l,B]=a.useState([]),[z,u]=a.useState(!0),[j,D]=a.useState("cart"),o={cart:[{id:101,name:"Chuột không dây Logitech M185",image:"https://via.placeholder.com/50",price:25e4,originalPrice:29e4,rating:4.5,reason:"Người mua laptop thường mua thêm",inStock:15},{id:102,name:"Bàn di chuột size L",image:"https://via.placeholder.com/50",price:9e4,originalPrice:12e4,rating:4.2,reason:"Phụ kiện đi kèm phổ biến",inStock:22},{id:103,name:'Túi đựng laptop 15.6"',image:"https://via.placeholder.com/50",price:35e4,originalPrice:4e5,rating:4.8,reason:"Bảo vệ laptop của bạn",inStock:8},{id:104,name:"Đèn LED USB",image:"https://via.placeholder.com/50",price:7e4,originalPrice:9e4,rating:4,reason:"Tiện dụng khi làm việc đêm",inStock:30}],customer:[{id:201,name:"SSD Samsung 250GB",image:"https://via.placeholder.com/50",price:12e5,originalPrice:15e5,rating:4.9,reason:"Dựa trên lịch sử mua hàng",inStock:12},{id:202,name:"Bàn phím cơ E-DRA EK387",image:"https://via.placeholder.com/50",price:85e4,originalPrice:95e4,rating:4.7,reason:"Khách hàng quan tâm gần đây",inStock:5},{id:203,name:"Webcam Logitech C270",image:"https://via.placeholder.com/50",price:55e4,originalPrice:7e5,rating:4.3,reason:"Sản phẩm tương tự đã mua",inStock:9}],trending:[{id:301,name:"Tai nghe gaming Logitech G Pro X",image:"https://via.placeholder.com/50",price:28e5,originalPrice:32e5,rating:4.8,reason:"Bán chạy tuần này",inStock:7},{id:302,name:"USB Kingston 64GB",image:"https://via.placeholder.com/50",price:18e4,originalPrice:22e4,rating:4.5,reason:"Sản phẩm phổ biến",inStock:42},{id:303,name:"Dây cáp HDMI 2.0",image:"https://via.placeholder.com/50",price:12e4,originalPrice:15e4,rating:4.6,reason:"Đang giảm giá",inStock:20}]},E=[{id:"bundle1",name:"Bộ phụ kiện laptop cơ bản",discount:15,items:[{id:101,name:"Chuột không dây Logitech M185",image:"https://via.placeholder.com/50",price:25e4},{id:102,name:"Bàn di chuột size L",image:"https://via.placeholder.com/50",price:9e4},{id:103,name:'Túi đựng laptop 15.6"',image:"https://via.placeholder.com/50",price:35e4}],originalPrice:69e4,bundlePrice:586500},{id:"bundle2",name:"Bộ nâng cấp hiệu suất",discount:10,items:[{id:201,name:"SSD Samsung 250GB",image:"https://via.placeholder.com/50",price:12e5},{id:501,name:"RAM Kingston 8GB DDR4",image:"https://via.placeholder.com/50",price:85e4}],originalPrice:205e4,bundlePrice:1845e3}],s=i=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(i);a.useEffect(()=>{u(!0),setTimeout(()=>{let i="cart",t=[...o.cart];p?.id?(i="customer",t=[...o.customer,...o.cart.slice(0,2)]):h.length||(i="trending",t=[...o.trending]),R(t),B(E),D(i),u(!1)},800)},[h,p,T]);const L=()=>{switch(j){case"customer":return"Đề xuất riêng cho khách hàng";case"cart":return"Khách hàng thường mua cùng";case"trending":return"Sản phẩm phổ biến hiện nay";default:return"Đề xuất cho bạn"}},C=()=>{switch(j){case"customer":return e.jsx(_,{style:{color:"#722ed1"}});case"cart":return e.jsx(P,{style:{color:"#faad14"}});case"trending":return e.jsx(V,{style:{color:"#f5222d"}});default:return e.jsx(P,{style:{color:"#faad14"}})}};return I?e.jsx("div",{className:"smart-suggestions",children:e.jsx($,{loading:z,active:!0,paragraph:{rows:8},title:!0,children:x.length>0||l.length>0?e.jsxs("div",{children:[e.jsxs(g,{title:e.jsxs(c,{children:[C(),e.jsx("span",{children:L()})]}),extra:e.jsx(d,{type:"text",icon:e.jsx(q,{}),onClick:b,size:"small",children:"Làm mới"}),size:"small",className:"suggestion-card",children:[e.jsx(n,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:x,renderItem:i=>e.jsx(n.Item,{children:e.jsxs(g,{size:"small",hoverable:!0,cover:e.jsx("div",{style:{padding:"10px",textAlign:"center",background:"#f5f5f5"},children:e.jsx("img",{alt:i.name,src:i.image,style:{maxHeight:"60px",maxWidth:"100%",objectFit:"contain"}})}),actions:[e.jsx(f,{title:"Thêm vào giỏ hàng",children:e.jsx(d,{type:"primary",size:"small",icon:e.jsx(M,{}),onClick:()=>m(i),children:"Thêm"})})],children:[e.jsx("div",{style:{height:"45px",overflow:"hidden"},children:e.jsx(f,{title:i.name,children:e.jsx(r,{strong:!0,style:{fontSize:"13px"},ellipsis:{tooltip:i.name},children:i.name})})}),e.jsxs(c,{direction:"vertical",size:0,style:{width:"100%"},children:[e.jsxs(c,{align:"center",children:[e.jsx(r,{style:{fontSize:"14px",color:"#f50",fontWeight:"bold"},children:s(i.price)}),i.originalPrice>i.price&&e.jsx(r,{delete:!0,style:{fontSize:"12px",color:"#999"},children:s(i.originalPrice)})]}),i.originalPrice>i.price&&e.jsxs(y,{color:"red",style:{marginTop:"4px"},children:["-",Math.round((i.originalPrice-i.price)/i.originalPrice*100),"%"]}),e.jsxs(r,{type:"secondary",style:{fontSize:"12px"},children:[e.jsx(w,{})," ",i.reason]})]})]})})}),l.length>0&&e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx(A,{orientation:"left",children:e.jsxs(c,{children:[e.jsx(N,{style:{color:"#1890ff"}}),e.jsx("span",{children:"Combo tiết kiệm"})]})}),e.jsx(n,{dataSource:l,renderItem:i=>e.jsx(n.Item,{children:e.jsx(g,{size:"small",title:e.jsxs(c,{children:[e.jsx(r,{strong:!0,children:i.name}),e.jsxs(y,{color:"red",children:["Tiết kiệm ",i.discount,"%"]})]}),style:{width:"100%"},children:e.jsxs(K,{gutter:[16,16],align:"middle",children:[e.jsx(S,{xs:24,sm:16,children:e.jsx(n,{dataSource:i.items,renderItem:t=>e.jsx(n.Item,{style:{padding:"8px 0"},children:e.jsx(n.Item.Meta,{avatar:e.jsx(W,{src:t.image,shape:"square"}),title:t.name,description:s(t.price)})})})}),e.jsx(S,{xs:24,sm:8,style:{textAlign:"center"},children:e.jsxs("div",{children:[e.jsx(v,{title:"Giá gốc",value:i.originalPrice,formatter:t=>e.jsx(r,{delete:!0,children:s(t)})}),e.jsx(v,{title:"Giá combo",value:i.bundlePrice,valueStyle:{color:"#cf1322",fontWeight:"bold"},formatter:t=>s(t),suffix:e.jsx(F,{style:{fontSize:"0.7em"}})}),e.jsx(d,{type:"primary",icon:e.jsx(H,{}),style:{marginTop:"16px"},onClick:()=>i.items.forEach(t=>m(t)),children:"Thêm tất cả"})]})})]})})})})]})]}),e.jsx("div",{style:{textAlign:"center",padding:"10px"},children:e.jsxs(r,{type:"secondary",style:{fontSize:"12px"},children:[e.jsx(U,{})," Đề xuất thông minh bằng AI dựa trên dữ liệu bán hàng và hành vi khách hàng"]})})]}):e.jsx(k,{description:"Không có đề xuất nào",image:k.PRESENTED_IMAGE_SIMPLE})})}):null};export{ee as default};
